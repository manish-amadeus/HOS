<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Submit_for_Approval</fullName>
    <availability>online</availability>
    <displayType>button</displayType>
    <linkType>javascript</linkType>
    <masterLabel>Submit for Approval</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <url>// If the Change Status is &quot;CRB Approved&quot; or &quot;Approved - Standard Change&quot; do not enter the approval process 

if ({!ISPICKVAL(NI_Change_Control__c.Change_Status__c , &quot;CRB Approved&quot;)} || {!ISPICKVAL(NI_Change_Control__c.Change_Status__c , &quot;Approved - Standard Change&quot;)}) 
{ 
alert(&quot;This Hosted RFC cannot be submitted for approval because it has already been approved&quot;); 
} 
else

// Enter the approval process for all other Change Statuses 
 
{
if(Modal.confirm(&apos;Once you submit this record for approval, you might not be able to edit it or recall it from the approval process depending on your settings. Continue?&apos;))
{
if ({!ISPICKVAL( NI_Change_Control__c.Priority__c , &quot;Incident&quot;)}  || {!ISPICKVAL( NI_Change_Control__c.Priority__c , &quot;Emergency&quot;)})  
{
navigateToUrl(&apos;/apex/NICCpriorityIncidentNoApprovalMessage?id={!NI_Change_Control__c.Id}&apos;);
}
else if ({!ISPICKVAL( NI_Change_Control__c.Priority__c , &quot;Normal&quot;)})  
{
  if ({!NI_Change_Control__c.Ready_for_Manager_Reviewer_Approval__c} != &apos;1&apos;)
{ 
     navigateToUrl(&apos;/apex/NICCRfcNormalSubMessage_Edit?id={!NI_Change_Control__c.Id}&apos;); 
}
   if ({!NI_Change_Control__c.Ready_for_Manager_Reviewer_Approval__c}  == &apos;1&apos;)
{
   navigateToUrl(&apos;/p/process/Submit?id={!NI_Change_Control__c.Id}&amp;retURL=%2F{!NI_Change_Control__c.Id}&apos;); 
} 
}
else if ({!ISPICKVAL( NI_Change_Control__c.Priority__c , &quot;Standard&quot;)})  
{
  if ({!NI_Change_Control__c.Ready_for_Manager_Reviewer_Approval__c} != &apos;1&apos;)
{ 
   navigateToUrl(&apos;/apex/NICNICCRfcStandardSubMessage_Edit?id={!NI_Change_Control__c.Id}&apos;); 
}
  if ({!NI_Change_Control__c.Ready_for_Manager_Reviewer_Approval__c}  == &apos;1&apos;)
{
   navigateToUrl(&apos;/p/process/Submit?id={!NI_Change_Control__c.Id}&amp;retURL=%2F{!NI_Change_Control__c.Id}&apos;);
} 
}
}
}</url>
</WebLink>
