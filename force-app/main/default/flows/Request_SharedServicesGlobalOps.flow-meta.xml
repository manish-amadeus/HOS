<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>GlobalOpsEmailAlertUpdatedRecordType</name>
        <label>GlobalOpsEmailAlertUpdatedRecordType</label>
        <locationX>953</locationX>
        <locationY>509</locationY>
        <actionName>Request__c.Global_Ops_Queue_Email_Alert</actionName>
        <actionType>emailAlert</actionType>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <description>Sends an email alert to members of the Global Ops Queue, via a Public Group, when a new Request record has been created</description>
        <name>GlobalOpsQueueEmailAlert</name>
        <label>GlobalOpsQueueEmailAlert</label>
        <locationX>524</locationX>
        <locationY>50</locationY>
        <actionName>Request__c.Global_Ops_Queue_Email_Alert</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>SendEmailToCreator</targetReference>
        </connector>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>PasswordResetEmail</name>
        <label>PasswordResetEmail</label>
        <locationX>1060</locationX>
        <locationY>164</locationY>
        <actionName>Request__c.SharedServicesGlobalOpsPasswordReset</actionName>
        <actionType>emailAlert</actionType>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <description>Sends an email to the creator of the Request</description>
        <name>SendEmailToCreator</name>
        <label>SendEmailToCreator</label>
        <locationX>775</locationX>
        <locationY>77</locationY>
        <actionName>Request__c.Shared_Servies_Global_Ops_Request</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>PasswordResetTypeDecision</targetReference>
        </connector>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>SharedServicesEmailAlertUpdatedRecordType</name>
        <label>SharedServicesEmailAlertUpdatedRecordType</label>
        <locationX>959</locationX>
        <locationY>356</locationY>
        <actionName>Request__c.Shared_Services_Queue_Email_Alert</actionName>
        <actionType>emailAlert</actionType>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <description>Sends an email alert to members of the Shared Services Queue, via a Public Group, when a new Request record has been created</description>
        <name>SharedServicesQueueEmailAlert</name>
        <label>SharedServicesQueueEmailAlert</label>
        <locationX>621</locationX>
        <locationY>189</locationY>
        <actionName>Request__c.Shared_Services_Queue_Email_Alert</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>SendEmailToCreator</targetReference>
        </connector>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>53.0</apiVersion>
    <decisions>
        <description>Decides whether the record that triggered the Flow is a new or updated record</description>
        <name>NewOrUpdatedDecision</name>
        <label>NewOrUpdatedDecision</label>
        <locationX>352</locationX>
        <locationY>479</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>NewRecord</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Name</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NewRecords</targetReference>
            </connector>
            <label>NewRecord</label>
        </rules>
        <rules>
            <name>UpdatedQueueOwnership</name>
            <conditionLogic>1 and (2 or 3)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.OwnerId</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.OwnerId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>GetGlobalOpsQueue.Id</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.OwnerId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>GetSharedServicesQueue.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdatedRecords</targetReference>
            </connector>
            <label>UpdatedQueueOwnership</label>
        </rules>
    </decisions>
    <decisions>
        <description>Updates records that are new with specified field values</description>
        <name>NewRecords</name>
        <label>NewRecords</label>
        <locationX>349</locationX>
        <locationY>315</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>SharedServicesNew</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Shared_Services_Request</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateNewSharedServicesRequest</targetReference>
            </connector>
            <label>SharedServicesNew</label>
        </rules>
        <rules>
            <name>SupportGlobalOpsNew</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Support_Global_Ops_Request</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateNewGlobalOpsRequest</targetReference>
            </connector>
            <label>SupportGlobalOpsNew</label>
        </rules>
    </decisions>
    <decisions>
        <description>Decides if the Request Type = Salesforce Password</description>
        <name>PasswordResetTypeDecision</name>
        <label>PasswordResetTypeDecision</label>
        <locationX>916</locationX>
        <locationY>188</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>SalesforcePassword</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Request_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Salesforce Password</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Request_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>New</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>PasswordResetEmail</targetReference>
            </connector>
            <label>SalesforcePassword</label>
        </rules>
    </decisions>
    <decisions>
        <name>UpdatedRecords</name>
        <label>UpdatedRecords</label>
        <locationX>572</locationX>
        <locationY>479</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>SharedServices</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.OwnerId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>GetSharedServicesQueue.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateToSharedServicesRecordType</targetReference>
            </connector>
            <label>SharedServices</label>
        </rules>
        <rules>
            <name>GlobalOps</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.OwnerId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>GetGlobalOpsQueue.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateToGlobalOpsRecordType</targetReference>
            </connector>
            <label>GlobalOps</label>
        </rules>
    </decisions>
    <description>Updates Request records for Shared Services and Global Ops; updated via NICC-054115</description>
    <formulas>
        <description>hyperlink to the newly created Request record</description>
        <name>varRequestRecordURL</name>
        <dataType>String</dataType>
        <expression>LEFT({!$Api.Enterprise_Server_URL_510}, FIND( &apos;/services&apos;, {!$Api.Enterprise_Server_URL_510})) &amp; {!$Record.Id}</expression>
    </formulas>
    <interviewLabel>Request-Shared Services &amp; Global Ops {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Request-Shared Services &amp; Global Ops</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <description>Gets details about the queue created for Global Ops Requests</description>
        <name>GetGlobalOpsQueue</name>
        <label>GetGlobalOpsQueue</label>
        <locationX>212</locationX>
        <locationY>547</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>NewOrUpdatedDecision</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Support_Global_Ops_Request</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Group</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Gets details about the Global Ops Request record type</description>
        <name>GetGlobalOpsRecordType</name>
        <label>GetGlobalOpsRecordType</label>
        <locationX>201</locationX>
        <locationY>356</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetSharedServicesQueue</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Support_Global_Ops_Request</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Gets details about the queue created for Shared Services Requests</description>
        <name>GetSharedServicesQueue</name>
        <label>GetSharedServicesQueue</label>
        <locationX>39</locationX>
        <locationY>534</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetGlobalOpsQueue</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SS_Request_Queue</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Group</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Gets details about the Shared Services Request record type</description>
        <name>GetSharedServicesRecordType</name>
        <label>GetSharedServicesRecordType</label>
        <locationX>42</locationX>
        <locationY>357</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetGlobalOpsRecordType</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Shared_Services_Request</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <description>Updates new Global Ops records with the Open Time (date/time record was created), updates the Owner to the &quot;Support Global Ops&quot; Queue and updates Request Contact to the current user.</description>
        <name>UpdateNewGlobalOpsRequest</name>
        <label>UpdateNewGlobalOpsRequest</label>
        <locationX>408</locationX>
        <locationY>146</locationY>
        <connector>
            <targetReference>GlobalOpsQueueEmailAlert</targetReference>
        </connector>
        <inputAssignments>
            <field>Open_Time__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>GetGlobalOpsQueue.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Request_Contact__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Updates new Shared Services records with the Open Time (date/time record was created), updates the Owner to the &quot;Shared Services&quot; Queue and updates Request Contact to the current user.</description>
        <name>UpdateNewSharedServicesRequest</name>
        <label>UpdateNewSharedServicesRequest</label>
        <locationX>518</locationX>
        <locationY>269</locationY>
        <connector>
            <targetReference>SharedServicesQueueEmailAlert</targetReference>
        </connector>
        <inputAssignments>
            <field>Open_Time__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>GetSharedServicesQueue.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Request_Contact__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateToGlobalOpsRecordType</name>
        <label>UpdateToGlobalOpsRecordType</label>
        <locationX>764</locationX>
        <locationY>593</locationY>
        <connector>
            <targetReference>GlobalOpsEmailAlertUpdatedRecordType</targetReference>
        </connector>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>GetGlobalOpsRecordType.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateToSharedServicesRecordType</name>
        <label>UpdateToSharedServicesRecordType</label>
        <locationX>772</locationX>
        <locationY>418</locationY>
        <connector>
            <targetReference>SharedServicesEmailAlertUpdatedRecordType</targetReference>
        </connector>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>GetSharedServicesRecordType.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>13</locationX>
        <locationY>71</locationY>
        <connector>
            <targetReference>GetSharedServicesRecordType</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>0123g0000004MeXAAU</stringValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>0123g0000004MeYAAU</stringValue>
            </value>
        </filters>
        <object>Request__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>templatePasswordResetEmail</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;&lt;span style=&quot;font-size: 10pt; font-family: &amp;quot;Segoe UI&amp;quot;, sans-serif; color: rgb(62, 62, 60);&quot;&gt;Hello Team,&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 10pt; font-family: &amp;quot;Segoe UI&amp;quot;, sans-serif; color: rgb(62, 62, 60);&quot;&gt;Please note that a request for a password reset has been received via the request object.&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 10pt; font-family: &amp;quot;Segoe UI&amp;quot;, sans-serif; color: rgb(62, 62, 60);&quot;&gt;The link to the request is here {!varRequestRecordURL}.&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 10pt; font-family: &amp;quot;Segoe UI&amp;quot;, sans-serif; color: rgb(62, 62, 60);&quot;&gt;The process outlined indicates that these requests should be worked by Shared Services therefore this team should take ownership of this request.&lt;/span&gt;&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>RequestRecordTypeId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <description>Stores a list of Request object record types</description>
        <name>RequestRecordTypes</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>RecordType</objectType>
    </variables>
    <variables>
        <description>LEFT({!$Api.Enterprise_Server_URL_510}, FIND( &apos;/services&apos;, {!$Api.Enterprise_Server_URL_510})) &amp; {!$Record.Id}</description>
        <name>varRequestURLDNU</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
