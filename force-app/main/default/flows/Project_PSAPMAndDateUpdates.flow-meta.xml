<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>56.0</apiVersion>
    <assignments>
        <description>Assigns a new Approver to the Milestone</description>
        <name>AssignNewApprover</name>
        <label>AssignNewApprover</label>
        <locationX>680</locationX>
        <locationY>583</locationY>
        <assignmentItems>
            <assignToReference>varUpdateMilestoneApprover.pse__Approver__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.pse__Project_Manager__r.pse__Salesforce_User__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUpdateMilestoneApprover.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopAllMilestones.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUpdatedMilestoneApproverCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varUpdateMilestoneApprover</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopAllMilestones</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignPMMilestoneToVariable</name>
        <label>AssignPMMilestoneToVariable</label>
        <locationX>303</locationX>
        <locationY>503</locationY>
        <assignmentItems>
            <assignToReference>varProjectManagerTimeMilestone</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopMilestonesToFindPMTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopMilestonesToFindPMTime</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Counts the number of records found in the GetRecords elements</description>
        <name>CountRecordsFound</name>
        <label>CountRecordsFound</label>
        <locationX>406</locationX>
        <locationY>202</locationY>
        <assignmentItems>
            <assignToReference>varCountOfAssignment</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>GetAssignments</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varCountOfMilestones</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>varAllMilestonesCollection</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varCountOfProjectTasks</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>varAllProjectTasksCollection</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>PMAssignmentCustomerProject</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdatePMOnAssignments</name>
        <label>UpdatePMOnAssignments</label>
        <locationX>1410</locationX>
        <locationY>526</locationY>
        <assignmentItems>
            <assignToReference>varUpdatePMOnAssigment.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopAssignmentsUpdatePM.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUpdatePMOnAssigment.Project_Manager__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.pse__Project_Manager__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUpdatedAssignmentPMCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varUpdatePMOnAssigment</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopAssignmentsUpdatePM</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Updates the Project Task Owner to match the new PM</description>
        <name>UpdateProjectTaskOwner</name>
        <label>UpdateProjectTaskOwner</label>
        <locationX>1392</locationX>
        <locationY>183</locationY>
        <assignmentItems>
            <assignToReference>varUpdateProjectTaskOwner.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopProjectTasks.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUpdateProjectTaskOwner.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.pse__Project_Manager__r.pse__Salesforce_User__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUpdatedProjectTaskOwnerCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varUpdateProjectTaskOwner</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopProjectTasks</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Updates the Start and End Dates on the Assignment Schedule record</description>
        <name>UpdateSchedule</name>
        <label>UpdateSchedule</label>
        <locationX>1058</locationX>
        <locationY>276</locationY>
        <assignmentItems>
            <assignToReference>varUpdateScheduleRecord.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopAssignments.pse__Schedule__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUpdateScheduleRecord.pse__Start_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.pse__Start_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUpdateScheduleRecord.pse__End_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.pse__End_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varScheduleUpdateCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varUpdateScheduleRecord</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopAssignments</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <description>Creates a filtered collection of Assignments where the End Date is &gt;= Today to update the Project Manager when the PM changes on a Project where the Project Type &lt;&gt; Customer Project</description>
        <name>AssignmentsUpdatePM</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>AssignmentsUpdatePM</label>
        <locationX>1000</locationX>
        <locationY>506</locationY>
        <assignNextValueToReference>currentItem_AssignmentsUpdatePM</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>GetAssignments</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_AssignmentsUpdatePM.pse__End_Date__c</leftValueReference>
            <operator>GreaterThanOrEqualTo</operator>
            <rightValue>
                <elementReference>$Flow.CurrentDate</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>UpdateExistingAssignmentsDecision</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <description>Finds assignments for the current PM to update for Customer projects</description>
        <name>PMAssignmentCustomerProject</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>PMAssignmentCustomerProject</label>
        <locationX>507</locationX>
        <locationY>208</locationY>
        <assignNextValueToReference>currentItem_PMAssignmentCustomerProject_0</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>GetAssignments</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_PMAssignmentCustomerProject_0.Name</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>PMT – PM TT</stringValue>
            </rightValue>
        </conditions>
        <conditions>
            <leftValueReference>currentItem_PMAssignmentCustomerProject_0.pse__Resource__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>$Record.pse__Project_Manager__r.Id</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>ProjectTypeDecision</targetReference>
        </connector>
    </collectionProcessors>
    <decisions>
        <description>Decides what kind of change is necessary: creating a new assignment or updating existing assignments. For changes to the Project Manager, requires that the field &quot;Is Resource Active&quot; on the Project Managers Contact record is set to TRUE.</description>
        <name>ChangeNeeded</name>
        <label>ChangeNeeded</label>
        <locationX>433</locationX>
        <locationY>44</locationY>
        <defaultConnectorLabel>No Changes Needed</defaultConnectorLabel>
        <rules>
            <name>NewProjectPMAssignment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.pse__Project_Manager__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.pse__Start_Date__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.pse__Start_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.pse__End_Date__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.pse__End_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CreateSchedule</targetReference>
            </connector>
            <label>NewProjectPMAssignment</label>
        </rules>
        <rules>
            <name>ChangeToPMSameStart_EndDates</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.pse__Project_Manager__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.pse__Start_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.pse__End_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.pse__Start_Date__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Record.pse__Start_Date__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.pse__End_Date__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Record.pse__End_Date__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.pse__Project_Manager__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CreateSchedule</targetReference>
            </connector>
            <label>ChangeToPMSameStart/EndDates</label>
        </rules>
        <rules>
            <name>ChangeStartOrEndDate</name>
            <conditionLogic>1 and 2 and ((3 and 4) or (5 and 6))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.pse__Project_Manager__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.pse__Project_Manager__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Record.pse__Project_Manager__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.pse__Start_Date__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.pse__Start_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.pse__End_Date__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.pse__End_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LoopAssignments</targetReference>
            </connector>
            <label>ChangeStartOrEndDate</label>
        </rules>
    </decisions>
    <decisions>
        <name>PMTimeMilestoneDecision</name>
        <label>PMTimeMilestoneDecision</label>
        <locationX>41</locationX>
        <locationY>549</locationY>
        <defaultConnector>
            <targetReference>LoopMilestonesToFindPMTime</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>PMTimeMilestone</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>LoopMilestonesToFindPMTime.Name</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Project Manager Time</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignPMMilestoneToVariable</targetReference>
            </connector>
            <label>PMTimeMilestone</label>
        </rules>
    </decisions>
    <decisions>
        <description>Decides if the Project is a Customer Project or non-Customer Project</description>
        <name>ProjectTypeDecision</name>
        <label>ProjectTypeDecision</label>
        <locationX>732</locationX>
        <locationY>227</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>CustomerProject</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.pse__Project_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Customer Project</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ChangeNeeded</targetReference>
            </connector>
            <label>CustomerProject</label>
        </rules>
        <rules>
            <name>NonCustomerPMChange</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.pse__Project_Type__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Customer Project</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.pse__Project_Manager__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LoopAllMilestones</targetReference>
            </connector>
            <label>NonCustomerPMChange</label>
        </rules>
    </decisions>
    <decisions>
        <description>Decides if there are any existing Assignments on the Project that needs to have the Project Manager field updated</description>
        <name>UpdateExistingAssignmentsDecision</name>
        <label>UpdateExistingAssignmentsDecision</label>
        <locationX>1162</locationX>
        <locationY>514</locationY>
        <defaultConnector>
            <targetReference>UpdateProjectTasksDecision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>UpdateAssignments</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varCountOfAssignment</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LoopAssignmentsUpdatePM</targetReference>
            </connector>
            <label>UpdateAssignments</label>
        </rules>
    </decisions>
    <decisions>
        <description>Decides if there are Milestones on the Project that need the Approver updated</description>
        <name>UpdateMilestoneDecision</name>
        <label>UpdateMilestoneDecision</label>
        <locationX>906</locationX>
        <locationY>327</locationY>
        <defaultConnector>
            <targetReference>AssignmentsUpdatePM</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>UpdateMilestone</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varCountOfMilestones</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LoopAllMilestones</targetReference>
            </connector>
            <label>UpdateMilestone</label>
        </rules>
    </decisions>
    <decisions>
        <description>Decides if there are Project Tasks associated to the Project that needs the Owner changed to a new Project Manager</description>
        <name>UpdateProjectTasksDecision</name>
        <label>UpdateProjectTasksDecision</label>
        <locationX>1392</locationX>
        <locationY>357</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>UpdateProjectTasks</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varCountOfProjectTasks</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LoopProjectTasks</targetReference>
            </connector>
            <label>UpdateProjectTasks</label>
        </rules>
    </decisions>
    <description>NICC-######; Replacing several process Builders and Flows that used to auto-create PM TT assignments and update Project child records when the PM changes.</description>
    <environments>Default</environments>
    <interviewLabel>Project - PSA PM and Date Updates {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Project - PSA PM and Date Updates</label>
    <loops>
        <name>LoopAllMilestones</name>
        <label>LoopAllMilestones</label>
        <locationX>593</locationX>
        <locationY>427</locationY>
        <collectionReference>varAllMilestonesCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AssignNewApprover</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>UpdateMilestoneApprover</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Loops through all applicable assignments to make an update to the Start Date and End Date</description>
        <name>LoopAssignments</name>
        <label>LoopAssignments</label>
        <locationX>914</locationX>
        <locationY>175</locationY>
        <collectionReference>PMAssignmentCustomerProject</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>UpdateSchedule</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>UpdateSchedules</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Loops through the collection filter from &quot;AssignmentsUpdatePM&quot; to update the Project Manager</description>
        <name>LoopAssignmentsUpdatePM</name>
        <label>LoopAssignmentsUpdatePM</label>
        <locationX>1320</locationX>
        <locationY>522</locationY>
        <collectionReference>AssignmentsUpdatePM</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>UpdatePMOnAssignments</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>UpdateAssignmentProjectManager</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Loops through all Milestones on the Project to find the Project Manager Time milestone</description>
        <name>LoopMilestonesToFindPMTime</name>
        <label>LoopMilestonesToFindPMTime</label>
        <locationX>62</locationX>
        <locationY>418</locationY>
        <collectionReference>varAllMilestonesCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>PMTimeMilestoneDecision</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>GetAssignments</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Loops through all Project Tasks to change the Owner</description>
        <name>LoopProjectTasks</name>
        <label>LoopProjectTasks</label>
        <locationX>1256</locationX>
        <locationY>161</locationY>
        <collectionReference>varAllProjectTasksCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>UpdateProjectTaskOwner</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>UpdateProjectTaskOwners</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <description>Creates an assignment for the PM</description>
        <name>CreatePMAssignment</name>
        <label>CreatePMAssignment</label>
        <locationX>1006</locationX>
        <locationY>35</locationY>
        <connector>
            <targetReference>UpdateMilestoneDecision</targetReference>
        </connector>
        <inputAssignments>
            <field>Name</field>
            <value>
                <stringValue>PMT – PM TT</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Project_Manager__c</field>
            <value>
                <elementReference>$Record.pse__Project_Manager__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Bill_Rate__c</field>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Is_Billable__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Milestone__c</field>
            <value>
                <elementReference>varProjectManagerTimeMilestone.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Project__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Resource__c</field>
            <value>
                <elementReference>$Record.pse__Project_Manager__r.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Role__c</field>
            <value>
                <stringValue>Implementation Expert</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Schedule__c</field>
            <value>
                <elementReference>CreateSchedule</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Status__c</field>
            <value>
                <stringValue>Scheduled</stringValue>
            </value>
        </inputAssignments>
        <object>pse__Assignment__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <description>Creates a new Schedule record that will be used to create a new Assignment for the PM</description>
        <name>CreateSchedule</name>
        <label>CreateSchedule</label>
        <locationX>814</locationX>
        <locationY>45</locationY>
        <connector>
            <targetReference>CreatePMAssignment</targetReference>
        </connector>
        <inputAssignments>
            <field>pse__End_Date__c</field>
            <value>
                <elementReference>$Record.pse__End_Date__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Friday_Hours__c</field>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Monday_Hours__c</field>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Start_Date__c</field>
            <value>
                <elementReference>$Record.pse__Start_Date__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Thursday_Hours__c</field>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Tuesday_Hours__c</field>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>pse__Wednesday_Hours__c</field>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </inputAssignments>
        <object>pse__Schedule__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <description>Pull a list of current PM Time Tracking Assignments</description>
        <name>GetAssignments</name>
        <label>GetAssignments</label>
        <locationX>344</locationX>
        <locationY>366</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetProjectTasks</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>pse__Project__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>pse__Assignment__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Gets all of the Milestones associated to the Project</description>
        <name>GetMilestones</name>
        <label>GetMilestones</label>
        <locationX>53</locationX>
        <locationY>306</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>LoopMilestonesToFindPMTime</targetReference>
        </connector>
        <filterLogic>1 AND (2 or 3)</filterLogic>
        <filters>
            <field>pse__Project__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>pse__Approver__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>pse__Approver__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.pse__Project_Manager__c</elementReference>
            </value>
        </filters>
        <object>pse__Milestone__c</object>
        <outputReference>varAllMilestonesCollection</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>pse__Approver__c</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>pse__Project__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <description>Gets all Project Tasks for the Project</description>
        <name>GetProjectTasks</name>
        <label>GetProjectTasks</label>
        <locationX>456</locationX>
        <locationY>401</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>CountRecordsFound</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>pse__Project__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <object>pse__Project_Task__c</object>
        <outputReference>varAllProjectTasksCollection</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>OwnerId</queriedFields>
    </recordLookups>
    <recordUpdates>
        <description>Updates the PM on all open assignments</description>
        <name>UpdateAssignmentProjectManager</name>
        <label>UpdateAssignmentProjectManager</label>
        <locationX>1192</locationX>
        <locationY>338</locationY>
        <connector>
            <targetReference>UpdateProjectTasksDecision</targetReference>
        </connector>
        <inputReference>varUpdatedAssignmentPMCollection</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Updates the Approver on all Milestones associated with the Project</description>
        <name>UpdateMilestoneApprover</name>
        <label>UpdateMilestoneApprover</label>
        <locationX>779</locationX>
        <locationY>552</locationY>
        <connector>
            <targetReference>AssignmentsUpdatePM</targetReference>
        </connector>
        <inputReference>varUpdatedMilestoneApproverCollection</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateProjectTaskOwners</name>
        <label>UpdateProjectTaskOwners</label>
        <locationX>1310</locationX>
        <locationY>32</locationY>
        <inputReference>varUpdatedProjectTaskOwnerCollection</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Updates the Start/End Dates of the Schedule records in the collection</description>
        <name>UpdateSchedules</name>
        <label>UpdateSchedules</label>
        <locationX>1097</locationX>
        <locationY>128</locationY>
        <inputReference>varScheduleUpdateCollection</inputReference>
    </recordUpdates>
    <start>
        <locationX>23</locationX>
        <locationY>14</locationY>
        <connector>
            <targetReference>GetMilestones</targetReference>
        </connector>
        <filterFormula>OR(ISCHANGED({!$Record.pse__Project_Manager__c}),ISCHANGED({!$Record.pse__Start_Date__c}),ISCHANGED({!$Record.pse__End_Date__c}))</filterFormula>
        <object>pse__Proj__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Obsolete</status>
    <variables>
        <name>currentItem_AssignmentsUpdatePM</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>pse__Assignment__c</objectType>
    </variables>
    <variables>
        <name>currentItem_FindPMTimeMilestone_0</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>pse__Milestone__c</objectType>
    </variables>
    <variables>
        <name>currentItem_PMAssignmentCustomerProject_0</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>pse__Assignment__c</objectType>
    </variables>
    <variables>
        <description>Collection of all Milestones associated to the Project</description>
        <name>varAllMilestonesCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Milestone__c</objectType>
    </variables>
    <variables>
        <description>Collection of all of the Project Tasks associated with the Project</description>
        <name>varAllProjectTasksCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Project_Task__c</objectType>
    </variables>
    <variables>
        <description>Holds the Assignments for the Project</description>
        <name>varAssignmentCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Assignment__c</objectType>
    </variables>
    <variables>
        <description>Holds a count of Assignments from the &quot;GetAssignments&quot; element</description>
        <name>varCountOfAssignment</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>varCountOfMilestones</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>varCountOfProjectTasks</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>varProjectManagerTimeMilestone</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Milestone__c</objectType>
    </variables>
    <variables>
        <name>varScheduleUpdateCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Schedule__c</objectType>
    </variables>
    <variables>
        <name>varUpdatedAssignmentPMCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Assignment__c</objectType>
    </variables>
    <variables>
        <description>Holds the Milestone records with updated Approver</description>
        <name>varUpdatedMilestoneApproverCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Milestone__c</objectType>
    </variables>
    <variables>
        <name>varUpdatedProjectTaskOwnerCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Project_Task__c</objectType>
    </variables>
    <variables>
        <description>Temporary record variable to allow for change in Milestone Approver</description>
        <name>varUpdateMilestoneApprover</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Milestone__c</objectType>
    </variables>
    <variables>
        <name>varUpdatePMOnAssigment</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Assignment__c</objectType>
    </variables>
    <variables>
        <name>varUpdateProjectTaskOwner</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Project_Task__c</objectType>
    </variables>
    <variables>
        <description>Record variable to update the Start and End Dates of the Assignment</description>
        <name>varUpdateScheduleRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>pse__Schedule__c</objectType>
    </variables>
</Flow>
