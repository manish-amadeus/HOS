{"dataSourceLinksInfo":{"enableAutomaticLinking":false,"excludeRelationships":[],"links":[{"fields":[{"dataSourceName":"Milestones_with_Activity_Line_Info","dataSourceType":"dataset","fieldName":"Region.Name"},{"dataSourceName":"Project_History","dataSourceType":"dataset","fieldName":"Region.Name"}],"label":"Region","name":"Link_6117"},{"fields":[{"dataSourceName":"Milestones_with_Activity_Line_Info","dataSourceType":"dataset","fieldName":"Group.Name"},{"dataSourceName":"Project_History","dataSourceType":"dataset","fieldName":"Group.Name"}],"label":"Group","name":"Link_6136"},{"fields":[{"dataSourceName":"Milestones_with_Activity_Line_Info","dataSourceType":"dataset","fieldName":"Id"},{"dataSourceName":"MilestoneHistory","dataSourceType":"dataset","fieldName":"ParentId"}],"label":"Milestone w Activity  & Milestone History","name":"Link_429"},{"fields":[{"dataSourceName":"Milestones_with_Activity_Line_Info","dataSourceType":"dataset","fieldName":"pse__Project__c"},{"dataSourceName":"Subscription_Activations_and_Transactions","dataSourceType":"dataset","fieldName":"SubscriptionActivation.Project__c"}],"label":"Milestone w Activity & Subscription Activations","name":"Link_447"},{"fields":[{"dataSourceName":"Milestones_with_Activity_Line_Info","dataSourceType":"dataset","fieldName":"pse__Project__c.pse__Opportunity__c.Opportunity_Number__c"},{"dataSourceName":"Subscription_Activations_and_Transactions","dataSourceType":"dataset","fieldName":"SubscriptionActivation.Opportunity__c"},{"dataSourceName":"Project_History","dataSourceType":"dataset","fieldName":"Project.Opportunity_Number__c"}],"label":"Milestone, Subscription, Project History","name":"Link_487"},{"fields":[{"dataSourceName":"static_2","dataSourceType":"static","fieldName":"Product Codes"},{"dataSourceName":"Subscription_Activations_and_Transactions","dataSourceType":"dataset","fieldName":"Product_Code__c"}],"label":"ASEM Product Code","name":"Link_543"},{"fields":[{"dataSourceName":"Subscription_Activations_and_Transactions","dataSourceType":"dataset","fieldName":"Region.Name"},{"dataSourceName":"Milestones_with_Activity_Line_Info","dataSourceType":"dataset","fieldName":"Region.Name"},{"dataSourceName":"Project_History","dataSourceType":"dataset","fieldName":"Region.Name"}],"label":"Milestone Subscription - Region Link","name":"Link_6586"},{"fields":[{"dataSourceName":"Subscription_Activations_and_Transactions","dataSourceType":"dataset","fieldName":"Group.Name"},{"dataSourceName":"Milestones_with_Activity_Line_Info","dataSourceType":"dataset","fieldName":"Group.Name"},{"dataSourceName":"Project_History","dataSourceType":"dataset","fieldName":"Group.Name"}],"label":"Milestone Subscription - Group Name","name":"Link_6629"},{"fields":[{"dataSourceName":"Subscription_Activations_and_Transactions","dataSourceType":"dataset","fieldName":"SubscriptionActivation.Opportunity_Number_Formula__c"},{"dataSourceName":"Project_History","dataSourceType":"dataset","fieldName":"Project.Opportunity_Number__c"}],"label":"Subscription to Project History","name":"Link_793"}]},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"dependent":true,"fields":["Region.Name"],"locked":false,"operator":"in"},{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"dependent":true,"fields":["Group.Name"],"locked":false,"operator":"in"},{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"dependent":true,"fields":["Practice.Name"],"locked":false,"operator":"in"},{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"dependent":true,"fields":["pse__Project__c.Name"],"locked":false,"operator":"in","value":"[]"},{"dataset":{"name":"Subscription_Activations_and_Transactions"},"dependent":true,"fields":["Product_Code__c"],"locked":false,"operator":"in","value":"[]"},{"dataset":{"name":"Project_History"},"dependent":true,"fields":["Account.Name"],"locked":false,"operator":"in"},{"dataset":{"name":"Subscription_Activations_and_Transactions"},"dependent":true,"fields":["SubscriptionActivation.Opportunity_Name_Formula__c"],"label":"Opportunity_Name","locked":false,"operator":"in"},{"dataset":{"name":"Project_History"},"dependent":true,"fields":["Project.Name"],"locked":false,"operator":"in"},{"dataset":{"name":"Subscription_Activations_and_Transactions"},"dependent":true,"fields":["SubscriptionActivation.Product_Line__c"],"label":"Product Line","locked":false,"operator":"in"},{"dataset":{"name":"Subscription_Activations_and_Transactions"},"dependent":true,"fields":["Date__c"],"locked":false,"operator":">=<="},{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"dependent":true,"fields":["pse__Target_Date__c"],"locked":false,"operator":">=<="},{"dataset":{"name":"Subscription_Activations_and_Transactions"},"dependent":true,"fields":["SubscriptionActivation.Product_Name__c"],"locked":false,"operator":"in"},{"dataset":{"name":"Subscription_Activations_and_Transactions"},"dependent":true,"fields":["SubscriptionActivation.Product_Code__c"],"locked":false,"operator":"in"}],"gridLayouts":[{"name":"Default","numColumns":50,"pages":[{"label":"High Level Summary","name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66","navigationHidden":false,"widgets":[{"colspan":36,"column":6,"name":"container_1","row":0,"rowspan":10,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":13,"column":17,"name":"text_2","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":12,"column":24,"name":"container_2","row":38,"rowspan":28,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":10,"column":25,"name":"chart_5","row":43,"rowspan":22,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":9,"column":26,"name":"link_1","row":39,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#FFFFFF","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":12,"column":18,"name":"container_5","row":10,"rowspan":28,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":10,"column":19,"name":"chart_6","row":15,"rowspan":22,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":10,"column":19,"name":"link_2","row":10,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#FFFFFF","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":12,"column":30,"name":"container_7","row":10,"rowspan":28,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":10,"column":31,"name":"chart_8","row":15,"rowspan":22,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":9,"column":32,"name":"link_3","row":11,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#FFFFFF","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":12,"column":12,"name":"container_8","row":38,"rowspan":28,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":10,"column":13,"name":"chart_9","row":43,"rowspan":22,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":9,"column":14,"name":"link_4","row":39,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#FFFFFF","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":24,"name":"filterpanel_2","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":19,"name":"filterpanel_3","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":12,"column":6,"name":"container_10","row":10,"rowspan":28,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":10,"column":7,"name":"chart_11","row":15,"rowspan":22,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":9,"column":8,"name":"link_6","row":11,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#FFFFFF","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":7,"name":"image_1","row":1,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":39,"name":"image_8","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":37,"name":"image_9","row":3,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":23,"name":"link_9","row":38,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":35,"name":"link_21","row":38,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":29,"name":"link_23","row":10,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":41,"name":"link_24","row":10,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":17,"name":"link_27","row":10,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":15,"column":17,"name":"link_122","row":67,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":10,"column":6,"name":"text_66","row":4,"rowspan":6,"widgetStyle":{"backgroundColor":"#FFFF93","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":23,"column":1,"name":"chart_14","row":75,"rowspan":28,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":23,"column":1,"name":"link_7","row":72,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#FFFFFF","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":25,"column":25,"name":"container_12","row":75,"rowspan":28,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":23,"column":26,"name":"chart_15","row":80,"rowspan":22,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":25,"column":25,"name":"link_16","row":72,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#FFFFFF","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":36,"name":"link_18","row":75,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":23,"column":1,"name":"chart_17","row":106,"rowspan":26,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":23,"column":1,"name":"container_20","row":72,"rowspan":31,"widgetStyle":{"borderEdges":[]}},{"colspan":23,"column":1,"name":"link_26","row":103,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#FFFFFF","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}}]},{"label":"Scheduling Efficiency","name":"b44836c9-562b-4d6c-99b3-e4eb606c4228","navigationHidden":false,"widgets":[{"colspan":36,"column":6,"name":"container_11","row":0,"rowspan":10,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":20,"name":"filterpanel_7","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":24,"name":"filterpanel_8","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":7,"name":"image_10","row":1,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":39,"name":"image_11","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":37,"name":"image_12","row":3,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":13,"column":17,"name":"text_5","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":36,"column":6,"name":"container_13","row":10,"rowspan":73,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":16,"name":"filterpanel_10","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":34,"column":7,"name":"table_1","row":37,"rowspan":44,"widgetStyle":{"borderEdges":[]}},{"colspan":4,"column":28,"name":"filterpanel_12","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":5,"column":6,"name":"link_8","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_57","row":12,"rowspan":24,"widgetStyle":{"borderEdges":[]}}]},{"label":"Capacity Lead Time","name":"dc5792bd-73b8-4e64-be61-3e53e04ca850","navigationHidden":false,"widgets":[{"colspan":36,"column":6,"name":"container_15","row":10,"rowspan":252,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":36,"column":6,"name":"container_16","row":0,"rowspan":10,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":5,"column":6,"name":"link_10","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":18,"name":"filterpanel_17","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":22,"name":"filterpanel_18","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":7,"name":"image_16","row":1,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":39,"name":"image_17","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":37,"name":"image_18","row":2,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":14,"name":"filterpanel_19","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":26,"name":"filterpanel_20","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":18,"column":15,"name":"text_8","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_16","row":78,"rowspan":27,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_2","row":175,"rowspan":29,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"chart_1","row":134,"rowspan":40,"widgetStyle":{"borderEdges":[]}},{"colspan":4,"column":30,"name":"listselector_5","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_4","row":106,"rowspan":27,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"chart_7","row":11,"rowspan":31,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_8","row":43,"rowspan":34,"widgetStyle":{"borderEdges":[]}},{"colspan":5,"column":35,"name":"link_5","row":8,"rowspan":2,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_12","row":205,"rowspan":26,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_11","row":232,"rowspan":29,"widgetStyle":{"borderEdges":[]}}]},{"label":"Delivery Efficiency ","name":"808632c6-150b-420f-93ff-5d68c0f916c9","navigationHidden":false,"widgets":[{"colspan":36,"column":6,"name":"container_17","row":0,"rowspan":10,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":5,"column":6,"name":"link_11","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":24,"name":"filterpanel_21","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":28,"name":"filterpanel_22","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":7,"name":"image_19","row":1,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":39,"name":"image_20","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":37,"name":"image_21","row":3,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":12,"name":"filterpanel_23","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":32,"name":"filterpanel_24","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":13,"column":17,"name":"text_9","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":36,"column":6,"name":"container_18","row":10,"rowspan":125,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_20","row":12,"rowspan":28,"widgetStyle":{"borderEdges":[]}},{"colspan":4,"column":16,"name":"filterpanel_25","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":34,"column":7,"name":"table_4","row":41,"rowspan":30,"widgetStyle":{"borderEdges":[]}},{"colspan":4,"column":20,"name":"filterpanel_5","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":32,"name":"listselector_1","row":2,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_13","row":72,"rowspan":30,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_12","row":103,"rowspan":30,"widgetStyle":{"borderEdges":[]}}]},{"label":"Overall Efficiency","name":"cd0a1d31-f71c-4662-8a5f-6fc08132de80","navigationHidden":false,"widgets":[{"colspan":36,"column":6,"name":"container_19","row":0,"rowspan":10,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":16,"name":"filterpanel_26","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":20,"name":"filterpanel_27","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":7,"name":"image_22","row":1,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":39,"name":"image_23","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":37,"name":"image_24","row":3,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":13,"column":17,"name":"text_10","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":5,"column":6,"name":"link_12","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":36,"column":6,"name":"container_21","row":10,"rowspan":95,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_24","row":12,"rowspan":28,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_7","row":41,"rowspan":61,"widgetStyle":{"borderEdges":[]}},{"colspan":4,"column":28,"name":"filterpanel_30","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":24,"name":"filterpanel_14","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}}]},{"label":"Services Efficiency (ASEM)","name":"ae39927b-7574-4f70-84e7-2ffd2f68f319","navigationHidden":false,"widgets":[{"colspan":36,"column":6,"name":"container_22","row":0,"rowspan":10,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":17,"name":"filterpanel_31","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":21,"name":"filterpanel_32","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":7,"name":"image_25","row":1,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":39,"name":"image_26","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":37,"name":"image_27","row":3,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":13,"column":17,"name":"text_11","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":5,"column":6,"name":"link_13","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":36,"column":6,"name":"container_23","row":10,"rowspan":186,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_27","row":91,"rowspan":29,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_9","row":121,"rowspan":37,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"chart_30","row":159,"rowspan":36,"widgetStyle":{"borderEdges":[]}},{"colspan":4,"column":29,"name":"listselector_3","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":25,"name":"filterpanel_11","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_2","row":12,"rowspan":37,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_10","row":50,"rowspan":40,"widgetStyle":{"borderEdges":[]}}]},{"label":"Services Efficiency (SO)","name":"ecf0796d-fd03-4cab-b9a7-8804cff614b0","navigationHidden":false,"widgets":[{"colspan":36,"column":6,"name":"container_24","row":0,"rowspan":10,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":11,"name":"filterpanel_35","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":15,"name":"filterpanel_36","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":7,"name":"image_28","row":1,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":39,"name":"image_29","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":37,"name":"image_30","row":2,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":5,"column":6,"name":"link_14","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":13,"column":17,"name":"text_13","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":36,"column":6,"name":"container_25","row":10,"rowspan":141,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":19,"name":"filterpanel_9","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":23,"name":"filterpanel_13","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_3","row":11,"rowspan":32,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_6","row":44,"rowspan":36,"widgetStyle":{"borderEdges":[]}},{"colspan":4,"column":27,"name":"filterpanel_5","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":31,"name":"listselector_2","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_10","row":81,"rowspan":33,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_5","row":115,"rowspan":34,"widgetStyle":{"borderEdges":[]}},{"colspan":5,"column":35,"name":"link_5","row":8,"rowspan":2,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}}]},{"label":"Project Create to Milestone","name":"93628e20-a052-4ea9-8134-d57f1a06ea22","navigationHidden":false,"widgets":[{"colspan":36,"column":6,"name":"container_26","row":0,"rowspan":10,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":5,"column":6,"name":"link_15","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":20,"name":"filterpanel_38","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":24,"name":"filterpanel_39","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":7,"name":"image_31","row":1,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":39,"name":"image_32","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":37,"name":"image_33","row":3,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":16,"name":"filterpanel_40","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":28,"name":"filterpanel_41","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":13,"column":17,"name":"text_14","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":36,"column":6,"name":"container_27","row":10,"rowspan":139,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":34,"column":7,"name":"chart_38","row":11,"rowspan":30,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_15","row":110,"rowspan":38,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"chart_39","row":42,"rowspan":67,"widgetStyle":{"borderEdges":[]}}]},{"label":"Training to Subscriptions (Specific Products)","name":"8de55d9a-5812-40a1-a595-fd7ee78027ef","navigationHidden":false,"widgets":[{"colspan":36,"column":6,"name":"container_29","row":0,"rowspan":11,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":5,"column":6,"name":"link_17","row":6,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":16,"name":"filterpanel_42","row":7,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":20,"name":"filterpanel_43","row":7,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":4,"column":7,"name":"image_34","row":1,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":39,"name":"image_35","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":37,"name":"image_36","row":3,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":28,"name":"filterpanel_45","row":7,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderEdges":["all"],"borderRadius":8,"borderWidth":1}},{"colspan":13,"column":17,"name":"text_16","row":0,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":5,"column":21,"name":"text_17","row":4,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":36,"column":6,"name":"container_30","row":11,"rowspan":131,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(51, 87, 121)","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":34,"column":7,"name":"table_17","row":57,"rowspan":28,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"table_18","row":86,"rowspan":53,"widgetStyle":{"borderEdges":[]}},{"colspan":34,"column":7,"name":"chart_43","row":26,"rowspan":30,"widgetStyle":{"borderEdges":[]}},{"colspan":9,"column":19,"name":"number_1","row":15,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":9,"column":19,"name":"number_2","row":18,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":9,"column":19,"name":"number_3","row":21,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":9,"column":7,"name":"text_18","row":18,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":34,"name":"image_3","row":2,"rowspan":8,"widgetStyle":{"borderEdges":[]}},{"colspan":9,"column":7,"name":"table_3","row":12,"rowspan":6,"widgetStyle":{"borderEdges":[]}},{"colspan":9,"column":19,"name":"text_1","row":12,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#C6D3E1","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":24,"name":"listselector_3","row":7,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["all"],"borderRadius":8,"borderWidth":1}}]},{"label":"Overall Efficiency - Definition","name":"f41eb801-4595-4918-86d4-d7b82dc1fd21","navigationHidden":false,"widgets":[{"colspan":31,"column":8,"name":"container_4","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":12,"column":17,"name":"text_6","row":2,"rowspan":4,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_6","row":7,"rowspan":11,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_20","row":11,"rowspan":6,"widgetStyle":{"borderEdges":[]}},{"colspan":1,"column":38,"name":"link_19","row":0,"rowspan":4,"widgetStyle":{"borderEdges":[]}},{"colspan":3,"column":9,"name":"text_21","row":8,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_14","row":18,"rowspan":11,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_22","row":22,"rowspan":6,"widgetStyle":{"borderEdges":[]}},{"colspan":5,"column":9,"name":"text_23","row":19,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_32","row":29,"rowspan":38,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_24","row":34,"rowspan":31,"widgetStyle":{"borderEdges":[]}},{"colspan":7,"column":9,"name":"text_25","row":30,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_33","row":67,"rowspan":23,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_27","row":72,"rowspan":16,"widgetStyle":{"borderEdges":[]}},{"colspan":4,"column":9,"name":"text_28","row":68,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}}]},{"label":"Scheduling Efficiency - Definition","name":"e3bcc2ce-3c64-45e5-acb6-87c41fbee1ad","navigationHidden":false,"widgets":[{"colspan":31,"column":8,"name":"container_34","row":7,"rowspan":11,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_30","row":11,"rowspan":6,"widgetStyle":{"borderEdges":[]}},{"colspan":3,"column":9,"name":"text_31","row":8,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_35","row":18,"rowspan":12,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_32","row":22,"rowspan":7,"widgetStyle":{"borderEdges":[]}},{"colspan":5,"column":9,"name":"text_33","row":19,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_36","row":30,"rowspan":27,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_34","row":35,"rowspan":21,"widgetStyle":{"borderEdges":[]}},{"colspan":7,"column":9,"name":"text_35","row":31,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_37","row":57,"rowspan":34,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":9,"name":"text_37","row":58,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_38","row":62,"rowspan":27,"widgetStyle":{"borderEdges":[]}},{"colspan":31,"column":8,"name":"container_38","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":38,"name":"link_20","row":0,"rowspan":4,"widgetStyle":{"borderEdges":[]}},{"colspan":12,"column":17,"name":"text_39","row":2,"rowspan":4,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}}]},{"label":"Capacity Lead Time  - Definition","name":"d460cf0d-f2f4-4f5f-af86-cf63d253a80f","navigationHidden":false,"widgets":[{"colspan":31,"column":8,"name":"container_34","row":7,"rowspan":15,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":9,"name":"text_31","row":8,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_39","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":38,"name":"link_22","row":0,"rowspan":4,"widgetStyle":{"borderEdges":[]}},{"colspan":17,"column":15,"name":"text_40","row":2,"rowspan":4,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_41","row":11,"rowspan":11,"widgetStyle":{"borderEdges":[]}},{"colspan":31,"column":8,"name":"container_40","row":22,"rowspan":9,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_42","row":26,"rowspan":5,"widgetStyle":{"borderEdges":[]}},{"colspan":5,"column":9,"name":"text_43","row":23,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_41","row":31,"rowspan":49,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_44","row":36,"rowspan":41,"widgetStyle":{"borderEdges":[]}},{"colspan":8,"column":9,"name":"text_45","row":32,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_42","row":80,"rowspan":63,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":6,"column":9,"name":"text_46","row":81,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_47","row":85,"rowspan":56,"widgetStyle":{"borderEdges":[]}},{"colspan":31,"column":8,"name":"container_9","row":143,"rowspan":12,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_19","row":148,"rowspan":6,"widgetStyle":{"borderEdges":[]}},{"colspan":8,"column":9,"name":"text_26","row":144,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}}]},{"label":"Delivery Efficiency  - Definition","name":"d449fd06-e869-4358-9ea3-90ce0e2c074e","navigationHidden":false,"widgets":[{"colspan":31,"column":8,"name":"container_43","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":38,"name":"link_25","row":0,"rowspan":4,"widgetStyle":{"borderEdges":[]}},{"colspan":12,"column":17,"name":"text_48","row":2,"rowspan":4,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_44","row":7,"rowspan":11,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":9,"name":"text_49","row":8,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_50","row":11,"rowspan":6,"widgetStyle":{"borderEdges":[]}},{"colspan":31,"column":8,"name":"container_45","row":18,"rowspan":12,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_51","row":22,"rowspan":7,"widgetStyle":{"borderEdges":[]}},{"colspan":5,"column":9,"name":"text_52","row":19,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_46","row":30,"rowspan":33,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_53","row":35,"rowspan":27,"widgetStyle":{"borderEdges":[]}},{"colspan":7,"column":9,"name":"text_54","row":31,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_47","row":63,"rowspan":27,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":9,"name":"text_55","row":64,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_56","row":68,"rowspan":20,"widgetStyle":{"borderEdges":[]}}]},{"label":"Services Efficiency  - Definition","name":"6f0d6866-bb6f-43d0-b409-ab3d6f26de7e","navigationHidden":false,"widgets":[{"colspan":31,"column":8,"name":"container_48","row":0,"rowspan":7,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":38,"name":"link_28","row":0,"rowspan":4,"widgetStyle":{"borderEdges":[]}},{"colspan":12,"column":17,"name":"text_57","row":2,"rowspan":4,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_49","row":7,"rowspan":11,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":9,"name":"text_58","row":8,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_59","row":11,"rowspan":6,"widgetStyle":{"borderEdges":[]}},{"colspan":31,"column":8,"name":"container_50","row":18,"rowspan":12,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_60","row":22,"rowspan":7,"widgetStyle":{"borderEdges":[]}},{"colspan":5,"column":9,"name":"text_61","row":19,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_51","row":30,"rowspan":29,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_62","row":35,"rowspan":22,"widgetStyle":{"borderEdges":[]}},{"colspan":7,"column":9,"name":"text_63","row":31,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":31,"column":8,"name":"container_52","row":59,"rowspan":54,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":6,"column":9,"name":"text_64","row":60,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_65","row":64,"rowspan":48,"widgetStyle":{"borderEdges":[]}},{"colspan":31,"column":8,"name":"container_3","row":113,"rowspan":14,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":29,"column":9,"name":"text_3","row":118,"rowspan":8,"widgetStyle":{"borderEdges":[]}},{"colspan":8,"column":9,"name":"text_15","row":114,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#7D98B3","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}}]}],"rowHeight":"fine","selectors":[],"style":{"alignmentX":"left","alignmentY":"top","backgroundColor":"#7D98B3","cellSpacingX":0,"cellSpacingY":0,"fit":"original","gutterColor":"rgb(9, 26, 62)"},"version":1.0}],"layouts":[],"steps":{"Scheduling_Efficienc_1":{"broadcastFacet":true,"groups":[],"label":"Capacity Lead Time - Year View","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by (('Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"] and 'Practice.Name' == \"Consulting\") or 'Milestone_Type__c' == \"Forms Received\") ;\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' != 20453;\r\n--q1 = filter q1 by 'Practice.Name' == \"Consulting\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy\") as 'Target_DateY'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;\r\n\r\nq = group q by ('Target_DateY');\r\nq = foreach q generate\r\n'Target_DateY'\r\n--, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calendar Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target'\r\n--, median('Test') as 'Test'\r\n--, median('Test2') as 'Test2'\r\n, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["Opp Close Won/Project Restart_to_Milestone Target - Business Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Target_DateY"]}}},"visualizationType":"pie","title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"none","valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}},"Services_Efficiency__1":{"broadcastFacet":true,"groups":[],"label":"Services Efficiency(All) - Year View","numbers":[],"query":"q1 = load \"Subscription_Activations_and_Transactions\";\r\nq1 = filter q1 by 'Status__c' == \"Live\";\r\nq1 = filter q1 by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'Opp.CloseDate_day_epoch' != 0 ;\r\nq1 = filter q1 by 'Live_Date_Project_Create__c' > 0;\r\n--q1 = filter q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c' == \"3092177\";\r\n\r\nq1 = foreach q1 generate \r\nq1.'Date__c_Year' + \"~~~\" + q1.'Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n, q1.'SubscriptionActivation.Account_Name_Formula__c' as 'SubscriptionActivation.Account_Name_Formula__c' \r\n, q1.'SubscriptionActivation.Opportunity_Name_Formula__c' as 'SubscriptionActivation.Opportunity_Name_Formula__c'\r\n, q1.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, q1.'SubscriptionActivation.Project__c' as 'SubscriptionActivation.Project__c'\r\n, q1.'Product_Code__c' as 'Product_Code__c' \r\n, q1.'Live_Date_Closed_Won_Date__c' as 'Live_Date_Closed_Won_Date__c'\r\n, q1.'Date__c_sec_epoch' as 'Date__c_sec_epoch'\r\n, q1.'Opp.CloseDate_sec_epoch' as 'Opp.CloseDate_sec_epoch'\r\n;\r\n\r\nq = group q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c';\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy\") as 'Live_DateY'\r\n,q1.'SubscriptionActivation.Opportunity_Number_Formula__c'as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, unique(q1.'SubscriptionActivation.Project__c') as 'SubscriptionActivation.Project__c'\r\n, median(q1.'Live_Date_Closed_Won_Date__c') as 'Live_Date_Closed_Won_Date__c'\r\n, min(q1.'Date__c_sec_epoch') as 'Date__c_sec_epoch'\r\n, median(q1.'Opp.CloseDate_sec_epoch') as 'Opp.CloseDate_sec_epoch'\r\n, (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'OppCloseWon_to_SubLiveDate - Business Days'\r\n\r\n;\r\nq = group q by ('Live_DateY');\r\nq = foreach q generate\r\n'Live_DateY'\r\n--,sum('SubscriptionActivation.Project__c') as '# of Unique Projects'\r\n,median('OppCloseWon_to_SubLiveDate - Business Days') as 'OppCloseWon_to_SubLiveDate - Business Days'\r\n--,median('Live_Date_Closed_Won_Date__c') as 'OppCloseWon_to_SubLiveDate - Calendar Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","centerText":"Goal < 90","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["OppCloseWon_to_SubLiveDate - Business Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Live_Date"]}}},"visualizationType":"pie","title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"text","valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}},"Services_Efficiency__2":{"broadcastFacet":true,"groups":[],"label":"New Project Create to Milestone Target","numbers":[],"query":"q = load \"Milestones_with_Activity_Line_Info\";\nq = filter q by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\"];\nq = filter q by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"2 fiscal_year ago\"..\"current day\"];\nq = filter q by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\nq = filter q by 'pse__Project__c.CreatedDate_sec_epoch' != 0;\nq = filter q by 'pse__Target_Date__c_sec_epoch' != 1767139200;\n--q = filter q by 'pse__Project__c' == \"a2T60000000IX5iEAG\" ;\n--q = filter q by 'Practice.Name' ==\t\"Data Services\";\n--q = filter q by 'pse__Target_Date__c_Year' == \"2018\";\n\nq = foreach q generate \n'pse__Target_Date__c_Year'\n--,'Practice.Name'\n,'pse__Project__c.Name'\n,'pse__Project__c'\n,((floor((daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate ('pse__Target_Date__c_sec_epoch')) / 7) * 5)) + ((case \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))) as 'Business_Days'\n, (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate ('pse__Target_Date__c_sec_epoch'))) as 'Calendar_Days' \n, (case when ((floor((daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate (min('pse__Target_Date__c_sec_epoch')))) / 7) * 5) + ((case \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))) > 260 then 1 else 0 end) as 'Duration>260'\n;\n\nq =  group q by ('pse__Target_Date__c_Year'\n--, 'Practice.Name'\n,'pse__Project__c'\n,'pse__Project__c.Name');\nq = foreach q generate\n'pse__Target_Date__c_Year'\n--,'Practice.Name'\n,'pse__Project__c.Name'\n, min('Business_Days') as 'Business_Days'\n, min('Calendar_Days') as 'Calendar_Days'\n, min('Duration>260') as 'Duration>260'\n, unique('pse__Project__c') as 'pse__Project__c'\n;\nq = group q by ('pse__Target_Date__c_Year'\n--,'Practice.Name'\n);\nq = foreach q generate\n'pse__Target_Date__c_Year'\n--,'Practice.Name'\n--,median('Business_Days') as 'Median_Business_Days'\n--,median('Calendar_Days') as 'Median_Calendar_Days'\n--,sum('Duration>260') as '# of Projects w/ Duration > 260 Days'\n--,sum('pse__Project__c') as '# of Unique Projects'\n,sum('Duration>260')/sum('pse__Project__c') as '% of Projects > 260 Days'\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["% of Projects w/Duration > 365"],"showNullValues":false,"customizeLegend":false,"showPercentage":false,"showDimensions":false,"showMeasures":false,"dimensions":["pse__Target_Date__c_Year"]}}},"visualizationType":"pie","title":{"fontSize":20,"subtitleFontSize":14,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"columnMap":{"trellis":[],"dimension":["pse__Target_Date__c_Year"],"plots":["% of Projects > 260 Days"]},"showActionMenu":false,"centerValueType":"none","valueType":"percent","theme":"wave","applyConditionalFormatting":true},"type":"chart"}},"Capacity_Lead_Time___6":{"broadcastFacet":true,"groups":[],"label":"Capacity Lead Time - Monthly","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' != 20453;\r\n--q1 = filter q1 by 'Practice.Name' == \"Consulting\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test1'\r\n;\r\nq  = filter q by {{column(Capacity_Lead_Time___7.selection, [\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq  = filter q by {{column(Capacity_Lead_Time___4.selection, [\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq = group q by ('Target_Date','pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name');\r\nq = foreach q generate\r\n'Target_Date'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calendar Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target - Calendar Days'\r\n, median('Test1') as 'Project Creation_to_Milestone Target - Business Days'\r\n, median('Test') as 'Opp Close Won_to_Milestone Target - Business Days'\r\n--, median('Test2') as 'Test2'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"Scheduling_Efficienc_3":{"broadcastFacet":true,"groups":[],"label":"Scheduling Efficiency - Monthly ","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = foreach q1 generate \r\nq1.'pse__Project__c' as 'pse__Project__c'\r\n, median(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'Project_Create_Date'\r\n, median(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opportunity_CloseWon'\r\n, median(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch') as 'Project_StartDate'\r\n, q1.'pse__Project__c.Name' as 'Project_Name'\r\n, q1.'Name' as 'Milestone_Name'\r\n, q1.'Practice.Name' as 'Practice_Name'\r\n, min(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opp_Date'\r\n;\r\n\r\nq2 = load \"MilestoneHistory\";\r\nq2 = filter q2 by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq2 = filter q2 by 'Field' == \"pse__Target_Date__c\";\r\nq2 = foreach q2 generate\r\nq2.'Project.pse__Project__c' as 'pse__Project__c'\r\n,max(q2.'CreatedDate_sec_epoch') as 'Milestone_CreateDate'\r\n, max(q2.'CreatedDate_sec_epoch') as 'Create_Date'\r\n;\r\n\r\nq = cogroup q1 by ('pse__Project__c'), q2 by ('pse__Project__c');\r\n\r\nq = foreach q generate\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy-MM\") as 'Mil_Create_Date',\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy\") as 'Mil_Create_Date-Y',\r\nfirst(q1.'pse__Project__c') as 'pse__Project__c',\r\nlast(q1.'Project_Name') as 'Project_Name',\r\nlast(q1.'Milestone_Name') as 'Milestone_Name',\r\nmedian(q1.'Opportunity_CloseWon') as 'Opportunity_CloseWon',\r\nmedian(q1.'Project_Create_Date') as 'Project_Create_Date',\r\nmedian(q1.'Project_StartDate') as 'Project_StartDate',\r\nmax(q2.'Milestone_CreateDate') as 'Milestone_Create_Date',\r\n(max(q2.'Milestone_CreateDate') - median(q1.'Project_Create_Date'))/86400 as 'Duration'\r\n,(floor(daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Business_Days'\r\n;\r\n\r\nq = filter q by {{column(Scheduling_Efficienc_4.selection, [\"Mil_Create_Date\"]).asEquality(\"Mil_Create_Date\")}};\r\nq = group q by ('Mil_Create_Date'\r\n,'Project_Name'\r\n,'Milestone_Name'\r\n);\r\nq = foreach q generate \r\n'Mil_Create_Date'\r\n,'Project_Name'\r\n,'Milestone_Name'\r\n,unique('pse__Project__c') as '# of Unique Projects'\r\n,last('Mil_Create_Date-Y') as 'Mil_Create_Date-Y'\r\n--,median('ProjectCreation_to_MilestoneCreation') as 'ProjectCreation_to_MilestoneCreation - Calendar Days'\r\n,median('Business_Days') as 'ProjectCreation_to_MilestoneCreation - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"Capacity_Lead_Time___7":{"broadcastFacet":true,"groups":[],"label":"Capacity Lead Time - Monthly Opp Close","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' != 20453;\r\n--q1 = filter q1 by 'Practice.Name' == \"Consulting\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;\r\nq = filter q by {{column(Restart__Calendar_Da_1.selection, [\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq = filter q by {{column(Capacity_Lead_Time___4.selection,[\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq = filter q by {{column(lens_17.selection, [\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq = group q by ('Target_Date');\r\nq = foreach q generate\r\n'Target_Date'\r\n, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calendar Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target - Calendar Days'\r\n, median('Test') as 'OppCloseWon_to_Milestone Target - Business Days'\r\n--, median('Test2') as 'Test2'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Opp Close Won to Milestone Target ","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (Days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Milestone Target (Year-Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Scheduling_Efficienc_2":{"broadcastFacet":true,"groups":[],"label":"Scheduling Efficiency - Monthly ","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = foreach q1 generate \r\nq1.'Id' as 'Id'\r\n, median(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'Project_Create_Date'\r\n, median(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opportunity_CloseWon'\r\n, median(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch') as 'Project_StartDate'\r\n, q1.'pse__Project__c.Name' as 'Project_Name'\r\n, q1.'Name' as 'Milestone_Name'\r\n, q1.'Practice.Name' as 'Practice_Name'\r\n--, min(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opp_Date'\r\n;\r\n\r\nq2 = load \"MilestoneHistory\";\r\nq2 = filter q2 by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq2 = filter q2 by 'Field' == \"pse__Target_Date__c\";\r\nq2 = foreach q2 generate\r\nq2.'ParentId' as 'Id'\r\n,max(q2.'CreatedDate_sec_epoch') as 'Milestone_CreateDate'\r\n, max(q2.'CreatedDate_sec_epoch') as 'Create_Date'\r\n;\r\n\r\nq = cogroup q1 by ('Id'), q2 by ('Id');\r\n\r\nq = foreach q generate\r\n--q1.'Id' as'Id',\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy-MM\") as 'Mil_Create_Date',\r\nlast(q1.'Project_Name') as 'Project_Name',\r\nlast(q1.'Milestone_Name') as 'Milestone_Name',\r\nmedian(q1.'Opportunity_CloseWon') as 'Opportunity_CloseWon',\r\nmedian(q1.'Project_Create_Date') as 'Project_Create_Date',\r\nmedian(q1.'Project_StartDate') as 'Project_StartDate',\r\nmax(q2.'Milestone_CreateDate') as 'Milestone_Create_Date',\r\n(max(q2.'Milestone_CreateDate') - median(q1.'Project_Create_Date'))/86400 as 'Duration'\r\n;\r\n\r\n\r\nq = foreach q generate\r\n'Mil_Create_Date'\r\n,median('Duration') as 'ProjectCreation_to_MilestoneCreation'\r\n,((floor((daysBetween(toDate('Project_Create_Date'), toDate ('Milestone_Create_Date')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 0 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 1 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 2 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 3 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 4 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 5 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 6 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days1'\r\n\r\n,((floor((daysBetween(toDate('Opportunity_CloseWon'), toDate ('Project_Create_Date')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_Create_Date')) % 7) == 0 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Project_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_Create_Date')) % 7) == 1 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Project_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_Create_Date')) % 7) == 2 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Project_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_Create_Date')) % 7) == 3 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Project_Create_Date'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_Create_Date')) % 7) == 4 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Project_Create_Date'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_Create_Date')) % 7) == 5 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Project_Create_Date'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_Create_Date')) % 7) == 6 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Project_Create_Date'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days2'\r\n\r\n,((floor((daysBetween(toDate('Project_Create_Date'), toDate ('Project_StartDate')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_StartDate')) % 7) == 0 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Project_StartDate'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_StartDate')) % 7) == 1 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Project_StartDate'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_StartDate')) % 7) == 2 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Project_StartDate'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_StartDate')) % 7) == 3 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Project_StartDate'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_StartDate')) % 7) == 4 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Project_StartDate'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_StartDate')) % 7) == 5 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Project_StartDate'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Project_StartDate')) % 7) == 6 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Project_StartDate'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days3'\r\n\r\n,((floor((daysBetween(toDate('Project_StartDate'), toDate ('Milestone_Create_Date')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 0 then (case (daysBetween(toDate('Project_StartDate'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 1 then (case (daysBetween(toDate('Project_StartDate'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 2 then (case (daysBetween(toDate('Project_StartDate'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 3 then (case (daysBetween(toDate('Project_StartDate'), toDate('Milestone_Create_Date'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 4 then (case (daysBetween(toDate('Project_StartDate'), toDate('Milestone_Create_Date'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 5 then (case (daysBetween(toDate('Project_StartDate'), toDate('Milestone_Create_Date'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 6 then (case (daysBetween(toDate('Project_StartDate'), toDate('Milestone_Create_Date'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days4'\r\n\r\n,((floor((daysBetween(toDate('Opportunity_CloseWon'), toDate ('Milestone_Create_Date')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 0 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 1 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 2 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 3 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Milestone_Create_Date'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 4 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Milestone_Create_Date'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 5 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Milestone_Create_Date'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Milestone_Create_Date')) % 7) == 6 then (case (daysBetween(toDate('Opportunity_CloseWon'), toDate('Milestone_Create_Date'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days5'\r\n;\r\n\r\nq = filter q by {{column(Scheduling_Efficienc_4.selection, [\"Mil_Create_Date\"]).asEquality(\"Mil_Create_Date\")}};\r\nq = group q by ('Mil_Create_Date'\r\n);\r\nq = foreach q generate \r\n'Mil_Create_Date'\r\n--,median('ProjectCreation_to_MilestoneCreation') as 'ProjectCreation_to_MilestoneCreation - Calendar Days'\r\n,median('Business_Days2') as 'OppCloseWon_to_ProjectCreation - Business Days'\r\n,median('Business_Days3') as 'ProjectCreate_to_ProjectStartDate - Business Days'\r\n,median('Business_Days4') as 'ProjectStartDate_to_MilestoneCreation - Business Days'\r\n,median('Business_Days1') as 'ProjectCreation_to_MilestoneCreation - Business Days'\r\n,median('Business_Days5') as 'OppCloseWon_to_MilestoneCreation - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Milestone Creation","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"binValues":false,"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration Days","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Milestone Creation Date","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Scheduling_Efficienc_5":{"broadcastFacet":true,"groups":[],"label":"Scheduling Efficiency - Yearly","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\",\"Forms Received\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = foreach q1 generate \r\nq1.'pse__Project__c' as 'pse__Project__c'\r\n,'Milestone_Type__c' as 'Milestone_Type__c'\r\n, median(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'Project_Create_Date'\r\n, median(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opportunity_CloseWon'\r\n, median(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch') as 'Project_StartDate'\r\n, q1.'pse__Project__c.Name' as 'Project_Name'\r\n, q1.'Name' as 'Milestone_Name'\r\n, q1.'Practice.Name' as 'Practice_Name'\r\n, min(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opp_Date'\r\n;\r\n\r\nq2 = load \"MilestoneHistory\";\r\nq2 = filter q2 by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq2 = filter q2 by 'Field' == \"pse__Target_Date__c\";\r\nq2 = foreach q2 generate\r\nq2.'Project.pse__Project__c' as 'pse__Project__c'\r\n,max(q2.'CreatedDate_sec_epoch') as 'Milestone_CreateDate'\r\n, max(q2.'CreatedDate_sec_epoch') as 'Create_Date'\r\n;\r\n\r\nq = cogroup q1 by ('pse__Project__c'), q2 by ('pse__Project__c');\r\n\r\nq = foreach q generate\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy-MM\") as 'Mil_Create_Date',\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy\") as 'Mil_Create_Date-Y',\r\nfirst(q1.'Milestone_Type__c') as 'Milestone_Type__c',\r\nfirst(q1.'pse__Project__c') as 'pse__Project__c',\r\nlast(q1.'Project_Name') as 'Project_Name',\r\nlast(q1.'Milestone_Name') as 'Milestone_Name',\r\nmedian(q1.'Opportunity_CloseWon') as 'Opportunity_CloseWon',\r\nmedian(q1.'Project_Create_Date') as 'Project_Create_Date',\r\nmedian(q1.'Project_StartDate') as 'Project_StartDate',\r\nmax(q2.'Milestone_CreateDate') as 'Milestone_Create_Date',\r\n(max(q2.'Milestone_CreateDate') - median(q1.'Project_Create_Date'))/86400 as 'Duration'\r\n,(floor(daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Business_Days'\r\n;\r\n\r\nq = group q by ('Milestone_Type__c');\r\nq = foreach q generate \r\n'Milestone_Type__c'\r\n\r\n,median('Business_Days') as 'ProjectCreation_to_MilestoneCreation - Business Days',count() as 'count'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["ProjectCreation_to_MilestoneCreation - Business Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Mil_Create_Date-Y"]}}},"visualizationType":"vbar","title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"binValues":false,"showActionMenu":false,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"Capacity_Lead_Time___4":{"broadcastFacet":true,"groups":[],"label":"Capacity Lead Time - Monthly","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' != 20453;\r\n--q1 = filter q1 by 'Practice.Name' == \"Consulting\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\r\n,toString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Datex'\r\n,toString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_DateY'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test1'\r\n;\r\nq = filter q by {{column(Restart__Calendar_Da_1.selection, [\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq = filter q by {{column(lens_17.selection, [\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq = filter q by 'Target_Datex' in all;\r\nq = group q by ('Target_Date');\r\nq = foreach q generate\r\n'Target_Date'\r\n--,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n--, 'pse__Project__c.Name'\r\n, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calendar Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target - Calendar Days'\r\n, median('Test1') as 'Project Creation_to_Milestone Target - Business Days'\r\n--, median('Test') as 'Opp Close Won_to_Milestone Target - Business Days'\r\n--, median('Test2') as 'Test2'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Project Creation to Milestone Target ","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (Days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"# of Unique Projects","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Milestone Target (Year/Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Scheduling_Efficienc_4":{"broadcastFacet":true,"groups":[],"label":"Scheduling Efficiency - Monthly v2","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = foreach q1 generate \r\nq1.'pse__Project__c' as 'pse__Project__c'\r\n, median(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'Project_Create_Date'\r\n, median(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opportunity_CloseWon'\r\n, median(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch') as 'Project_StartDate'\r\n, q1.'pse__Project__c.Name' as 'Project_Name'\r\n, q1.'Name' as 'Milestone_Name'\r\n, q1.'Practice.Name' as 'Practice_Name'\r\n, min(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opp_Date'\r\n;\r\n\r\nq2 = load \"MilestoneHistory\";\r\nq2 = filter q2 by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq2 = filter q2 by 'Field' == \"pse__Target_Date__c\";\r\nq2 = foreach q2 generate\r\nq2.'Project.pse__Project__c' as 'pse__Project__c'\r\n,max(q2.'CreatedDate_sec_epoch') as 'Milestone_CreateDate'\r\n, max(q2.'CreatedDate_sec_epoch') as 'Create_Date'\r\n;\r\n\r\nq = cogroup q1 by ('pse__Project__c'), q2 by ('pse__Project__c');\r\n\r\nq = foreach q generate\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy-MM\") as 'Mil_Create_Date',\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy\") as 'Mil_Create_Date-Y',\r\nfirst(q1.'pse__Project__c') as 'pse__Project__c',\r\nlast(q1.'Project_Name') as 'Project_Name',\r\nlast(q1.'Milestone_Name') as 'Milestone_Name',\r\nmedian(q1.'Opportunity_CloseWon') as 'Opportunity_CloseWon',\r\nmedian(q1.'Project_Create_Date') as 'Project_Create_Date',\r\nmedian(q1.'Project_StartDate') as 'Project_StartDate',\r\nmax(q2.'Milestone_CreateDate') as 'Milestone_Create_Date',\r\n(max(q2.'Milestone_CreateDate') - median(q1.'Project_Create_Date'))/86400 as 'Duration'\r\n,(floor(daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Business_Days'\r\n;\r\n\r\nq = filter q by {{column(lens_1.selection,[\"Mil_Create_Date-Y\"]).asEquality(\"Mil_Create_Date-Y\")}};\r\nq = group q by ('Mil_Create_Date'\r\n--'Project_Name',\r\n--'Milestone_Name'\r\n);\r\nq = foreach q generate \r\n'Mil_Create_Date'\r\n,unique('pse__Project__c') as '# of Unique Projects'\r\n,last('Mil_Create_Date-Y') as 'Mil_Create_Date-Y'\r\n--,median('ProjectCreation_to_MilestoneCreation') as 'ProjectCreation_to_MilestoneCreation - Calendar Days'\r\n,median('Business_Days') as 'ProjectCreation_to_MilestoneCreation - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":14,"subtitleFontSize":11,"label":"Median Duration - Project Creation to Milestone Creation","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Capacity_Lead_Time___5":{"broadcastFacet":true,"groups":[],"label":"Capacity Lead Time - Monthly","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' != 20453;\r\n--q1 = filter q1 by 'Practice.Name' == \"Consulting\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch') as 'pse__Project__c.pse__Start_Date__c_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Opp Close Won_to_Milestone Target - Business Days'\r\n\r\n,(floor(daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'OppCloseWon_to_ProjectCreation - Business_Days'\r\n\r\n,(floor(daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'ProjectCreation_to_ProjectStartDate - Business_Days'\r\n\r\n,(floor(daysBetween(toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'ProjectStartDate_to_MilestoneTarget - Business_Days'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;\r\nq = filter q by {{column(Capacity_Lead_Time___7.selection, [\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq = group q by ('Target_Date');\r\nq = foreach q generate\r\n'Target_Date'\r\n--, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calendar Days'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'OppCloseWon/Project Restart_to_Milestone Target - Business Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target - Calendar Days'\r\n, median('OppCloseWon_to_ProjectCreation - Business_Days') as 'OppCloseWon_to_ProjectCreation'\r\n, median('ProjectCreation_to_ProjectStartDate - Business_Days') as 'ProjectCreation_to_ProjectStartDate'\r\n, median('ProjectStartDate_to_MilestoneTarget - Business_Days') as 'ProjectStartDate_to_MilestoneTarget'\r\n, median('Opp Close Won_to_Milestone Target - Business Days') as 'OppCloseWon_to_MilestoneTarget'\r\n\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"vbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"OppCloseWon_to_MilestoneTarget - Business Days","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"OppCloseDatetoSubLiv_1":{"broadcastFacet":true,"groups":["Date__c_Year~~~Date__c_Month"],"label":"OppCloseDatetoSubLiveDate- ASEM Product Only","numbers":["SubscriptionActivation.Project__c","CloseWon_to_SubscriptionLive - Business_Days"],"query":"q = load \"Subscription_Activations_and_Transactions\";\nq = filter q by 'Status__c' == \"Live\";\nq = filter q by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\nq = filter q by 'Opp.CloseDate_day_epoch' != 0 ;\nq = filter q by 'Live_Date_Project_Create__c' > 0;\nq = filter q by \n('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || \n('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||\n('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||\n('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||\n('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-SUB\")\n; -- ASEM Product Code Only\n\nq = foreach q generate \n'Date__c_Year' + \"~~~\" + 'Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n,'Product_Code__c'\n,'SubscriptionActivation.Project__c'\n, median('Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n,median('Date__c_day_epoch') - median('Opp.CloseDate_day_epoch') as 'check'\n\n,(floor(daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch')) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 0 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 1 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 2 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 3 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 4 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 5 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 6 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) as 'Business_Days5'\n, (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch'))) as 'Calendar_Days5' \n;\n\nq = filter q by 'Date__c_Year~~~Date__c_Month' in all;\nq = group q by \n('Date__c_Year~~~Date__c_Month'\n,'SubscriptionActivation.Account_Name_Formula__c'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n, 'Product_Code__c'\n);\nq = foreach q generate\n'Date__c_Year~~~Date__c_Month'\n--,'SubscriptionActivation.Account_Name_Formula__c' as 'Account_Name'\n--, 'SubscriptionActivation.Opportunity_Name_Formula__c' as 'Opportunity_Name'\n--, 'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\n--, 'Product_Code__c'\n--, median('median_Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n--, median('check') as 'check'\n, unique('SubscriptionActivation.Project__c') as 'SubscriptionActivation.Project__c'\n, median('Business_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Business_Days'\n--, median('Calendar_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Calendar_Days'\n;\nq = group q by 'Date__c_Year~~~Date__c_Month';\nq = foreach q generate\n'Date__c_Year~~~Date__c_Month'\n,sum('SubscriptionActivation.Project__c') as 'SubscriptionActivation.Project__c'\n,median('Median_Live_Date_Closed_Won_Date__c - Business_Days') as 'CloseWon_to_SubscriptionLive - Business_Days'\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":["Date__c_Year~~~Date__c_Month"],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"bottom-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":14,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Subscription Live Date - ASEM Product Only","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnMap":{"trellis":[],"dimensionAxis":["Date__c_Year~~~Date__c_Month"],"plots":["SubscriptionActivation.Project__c","CloseWon_to_SubscriptionLive - Business_Days"]},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration Days","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"# of Unique Projects","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Capacity_Lead_Time___8":{"broadcastFacet":true,"groups":[],"label":"Capacity Lead Time - Year View","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by (('Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"] and 'Practice.Name' == \"Consulting\") or 'Milestone_Type__c' == \"Forms Received\") ;\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' != 20453;\r\n--q1 = filter q1 by 'Practice.Name' == \"Consulting\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'Milestone_Type__c' as 'Milestone_Type__c',\r\nq1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy\") as 'Target_DateY',\r\nfirst(q1.'Milestone_Type__c') as 'MilestoneType',\r\nq1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;\r\n\r\nq = group q by 'MilestoneType';\r\nq = foreach q generate\r\n'MilestoneType'\r\n--, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calendar Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target'\r\n--, median('Test') as 'Test'\r\n--, median('Test2') as 'Test2'\r\n, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n,count() as count\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["Opp Close Won/Project Restart_to_Milestone Target - Business Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Target_DateY"]}}},"visualizationType":"vbar","title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"binValues":false,"showActionMenu":false,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"Clone_of_Restart__Ca_1":{"broadcastFacet":true,"groups":[],"label":"Clone of Restart- Calendar Days _Grid","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' != 20453;\r\nq1 = filter q1 by 'Practice.Name' == \"Consulting\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;\r\nq = filter q by 'Target_Date' in all;\r\nq = group q by ('Target_Date', 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name');\r\nq = foreach q generate\r\n'Target_Date'\r\n, 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity Number'\r\n, 'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calander Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target'\r\n--, median('Test') as 'Test'\r\n--, median('Test2') as 'Test2'\r\n, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"verticalPadding":8},"type":"table"}},"Overall_Efficiency___1":{"broadcastFacet":true,"groups":[],"label":"Overall Efficiency - Monthly View","numbers":[],"query":"q = load \"Project_History\";\r\nq = filter q by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq = filter q by 'Opportunity.CloseDate_day_epoch' != 0 ;\r\nq = filter q by 'Project.pse__End_Date__c_day_epoch' != 20453;\r\nq = filter q by 'Project.pse__End_Date__c_day_epoch' > 0 ;\r\nq = filter q by 'Field' == \"pse__Stage__c\";\r\nq = filter q by 'NewValue' in [\"Completed\", \"Project Closing\"];\r\nq = filter q by 'OldValue' == \"In Progress\";\r\n\r\n\r\nq = foreach q generate \r\n'CreatedDate_Year' + \"~~~\" + 'CreatedDate_Month' as 'CreatedDate_Year~~~CreatedDate_Month'\r\n,'Project.Opportunity_Number__c' \r\n,'Project.Name'\r\n, median(q.'CreatedDate_day_epoch') - median(q.'Opportunity.CloseDate_day_epoch') as 'OppCloseWon_to_ProjectCloseDate'\r\n,((floor((daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate ('CreatedDate_sec_epoch')) / 7) * 5)) + ((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days'\r\n, (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate ('CreatedDate_sec_epoch'))) as 'Calendar_Days' \r\n, (case when ((floor((daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate (min('CreatedDate_sec_epoch')))) / 7) * 5) + ((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) > 260 then 1 else 0 end) as 'Duration>260'\r\n;\r\n\r\n\r\n\r\nq = group q by ('CreatedDate_Year~~~CreatedDate_Month'\r\n,'Project.Opportunity_Number__c','Project.Name'\r\n);\r\nq = foreach q generate \r\n'CreatedDate_Year~~~CreatedDate_Month'\r\n,'Project.Opportunity_Number__c'\r\n,'Project.Name'\r\n--, unique('Project.Name') as 'Project.Name1'\r\n--, median('OppCloseWon_to_ProjectCloseDate') as 'OppCloseWon_to_ProjectCloseDate'\r\n, min('Business_Days') as 'OppCloseWon_to_ProjectCloseDate - Business_Days'\r\n--, min('Calendar_Days') as 'OppCloseWon_to_ProjectCloseDate - Calendar_Days'\r\n--, min('Duration>260') as 'Duration>260'\r\n;\r\n\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"TC___Opp_to_Forms_Re_1":{"broadcastFacet":true,"groups":[],"label":"TC - Opp Close to Forms Received - Grid","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\n--q1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' is not null;\r\nq1 = filter q1 by 'Milestone_Type__c' == \"Forms Received\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;\r\nq = filter q by {{column(TC___Opp_close_to_Fo_1.selection, [\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq = group q by ('Target_Date', 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name');\r\nq = foreach q generate\r\n'Target_Date'\r\n, 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity Number'\r\n, 'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calander Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target'\r\n--, median('Test') as 'Test'\r\n--, median('Test2') as 'Test2'\r\n, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"Filter_By_Month_1":{"broadcastFacet":true,"groups":[],"label":"Filter By Month","numbers":[],"query":"q = load \"Subscription_Activations_and_Transactions\";\nq = filter q by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 year ago\"..\"1 month ago\"];\nq = group q by ('Date__c_Year', 'Date__c_Month');\nq = foreach q generate toString(toDate(min('Date__c_sec_epoch')), \"yyyy-MM\") as 'Live_Date';\nq = filter q by 'Live_Date' in all;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Delivery_Efficiency__1":{"broadcastFacet":true,"groups":[],"label":"Delivery Efficiency - Monthly ","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\", \"12/31/2025\"];\r\nMil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\n--Mil = filter Mil by 'pse__Project__c' == \"a2T0d000003aj4KEAQ\";-- Sample Test- 3075622\r\n--Mil = filter Mil by 'Practice.Name' == \"Consulting\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\nresult1 = group Mil by \r\n('pse__Target_Date__c_Year'\r\n, 'pse__Target_Date__c_Month'\r\n, 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,'pse__Status__c'\r\n,'pse__Project__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\nMil.'pse__Target_Date__c_Year' + \"~~~\" + Mil.'pse__Target_Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n,Mil.'pse__Status__c' as 'Status'\r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number_Formula__c'\r\n, Mil.'pse__Project__c' as 'pse__Project__c'\r\n, min(Mil.'pse__Target_Date__c_sec_epoch') as 'MinTargetDate'\r\n;\r\n\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n--Sub = filter Sub by 'SubscriptionActivation.Project__c'  == \"a2T0d000003aj4KEAQ\";-- Sample Test \r\n\r\nresult2 = group Sub by (\r\n'Date__c_Year'\r\n ,'Date__c_Month'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Project__c'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate\r\nSub.'Date__c_Year' + \"~~~\" + Sub.'Date__c_Month'as 'Date__c_Year~~~Date__c_Month'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number_Formula__c'\r\n, Sub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n,Sub.'Status__c' as 'Status'\r\n, min(Sub.'Date__c_sec_epoch') as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by (\r\n'pse__Project__c'\r\n) , result2 by (\r\n'pse__Project__c'\r\n);\r\n\r\n\r\nFinal = foreach Final generate \r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,last(result1.'Opportunity_Number_Formula__c') as 'Opportunity_Number'\r\n,toString(toDate(min(result2.'Date')),\"yyyy-MM\") as 'Live_Date'\r\n,toString(toDate(min(result2.'Date')),\"yyyy\") as 'Live_Date-Y'\r\n , min(result2.'MinSubDate') as 'Median_Sub'\r\n , min(result1.'MinTargetDate') as 'Median_Target'\r\n ,(min(result2.'MinSubDate') - min(result1.'MinTargetDate'))/86400  as 'Duration'\r\n ;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'Live_Date-Y'\r\n,median('Duration') as 'Duration'\r\n,((floor((daysBetween(toDate('Median_Target'), toDate ('Median_Sub')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 0 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 1 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 2 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 3 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 4 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 5 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 6 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days1'\r\n;\r\n\r\nFinal = filter Final by {{column(Capacity_Lead_Time___1.selection, [\"Live_Date-Y\"]).asEquality(\"Live_Date-Y\")}};\r\nFinal = filter Final by {{column(Filter_by_Date_XX_1.selection, [\"Live_Date\"]).asEquality(\"Live_Date\")}};\r\nFinal = group Final by ('Live_Date');\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,last('Live_Date-Y') as 'Live_Date-Y'\r\n--,median('Duration') as 'Milestone_to_Subscription'\r\n,median('Business_Days1') as 'Milestone_to_Subscription - Business Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showPoints":true,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"line","dashLine":{"measures":"","showDashLine":false},"title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Milestone to Subscription","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"fillArea":true,"showActionMenu":true,"showZero":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration Days","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Subscription Live Date (Year/Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""}},"type":"chart"}},"Delivery_Efficiency__3":{"broadcastFacet":true,"groups":[],"label":"Delivery Efficiency  - Year View","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\",\"Forms Received\"];\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\", \"12/31/2025\"];\r\nMil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\n--Mil = filter Mil by 'pse__Project__c' == \"a2T0d000003aj4KEAQ\";-- Sample Test- 3075622\r\n--Mil = filter Mil by 'Practice.Name' == \"Consulting\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\nresult1 = group Mil by \r\n('pse__Target_Date__c_Year'\r\n,'Milestone_Type__c'\r\n, 'pse__Target_Date__c_Month'\r\n, 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,'pse__Status__c'\r\n,'pse__Project__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\nMil.'pse__Target_Date__c_Year' + \"~~~\" + Mil.'pse__Target_Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n,Mil.'pse__Status__c' as 'Status'\r\n,Mil.'Milestone_Type__c' as 'Milestone_Type__c'\r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number_Formula__c'\r\n, Mil.'pse__Project__c' as 'pse__Project__c'\r\n, min(Mil.'pse__Target_Date__c_sec_epoch') as 'MinTargetDate'\r\n;\r\n\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n--Sub = filter Sub by 'SubscriptionActivation.Project__c'  == \"a2T0d000003aj4KEAQ\";-- Sample Test \r\n\r\nresult2 = group Sub by (\r\n'Date__c_Year'\r\n ,'Date__c_Month'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Project__c'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate\r\nSub.'Date__c_Year' + \"~~~\" + Sub.'Date__c_Month'as 'Date__c_Year~~~Date__c_Month'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number_Formula__c'\r\n, Sub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n,Sub.'Status__c' as 'Status'\r\n, min(Sub.'Date__c_sec_epoch') as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by (\r\n'pse__Project__c'\r\n) , result2 by (\r\n'pse__Project__c'\r\n);\r\n\r\n\r\nFinal = foreach Final generate \r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,last(result1.'Milestone_Type__c') as 'Milestone_Type__c'\r\n,last(result1.'Opportunity_Number_Formula__c') as 'Opportunity_Number'\r\n,toString(toDate(min(result2.'Date')),\"yyyy\") as 'Live_Date-Y'\r\n , min(result2.'MinSubDate') as 'Median_Sub'\r\n , min(result1.'MinTargetDate') as 'Median_Target'\r\n ,(min(result2.'MinSubDate') - min(result1.'MinTargetDate'))/86400  as 'Duration'\r\n ;\r\n\r\nFinal = foreach Final generate\r\n'Milestone_Type__c'\r\n,median('Duration') as 'Duration'\r\n,((floor((daysBetween(toDate('Median_Target'), toDate ('Median_Sub')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 0 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 1 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 2 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 3 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 4 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 5 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 6 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days1'\r\n;\r\n\r\nFinal = group Final by ('Milestone_Type__c');\r\n\r\nFinal = foreach Final generate\r\n'Milestone_Type__c'\r\n--,median('Duration') as 'Milestone_to_Subscription'\r\n,median('Business_Days1') as 'Milestone_to_Subscription - Business_Days'\r\n,count() as 'count'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["Milestone_to_Subscription - Business_Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Milestone_Type__c"]}}},"visualizationType":"vbar","title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"binValues":false,"columnMap":{"trellis":[],"dimensionAxis":["Milestone_Type__c"],"plots":["Milestone_to_Subscription - Business_Days","count"]},"showActionMenu":false,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"TC___Delivery_Effici_1":{"broadcastFacet":true,"groups":[],"label":"TC - Delivery Efficiency - Grid","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\n--Mil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\", \"12/31/2025\"];\r\nMil = filter Mil by date('pse__Actual_Date__c_Year', 'pse__Actual_Date__c_Month', 'pse__Actual_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'Milestone_Type__c' == \"Forms Received\";\r\nMil = filter Mil by 'pse__Actual_Date__c_day_epoch' is not null;\r\n--Mil = filter Mil by 'pse__Project__c' == \"a2T0d000003aj4KEAQ\";-- Sample Test- 3075622\r\n--Mil = filter Mil by 'Practice.Name' == \"Consulting\";\r\n--Mil = filter Mil by 'pse__Actual_Date__c_day_epoch' != 20453;\r\n\r\nresult1 = group Mil by \r\n('pse__Actual_Date__c_Year'\r\n, 'pse__Actual_Date__c_Month'\r\n, 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,'pse__Status__c'\r\n,'pse__Project__c.Name'\r\n,'pse__Project__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\nMil.'pse__Actual_Date__c_Year' + \"~~~\" + Mil.'pse__Actual_Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n,Mil.'pse__Status__c' as 'Status'\r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number_Formula__c'\r\n, Mil.'pse__Project__c' as 'pse__Project__c'\r\n,Mil.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, min(Mil.'pse__Actual_Date__c_sec_epoch') as 'MinActualDate'\r\n;\r\n\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n--Sub = filter Sub by 'SubscriptionActivation.Project__c'  == \"a2T0d000003aj4KEAQ\";-- Sample Test \r\n\r\nresult2 = group Sub by (\r\n'Date__c_Year'\r\n ,'Date__c_Month'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Project__c'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate\r\nSub.'Date__c_Year' + \"~~~\" + Sub.'Date__c_Month'as 'Date__c_Year~~~Date__c_Month'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number_Formula__c'\r\n, Sub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n,Sub.'Status__c' as 'Status'\r\n, min(Sub.'Date__c_sec_epoch') as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by (\r\n'pse__Project__c'\r\n) , result2 by (\r\n'pse__Project__c'\r\n);\r\n\r\n\r\nFinal = foreach Final generate \r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,last(result1.'pse__Project__c.Name') as 'pse__Project__c.Name'\r\n,last(result1.'Opportunity_Number_Formula__c') as 'Opportunity_Number'\r\n,toString(toDate(min(result2.'Date')),\"yyyy-MM\") as 'Live_Date'\r\n , min(result2.'MinSubDate') as 'Median_Sub'\r\n , min(result1.'MinActualDate') as 'Median_Actual'\r\n ,(min(result2.'MinSubDate') - min(result1.'MinActualDate'))/86400  as 'Duration'\r\n ;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'pse__Project__c'\r\n,'pse__Project__c.Name'\r\n,'Opportunity_Number'\r\n,median('Duration') as 'Duration'\r\n,((floor((daysBetween(toDate('Median_Actual'), toDate ('Median_Sub')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 0 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 1 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 2 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 3 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 4 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 5 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 6 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days1'\r\n;\r\n\r\nFinal = filter Final by 'Live_Date' in all;\r\nFinal = group Final by ('Live_Date'\r\n,'pse__Project__c.Name'\r\n,'Opportunity_Number'\r\n);\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'pse__Project__c.Name'\r\n,'Opportunity_Number'\r\n--,median('Duration') as 'Milestone_to_Subscription'\r\n,median('Business_Days1') as 'Milestone_to_Subscription - Buseiness Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{"pse__Project__c.Name":{"parameters":{"alignment":"left","styles":{"linkColor":"#006dcc"}},"type":"text"}},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"verticalPadding":8},"type":"table"}},"Delivery_Efficiency__2":{"broadcastFacet":true,"groups":[],"label":"Delivery Efficiency - Monthly ","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\", \"12/31/2025\"];\r\nMil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\n--Mil = filter Mil by 'pse__Project__c' == \"a2T0d000003aj4KEAQ\";-- Sample Test- 3075622\r\n--Mil = filter Mil by 'Practice.Name' == \"Consulting\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\nresult1 = group Mil by \r\n('pse__Target_Date__c_Year'\r\n, 'pse__Target_Date__c_Month'\r\n, 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,'pse__Status__c'\r\n,'pse__Project__c.Name'\r\n,'pse__Project__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\nMil.'pse__Target_Date__c_Year' + \"~~~\" + Mil.'pse__Target_Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n,Mil.'pse__Status__c' as 'Status'\r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number_Formula__c'\r\n, Mil.'pse__Project__c' as 'pse__Project__c'\r\n,Mil.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, min(Mil.'pse__Target_Date__c_sec_epoch') as 'MinTargetDate'\r\n;\r\n\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n--Sub = filter Sub by 'SubscriptionActivation.Project__c'  == \"a2T0d000003aj4KEAQ\";-- Sample Test \r\n\r\nresult2 = group Sub by (\r\n'Date__c_Year'\r\n ,'Date__c_Month'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Project__c'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate\r\nSub.'Date__c_Year' + \"~~~\" + Sub.'Date__c_Month'as 'Date__c_Year~~~Date__c_Month'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number_Formula__c'\r\n, Sub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n,Sub.'Status__c' as 'Status'\r\n, min(Sub.'Date__c_sec_epoch') as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by (\r\n'pse__Project__c'\r\n) , result2 by (\r\n'pse__Project__c'\r\n);\r\n\r\n\r\nFinal = foreach Final generate \r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,last(result1.'pse__Project__c.Name') as 'pse__Project__c.Name'\r\n,last(result1.'Opportunity_Number_Formula__c') as 'Opportunity_Number'\r\n,toString(toDate(min(result2.'Date')),\"yyyy-MM\") as 'Live_Date'\r\n , min(result2.'MinSubDate') as 'Median_Sub'\r\n , min(result1.'MinTargetDate') as 'Median_Target'\r\n ,(min(result2.'MinSubDate') - min(result1.'MinTargetDate'))/86400  as 'Duration'\r\n ;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'pse__Project__c'\r\n,'pse__Project__c.Name'\r\n,'Opportunity_Number'\r\n,median('Duration') as 'Duration'\r\n,((floor((daysBetween(toDate('Median_Target'), toDate ('Median_Sub')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 0 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 1 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 2 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 3 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 4 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 5 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 6 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days1'\r\n;\r\n\r\nFinal = filter Final by {{column(Delivery_Efficiency__1.selection, [\"Live_Date\"]).asEquality(\"Live_Date\")}};\r\nFinal = group Final by ('Live_Date'\r\n,'pse__Project__c.Name'\r\n,'Opportunity_Number'\r\n);\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'pse__Project__c.Name'\r\n,'Opportunity_Number'\r\n--,median('Duration') as 'Milestone_to_Subscription'\r\n,median('Business_Days1') as 'Milestone_to_Subscription - Buseiness Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"OppClosetoSubscripti_1":{"broadcastFacet":true,"groups":[],"label":"OppClosetoSubscription-byLiveDate","numbers":[],"query":"q1 = load \"Subscription_Activations_and_Transactions\";\r\nq1 = filter q1 by 'Status__c' == \"Live\";\r\nq1 = filter q1 by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'Opp.CloseDate_day_epoch' != 0 ;\r\nq1 = filter q1 by 'Live_Date_Project_Create__c' > 0;\r\n--q1 = filter q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c' == \"3092177\";\r\n\r\nq1 = foreach q1 generate \r\nq1.'Date__c_Year' + \"~~~\" + q1.'Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n, q1.'SubscriptionActivation.Account_Name_Formula__c' as 'SubscriptionActivation.Account_Name_Formula__c' \r\n, q1.'SubscriptionActivation.Opportunity_Name_Formula__c' as 'SubscriptionActivation.Opportunity_Name_Formula__c'\r\n, q1.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, q1.'SubscriptionActivation.Project__c' as 'SubscriptionActivation.Project__c'\r\n, q1.'Product_Code__c' as 'Product_Code__c' \r\n, q1.'Live_Date_Closed_Won_Date__c' as 'Live_Date_Closed_Won_Date__c'\r\n, q1.'Date__c_sec_epoch' as 'Date__c_sec_epoch'\r\n, q1.'Opp.CloseDate_sec_epoch' as 'Opp.CloseDate_sec_epoch'\r\n;\r\n\r\nq = group q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c';\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy-MM\") as 'Live_Date'\r\n,toString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy\") as 'Live_DateY'\r\n,q1.'SubscriptionActivation.Opportunity_Number_Formula__c'as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, unique(q1.'SubscriptionActivation.Project__c') as 'SubscriptionActivation.Project__c'\r\n, median(q1.'Live_Date_Closed_Won_Date__c') as 'Live_Date_Closed_Won_Date__c'\r\n, min(q1.'Date__c_sec_epoch') as 'Date__c_sec_epoch'\r\n, median(q1.'Opp.CloseDate_sec_epoch') as 'Opp.CloseDate_sec_epoch'\r\n,min(q1.'Date__c_sec_epoch')/86400 - median(q1.'Opp.CloseDate_sec_epoch')/86400 as 'Test'\r\n, (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'OppCloseWon_to_SubLiveDate - Business Days'\r\n\r\n;\r\nq = filter q by {{column(Services_Efficiency__1.selection, [\"Live_DateY\"]).asEquality(\"Live_DateY\")}};\r\nq = filter q by {{column(Filter_By_Month_1.selection, [\"Live_Date\"]).asEquality(\"Live_Date\")}} ;\r\nq = group q by ('Live_Date');\r\nq = foreach q generate\r\n'Live_Date'\r\n,sum('SubscriptionActivation.Project__c') as '# of Unique Projects'\r\n,median('OppCloseWon_to_SubLiveDate - Business Days') as 'OppCloseWon_to_SubLiveDate - Business Days'\r\n--,median('Test') as 'OppCloseWon_to_SubLiveDate - Calendar Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":14,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Subscription Live Date","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"referenceLines":[{"label":{"data":"Goal < 90","type":"static"},"value":{"data":"90","type":"static"}}],"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"# of Unique Projects","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Subscription Live Date (Year-Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"OppClosetoLiveDate_L_1":{"broadcastFacet":true,"groups":[],"label":"OppClosetoLiveDate-LivedateDetail","numbers":[],"query":"q1 = load \"Subscription_Activations_and_Transactions\";\r\nq1 = filter q1 by 'Status__c' == \"Live\";\r\nq1 = filter q1 by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'Opp.CloseDate_day_epoch' != 0 ;\r\nq1 = filter q1 by 'Live_Date_Project_Create__c' > 0;\r\n\r\n\r\nq1 = foreach q1 generate \r\nq1.'Date__c_Year' + \"~~~\" + q1.'Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n, q1.'SubscriptionActivation.Account_Name_Formula__c' as 'SubscriptionActivation.Account_Name_Formula__c' \r\n, q1.'SubscriptionActivation.Opportunity_Name_Formula__c' as 'SubscriptionActivation.Opportunity_Name_Formula__c'\r\n, q1.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, q1.'SubscriptionActivation.Project__c' as 'SubscriptionActivation.Project__c'\r\n, q1.'Product_Code__c' as 'Product_Code__c' \r\n, q1.'Live_Date_Closed_Won_Date__c' as 'Live_Date_Closed_Won_Date__c'\r\n, q1.'Date__c_sec_epoch' as 'Date__c_sec_epoch'\r\n, q1.'Opp.CloseDate_sec_epoch' as 'Opp.CloseDate_sec_epoch'\r\n;\r\n\r\nq = group q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c';\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy-MM\") as 'Live_Date'\r\n,toString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy-MM\") as 'Live_DateY'\r\n,q1.'SubscriptionActivation.Opportunity_Number_Formula__c'as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, unique(q1.'SubscriptionActivation.Project__c') as 'SubscriptionActivation.Project__c'\r\n, median(q1.'Live_Date_Closed_Won_Date__c') as 'Live_Date_Closed_Won_Date__c'\r\n, min(q1.'Date__c_sec_epoch') as 'Date__c_sec_epoch'\r\n, median(q1.'Opp.CloseDate_sec_epoch') as 'Opp.CloseDate_sec_epoch'\r\n,min(q1.'Date__c_sec_epoch')/86400 - median(q1.'Opp.CloseDate_sec_epoch')/86400 as 'Test'\r\n, (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'OppCloseWon_to_SubLiveDate - Business Days'\r\n\r\n;\r\nq = filter q by {{column(Filter_By_Month_1.selection, [\"Live_Date\"]).asEquality(\"Live_Date\")}};\r\nq = filter q by {{column(OppClosetoSubscripti_1.selection, [\"Live_Date\"]).asEquality(\"Live_Date\")}};\r\nq = group q by ('Live_Date','SubscriptionActivation.Opportunity_Number_Formula__c');\r\nq = foreach q generate\r\n'Live_Date'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n,sum('SubscriptionActivation.Project__c') as '# of Unique Projects'\r\n,median('OppCloseWon_to_SubLiveDate - Business Days') as 'OppCloseWon_to_SubLiveDate - Business Days'\r\n,median('Test') as 'OppCloseWon_to_SubLiveDate - Calendar Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":true,"totals":true,"verticalPadding":8},"type":"table"}},"Clone_of_OppClosetoL_1":{"broadcastFacet":true,"groups":[],"label":"Clone of OppClosetoLiveDate-LivedateDetail","numbers":[],"query":"q1 = load \"Subscription_Activations_and_Transactions\";\r\nq1 = filter q1 by 'Status__c' == \"Live\";\r\nq1 = filter q1 by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'Opp.CloseDate_day_epoch' != 0 ;\r\nq1 = filter q1 by 'Live_Date_Project_Create__c' > 0;\r\n--q1 = filter q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c' == \"3092177\";\r\n\r\nq1 = foreach q1 generate \r\nq1.'Date__c_Year' + \"~~~\" + q1.'Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n, q1.'SubscriptionActivation.Account_Name_Formula__c' as 'SubscriptionActivation.Account_Name_Formula__c' \r\n, q1.'SubscriptionActivation.Opportunity_Name_Formula__c' as 'SubscriptionActivation.Opportunity_Name_Formula__c'\r\n, q1.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, q1.'SubscriptionActivation.Project__c' as 'SubscriptionActivation.Project__c'\r\n, q1.'Product_Code__c' as 'Product_Code__c' \r\n, q1.'Live_Date_Closed_Won_Date__c' as 'Live_Date_Closed_Won_Date__c'\r\n, q1.'Date__c_sec_epoch' as 'Date__c_sec_epoch'\r\n, q1.'Opp.CloseDate_sec_epoch' as 'Opp.CloseDate_sec_epoch'\r\n;\r\n\r\nq = group q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c';\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy-MM\") as 'Live_Date'\r\n,toString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy\") as 'Live_DateY'\r\n,q1.'SubscriptionActivation.Opportunity_Number_Formula__c'as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, unique(q1.'SubscriptionActivation.Project__c') as 'SubscriptionActivation.Project__c'\r\n, median(q1.'Live_Date_Closed_Won_Date__c') as 'Live_Date_Closed_Won_Date__c'\r\n, min(q1.'Date__c_sec_epoch') as 'Date__c_sec_epoch'\r\n, median(q1.'Opp.CloseDate_sec_epoch') as 'Opp.CloseDate_sec_epoch'\r\n, (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'OppCloseWon_to_SubLiveDate - Business Days'\r\n\r\n;\r\nq = filter q by 'Live_Date' in all;\r\nq = filter q by 'Live_DateY' in all;\r\nq = group q by ('Live_Date','SubscriptionActivation.Opportunity_Number_Formula__c');\r\nq = foreach q generate\r\n'Live_Date'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c' as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,sum('SubscriptionActivation.Project__c') as '# of Unique Projects'\r\n,median('OppCloseWon_to_SubLiveDate - Business Days') as 'OppCloseWon_to_SubLiveDate - Business Days'\r\n,median('Live_Date_Closed_Won_Date__c') as 'OppCloseWon_to_SubLiveDate - Calendar Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"verticalPadding":8},"type":"table"}},"static_2":{"broadcastFacet":true,"columns":{"Product Codes":{"type":"string"}},"label":"Static - Product Code ASEM","selectMode":"multi","type":"staticflex","values":["{\"Product Codes\":\"LOD-HRM-EMB+-BQT\"}","{\"Product Codes\":\"LOD-HRM-EMB+-LTD\"}","{\"Product Codes\":\"LOD-HRM-EMB+-SUB\"}","{\"Product Codes\":\"LOD-HRM-EMB+20-LTD\"}","{\"Product Codes\":\"LOD-HRM-EMB+20-SUB\"}","{\"Product Codes\":\"LOD-HRM-ENT-BQT\"}","{\"Product Codes\":\"LOD-HRM-ENT-LTD-SUB\"}","{\"Product Codes\":\"LOD-HRM-ENT-SUB\"}"]},"TC___Opp_close_to_Fo_1":{"broadcastFacet":true,"groups":[],"label":"TC - Opp close to Forms Received Milestone","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\n--q1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' is not null;\r\nq1 = filter q1 by 'Milestone_Type__c' == \"Forms Received\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\r\n,toString(toDate(min(q1.'A')),\"yyyy\") as 'Target_DateY'\r\n,toString(toDate(min(q1.'A')),\"yyyy\") as 'Target_Datex'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;\r\nq = filter q by'Target_DateY'in all;\r\nq = filter q by 'Target_Date' in all;\r\nq = filter q by 'Target_Datex' in all;\r\nq = group q by ('Target_Date');\r\nq = foreach q generate\r\n'Target_Date'\r\n, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calendar Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target'\r\n--, median('Test') as 'Test'\r\n--, median('Test2') as 'Test2'\r\n, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":14,"subtitleFontSize":11,"label":"Project \"Start\" to Forms Received Milestone","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","valueTypeOnLine":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Actual Date (Year-Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Projects___Year_1":{"broadcastFacet":true,"groups":[],"label":"Projects - Year","numbers":[],"query":"q = load \"Project_History\";\r\nq = filter q by date('Project.pse__End_Date__c_Year', 'Project.pse__End_Date__c_Month', 'Project.pse__End_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq = filter q by 'Opportunity.CloseDate_day_epoch' != 0 ;\r\nq = filter q by 'Project.pse__End_Date__c_day_epoch' != 20453;\r\nq = filter q by 'Project.pse__End_Date__c_day_epoch' > 0 ;\r\nq = filter q by 'Field' == \"pse__Stage__c\";\r\nq = filter q by 'NewValue' in [\"Completed\", \"Project Closing\"];\r\nq = filter q by 'OldValue' == \"In Progress\";\r\nq = filter q by 'Project.pse__End_Date__c_Year' == \"2019\";\r\n\r\n\r\nq = foreach q generate \r\n'CreatedDate_Year' as 'CreatedDate_Year'\r\n,'Project.pse__End_Date__c_Year'\r\n,'Project.Opportunity_Number__c' \r\n,'Project.Name'\r\n, 'Region.Name'\r\n, 'Group.Name'\r\n\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"lens_18":{"broadcastFacet":true,"groups":[],"numbers":[],"query":"q = load \"Milestones_with_Activity_Line_Info\";\nq = group q by all;\nq = foreach q generate count() as 'count';\nq = limit q 2000;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnMap":{"trellis":[],"dimensionAxis":[],"plots":["count"]},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"lens_9":{"broadcastFacet":true,"groups":[],"label":"lens_9","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\n--Mil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\"];\r\nMil = filter Mil by 'Practice.Name' matches \"Training\";\r\nMil = filter Mil by 'Name' matches \"Training\";\r\nMil = filter Mil by 'pse__Status__c' != \"Canceled\";\r\nMil = filter Mil by 'pse__Project__c.Name' matches \".fdc\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\n\r\nresult1 = group Mil by \r\n( 'pse__Target_Date__c_Year'\r\n,'pse__Target_Date__c_Month'\r\n,'pse__Target_Date__c_Day'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, 'pse__Project__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'pse__Status__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\n Mil.'pse__Status__c' as 'pse__Status__c' \r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name'as 'Region'\r\n, Mil.'pse__Project__c'as 'pse__Project__c'\r\n,'pse__Project__c.Name' as 'Project_Name'\r\n, 'pse__Target_Date__c_Year'as 'Year'\r\n, 'pse__Target_Date__c_Month' as 'Month'\r\n, min(Mil.'pse__Target_Date__c_day_epoch')+25569  as 'MinTargetDate'\r\n;\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\n\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\n Sub = filter Sub by ('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || ('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-SUB\");\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n\r\nresult2 = group Sub by ('Date__c_Year','Date__c_Month'\r\n,'Date__c_Day'\r\n,'SubscriptionActivation.Project__c'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Product_Name__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate \r\nSub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n,'Date__c_Year' as 'Year'\r\n,'Date__c_Month' as 'Month'\r\n,Sub.'Status__c' as 'Status'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name' as 'Name'\r\n,'SubscriptionActivation.Product_Name__c' as 'Product_Name'\r\n, min(Sub.'Date__c_day_epoch')+25569  as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by ('pse__Project__c'\r\n) , result2 by ('pse__Project__c'\r\n);\r\n\r\nFinal = foreach Final generate\r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,toString(toDate(min(result2.'Date')),\"yyyy-MM\") as 'Live_Date'\r\n, first(result1.'Project_Name') as 'Project_Name'\r\n, first(result1.'Opportunity_Number') as 'Opportunity_Number'\r\n, min(result1.'MinTargetDate') as 'MilMedian_TargetDate'\r\n, min(result2.'MinSubDate') as 'SubMedian_SubDate'\r\n, min(result1.'MinTargetDate') - min(result2.'MinSubDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'Project_Name'\r\n,'SubMedian_SubDate'\r\n,'MilMedian_TargetDate'\r\n,'TargetDate_to_SubscriptionDate'\r\n,(case 'MilMedian_TargetDate' when 46022 then 1 else 0 end) as 'No Training Cmpl'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'Project_Name'\r\n,'TargetDate_to_SubscriptionDate'\r\n, 'No Training Cmpl'\r\n, (case 'MilMedian_TargetDate' when 46022 then (round(date_to_epoch(now())/86400 +25569) - 'SubMedian_SubDate') else 'TargetDate_to_SubscriptionDate' end) as 'Aging'\r\n;\r\n\r\nFinal = filter Final  by 'TargetDate_to_SubscriptionDate' != 0;\r\nFinal = filter Final  by 'No Training Cmpl' == 1;\r\nFinal = filter Final by {{column(lens_11.selection, [\"Live_Date\"]).asEquality(\"Live_Date\")}};\r\nFinal = foreach Final generate\r\n'Live_Date' \r\n,'Project_Name'\r\n,'No Training Cmpl'\r\n--, (case  when 'Aging' < 30 then 'Aging' else 0 end) as '< 30 days'\r\n--, (case when 'Aging' >= 30 and 'Aging' <60 then 'Aging' else 0 end) as '>= 30 < 60 days'\r\n--, (case  when 'Aging'>= 60  and 'Aging' <90 then 'Aging' else 0 end) as '>= 60 < 90 days'\r\n, (case when 'Aging' >= 90 then 'Aging' else 0 end) as '>= 90 days'\r\n;\r\n\r\n\r\nFinal = order Final by ('Live_Date' asc )\r\n\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"lens_16":{"broadcastFacet":true,"groups":["Date__c_Year~~~Date__c_Month","Product_Code__c","Account_Name","Opportunity_Name","Opportunity_Number"],"label":"OppCloseWontoSubLiveDate - ASEM Product Only - Grid","numbers":["OppCloseWon_to_SubLiveDate - Business_Days"],"query":"q = load \"Subscription_Activations_and_Transactions\";\nq = filter q by 'Status__c' == \"Live\";\nq = filter q by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\nq = filter q by 'Opp.CloseDate_day_epoch' != 0 ;\nq = filter q by 'Live_Date_Project_Create__c' > 0;\nq = filter q by \n('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || \n('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||\n('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||\n('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||\n('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-SUB\")\n; -- ASEM Product Code Only\n\nq = foreach q generate \n'Date__c_Year' + \"~~~\" + 'Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n,'Product_Code__c'\n, median('Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n,median('Date__c_day_epoch') - median('Opp.CloseDate_day_epoch') as 'check'\n\n,(floor(daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch')) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 0 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 1 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 2 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 3 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 4 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 5 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 6 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) as 'Business_Days5'\n, (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch'))) as 'Calendar_Days5' \n;\n\nq = filter q by 'Date__c_Year~~~Date__c_Month' in all;\nq = group q by \n('Date__c_Year~~~Date__c_Month'\n,'SubscriptionActivation.Account_Name_Formula__c'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n, 'Product_Code__c');\nq = foreach q generate\n'Date__c_Year~~~Date__c_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' as 'Account_Name'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' as 'Opportunity_Name'\n, 'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\n, 'Product_Code__c'\n--, median('median_Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n--, median('check') as 'check'\n, median('Business_Days5') as 'OppCloseWon_to_SubLiveDate - Business_Days'\n--, median('Calendar_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Calendar_Days'\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":["Date__c_Year~~~Date__c_Month","Account_Name","Opportunity_Name","Opportunity_Number","Product_Code__c"],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"totals":true,"verticalPadding":8},"type":"table"}},"Clone_of_lens_9_1":{"broadcastFacet":true,"groups":[],"label":"Clone of lens_9","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\n--Mil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\"];\r\nMil = filter Mil by 'Practice.Name' matches \"Training\";\r\nMil = filter Mil by 'Name' matches \"Training\";\r\nMil = filter Mil by 'pse__Status__c' != \"Canceled\";\r\nMil = filter Mil by 'pse__Project__c.Name' matches \".fdc\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\n\r\nresult1 = group Mil by \r\n( 'pse__Target_Date__c_Year'\r\n,'pse__Target_Date__c_Month'\r\n,'pse__Target_Date__c_Day'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, 'pse__Project__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'pse__Status__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\n Mil.'pse__Status__c' as 'pse__Status__c' \r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name'as 'Region'\r\n, Mil.'pse__Project__c'as 'pse__Project__c'\r\n,'pse__Project__c.Name' as 'Project_Name'\r\n, 'pse__Target_Date__c_Year'as 'Year'\r\n, 'pse__Target_Date__c_Month' as 'Month'\r\n, min(Mil.'pse__Target_Date__c_day_epoch')+25569  as 'MinTargetDate'\r\n;\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\n\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by ('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || ('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-SUB\");\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n\r\nresult2 = group Sub by ('Date__c_Year','Date__c_Month'\r\n,'Date__c_Day'\r\n,'SubscriptionActivation.Project__c'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Product_Name__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate \r\nSub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n,'Date__c_Year' as 'Year'\r\n,'Date__c_Month' as 'Month'\r\n,Sub.'Status__c' as 'Status'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name' as 'Name'\r\n,'SubscriptionActivation.Product_Name__c' as 'Product_Name'\r\n, min(Sub.'Date__c_day_epoch')+25569  as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by ('pse__Project__c'\r\n) , result2 by ('pse__Project__c'\r\n);\r\n\r\nFinal = foreach Final generate\r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,toString(toDate(min(result2.'Date')),\"yyyy-MM\") as 'Live_Date'\r\n, first(result1.'Project_Name') as 'Project_Name'\r\n, first(result1.'Opportunity_Number') as 'Opportunity_Number'\r\n, min(result1.'MinTargetDate') as 'MilMedian_TargetDate'\r\n, min(result2.'MinSubDate') as 'SubMedian_SubDate'\r\n, min(result1.'MinTargetDate') - min(result2.'MinSubDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'Project_Name'\r\n,'SubMedian_SubDate'\r\n,'MilMedian_TargetDate'\r\n,'TargetDate_to_SubscriptionDate'\r\n,(case 'MilMedian_TargetDate' when 46022 then 1 else 0 end) as 'No Training Cmpl'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'Project_Name'\r\n,'TargetDate_to_SubscriptionDate'\r\n, 'No Training Cmpl'\r\n, (case 'MilMedian_TargetDate' when 46022 then (round(date_to_epoch(now())/86400 +25569) - 'SubMedian_SubDate') else 'TargetDate_to_SubscriptionDate' end) as 'Aging'\r\n;\r\n\r\nFinal = filter Final  by 'TargetDate_to_SubscriptionDate' != 0;\r\nFinal = filter Final  by 'No Training Cmpl' == 1;\r\nFinal = filter Final by 'Live_Date' in all;\r\nFinal = foreach Final generate\r\n'Live_Date' \r\n,'Project_Name'\r\n,'No Training Cmpl'\r\n--, (case  when 'Aging' < 30 then 'Aging' else 0 end) as '< 30 days'\r\n--, (case when 'Aging' >= 30 and 'Aging' <60 then 'Aging' else 0 end) as '>= 30 < 60 days'\r\n--, (case  when 'Aging'>= 60  and 'Aging' <90 then 'Aging' else 0 end) as '>= 60 < 90 days'\r\n, (case when 'Aging' >= 90 then 'Aging' else 0 end) as '>= 90 days'\r\n;\r\n\r\n\r\nFinal = order Final by ('Live_Date' asc )\r\n\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"verticalPadding":8},"type":"table"}},"lens_7":{"broadcastFacet":true,"groups":[],"label":"lens_7","numbers":[],"query":"q = load \"Milestones_with_Activity_Line_Info\";\nq = filter q by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\"];\nq = filter q by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"2 fiscal_year ago\"..\"current day\"];\nq = filter q by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\nq = filter q by 'pse__Project__c.CreatedDate_sec_epoch' != 0;\nq = filter q by 'pse__Target_Date__c_sec_epoch' != 1767139200;\n--q = filter q by 'pse__Project__c' == \"a2T60000000IX5iEAG\" ;\n--q = filter q by 'Practice.Name' ==\t\"Data Services\";\n--q = filter q by 'pse__Target_Date__c_Year' == \"2018\";\n\nq = foreach q generate \n'pse__Target_Date__c_Year'\n,'Practice.Name'\n,'pse__Project__c.Name'\n,'pse__Project__c'\n,((floor((daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate ('pse__Target_Date__c_sec_epoch')) / 7) * 5)) + ((case \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))) as 'Business_Days'\n, (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate ('pse__Target_Date__c_sec_epoch'))) as 'Calendar_Days' \n, (case when ((floor((daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate (min('pse__Target_Date__c_sec_epoch')))) / 7) * 5) + ((case \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))) > 260 then 1 else 0 end) as 'Duration>260'\n;\n\nq =  group q by ('pse__Target_Date__c_Year', 'Practice.Name','pse__Project__c','pse__Project__c.Name');\nq = foreach q generate\n'pse__Target_Date__c_Year'\n,'Practice.Name'\n,'pse__Project__c.Name'\n, min('Business_Days') as 'Business_Days'\n, min('Calendar_Days') as 'Calendar_Days'\n, min('Duration>260') as 'Duration>260'\n, unique('pse__Project__c') as 'pse__Project__c'\n;\nq = group q by ('pse__Target_Date__c_Year'\n,'pse__Project__c'\n,'pse__Project__c.Name'\n,'Practice.Name');\nq = foreach q generate\n'pse__Target_Date__c_Year'\n,'pse__Project__c.Name'\n,'Practice.Name'\n,median('Business_Days') as 'Median_Business_Days'\n--,median('Calendar_Days') as 'Median_Calendar_Days'\n,sum('Duration>260') as '# of Projects w/ Duration > 260 Days'\n,sum('pse__Project__c') as '# of Unique Projects'\n,sum('Duration>260')/sum('pse__Project__c') as '% of Projects > 260 Days'\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":true,"totals":true,"verticalPadding":8},"type":"table"}},"lens_17":{"broadcastFacet":true,"groups":[],"label":"Filter by Month/Year","numbers":[],"query":"q = load \"Milestones_with_Activity_Line_Info\";\nq = filter q by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 year ago\"..\"1 month ago\"];\nq = group q by ('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month');\nq = foreach q generate toString(toDate(min('pse__Target_Date__c_sec_epoch')), \"yyyy-MM\") as 'Target_Date';\nq = filter q by 'Target_Date' in all;\n\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"lens_8":{"broadcastFacet":true,"groups":[],"label":"lens_8","numbers":[],"query":"q = load \"Milestones_with_Activity_Line_Info\";\nq = filter q by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\"];\nq = filter q by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"2 fiscal_year ago\"..\"current day\"];\nq = filter q by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\nq = filter q by 'pse__Project__c.CreatedDate_sec_epoch' != 0;\nq = filter q by 'pse__Target_Date__c_sec_epoch' != 1767139200;\n--q = filter q by 'pse__Project__c' == \"a2T60000000IX5iEAG\" ;\n--q = filter q by 'Practice.Name' ==\t\"Data Services\";\n--q = filter q by 'pse__Target_Date__c_Year' == \"2018\";\n\nq = foreach q generate \n'pse__Target_Date__c_Year'\n,'Practice.Name'\n,'pse__Project__c.Name'\n,'pse__Project__c'\n,((floor((daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate ('pse__Target_Date__c_sec_epoch')) / 7) * 5)) + ((case \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))) as 'Business_Days'\n, (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate ('pse__Target_Date__c_sec_epoch'))) as 'Calendar_Days' \n, (case when ((floor((daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate (min('pse__Target_Date__c_sec_epoch')))) / 7) * 5) + ((case \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))) > 260 then 1 else 0 end) as 'Duration>260'\n;\n\nq =  group q by ('pse__Target_Date__c_Year', 'Practice.Name','pse__Project__c','pse__Project__c.Name');\nq = foreach q generate\n'pse__Target_Date__c_Year'\n,'Practice.Name'\n,'pse__Project__c.Name'\n, min('Business_Days') as 'Business_Days'\n, min('Calendar_Days') as 'Calendar_Days'\n, min('Duration>260') as 'Duration>260'\n, unique('pse__Project__c') as 'pse__Project__c'\n;\nq = group q by ('pse__Target_Date__c_Year','Practice.Name');\nq = foreach q generate\n'pse__Target_Date__c_Year'\n,'Practice.Name'\n,median('Business_Days') as 'Median_Business_Days'\n,median('Calendar_Days') as 'Median_Calendar_Days'\n,sum('Duration>260') as '# of Projects w/ Duration > 260 Days'\n,sum('pse__Project__c') as '# of Unique Projects'\n,sum('Duration>260')/sum('pse__Project__c') as '% of Projects > 260 Days'\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnMap":{"trellis":[],"dimensionAxis":["pse__Target_Date__c_Year","Practice.Name"],"plots":["Median_Business_Days","Median_Calendar_Days","# of Projects w/ Duration > 260 Days","# of Unique Projects","% of Projects > 260 Days"]},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"lens_14":{"broadcastFacet":true,"groups":[],"label":"lens_14","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\n--Mil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\"];\r\nMil = filter Mil by 'Practice.Name' matches \"Training\";\r\nMil = filter Mil by 'Name' matches \"Training\";\r\nMil = filter Mil by 'pse__Status__c' != \"Canceled\";\r\nMil = filter Mil by 'pse__Project__c.Name' matches \".fdc\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\n\r\nresult1 = group Mil by \r\n( 'pse__Target_Date__c_Year'\r\n,'pse__Target_Date__c_Month'\r\n,'pse__Target_Date__c_Day'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, 'pse__Project__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'pse__Status__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\n Mil.'pse__Status__c' as 'pse__Status__c' \r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name'as 'Region'\r\n, Mil.'pse__Project__c'as 'pse__Project__c'\r\n,'pse__Project__c.Name' as 'Project_Name'\r\n, 'pse__Target_Date__c_Year'as 'Year'\r\n, 'pse__Target_Date__c_Month' as 'Month'\r\n, min(Mil.'pse__Target_Date__c_day_epoch')+25569  as 'MinTargetDate'\r\n;\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\n\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by ('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || ('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-SUB\");\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n\r\nresult2 = group Sub by ('Date__c_Year','Date__c_Month'\r\n,'Date__c_Day'\r\n,'SubscriptionActivation.Project__c'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Product_Name__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate \r\nSub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n,'Date__c_Year' as 'Year'\r\n,'Date__c_Month' as 'Month'\r\n,Sub.'Status__c' as 'Status'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name' as 'Name'\r\n,'SubscriptionActivation.Product_Name__c' as 'Product_Name'\r\n, min(Sub.'Date__c_day_epoch')+25569  as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by ('pse__Project__c'\r\n) , result2 by ('pse__Project__c'\r\n);\r\n\r\nFinal = foreach Final generate\r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,toString(toDate(min(result2.'Date')),\"yyyy\") as 'Live_Date'\r\n, first(result1.'Project_Name') as 'Project_Name'\r\n, first(result1.'Opportunity_Number') as 'Opportunity_Number'\r\n, min(result1.'MinTargetDate') as 'MilMedian_TargetDate'\r\n, min(result2.'MinSubDate') as 'SubMedian_SubDate'\r\n, min(result1.'MinTargetDate') - min(result2.'MinSubDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,median('TargetDate_to_SubscriptionDate') as 'TargetDate_to_SubscriptionDate'\r\n,(case 'MilMedian_TargetDate' when 46022 then 1 else 0 end) as 'No Training Cmpl'\r\n, count() as 'Record Count1'\r\n;\r\n--Final = filter Final  by 'No Training Cmpl' == 1;\r\nFinal = filter Final  by 'TargetDate_to_SubscriptionDate' != 0;\r\nFinal = filter Final by 'Live_Date' == \"2020\" ;\r\nFinal = group Final by 'Live_Date';\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n--,sum('Record Count1') as 'Record Count'\r\n--, sum('No Training Cmpl') as 'No Training'\r\n, round(sum('No Training Cmpl')/sum('Record Count1'),4) as '% Not Trained'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"lens_5":{"broadcastFacet":true,"groups":[],"label":"Service Efficiency - SO Product Only ","numbers":[],"query":"q = load \"Subscription_Activations_and_Transactions\";\nq = filter q by 'Status__c' == \"Live\";\nq = filter q by date('Opp.CloseDate_Year', 'Opp.CloseDate_Month', 'Opp.CloseDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\nq = filter q by 'Opp.CloseDate_day_epoch' != 0 ;\nq = filter q by 'Live_Date_Project_Create__c' > 0;\n\nq = foreach q generate \n'Opp.CloseDate_Year' + \"~~~\" + 'Opp.CloseDate_Month' as 'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n,'Product_Code__c'\n, 'SubscriptionActivation.Project__c'\n, median('Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n,median('Date__c_day_epoch') - median('Opp.CloseDate_day_epoch') as 'check'\n\n,(floor(daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch')) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 0 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 1 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 2 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 3 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 4 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 5 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 6 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) as 'Business_Days5'\n, (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch'))) as 'Calendar_Days5' \n;\n\nq = filter q by 'Opp.CloseDate_Year~~~Opp.CloseDate_Month' in all;\nq = group q by \n('Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Project__c'\n,'SubscriptionActivation.Account_Name_Formula__c'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n, 'Product_Code__c');\nq = foreach q generate\n'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n--,'SubscriptionActivation.Account_Name_Formula__c' as 'Account_Name'\n--, 'SubscriptionActivation.Opportunity_Name_Formula__c' as 'Opportunity_Name'\n--, 'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\n, 'SubscriptionActivation.Project__c' as '# of Unique Projects'\n--, median('median_Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n--, median('check') as 'check'\n, median('Business_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Business_Days'\n--, median('Calendar_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Calendar_Days'\n;\nq = group q by 'Opp.CloseDate_Year~~~Opp.CloseDate_Month';\nq = foreach q generate\n'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n, unique('# of Unique Projects') as '# of Unique Projects'\n, median('Median_Live_Date_Closed_Won_Date__c - Business_Days') as 'Median_Live_Date_Closed_Won_Date__c - Business_Days'\n;\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"bottom-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Subscription","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"lens_15":{"broadcastFacet":true,"groups":[],"label":"lens_15","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\n--Mil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\"];\r\nMil = filter Mil by 'Practice.Name' matches \"Training\";\r\nMil = filter Mil by 'Name' matches \"Training\";\r\nMil = filter Mil by 'pse__Status__c' != \"Canceled\";\r\nMil = filter Mil by 'pse__Project__c.Name' matches \".fdc\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\n\r\nresult1 = group Mil by \r\n( 'pse__Target_Date__c_Year'\r\n,'pse__Target_Date__c_Month'\r\n,'pse__Target_Date__c_Day'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, 'pse__Project__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'pse__Status__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\n Mil.'pse__Status__c' as 'pse__Status__c' \r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name'as 'Region'\r\n, Mil.'pse__Project__c'as 'pse__Project__c'\r\n,'pse__Project__c.Name' as 'Project_Name'\r\n, 'pse__Target_Date__c_Year'as 'Year'\r\n, 'pse__Target_Date__c_Month' as 'Month'\r\n, min(Mil.'pse__Target_Date__c_day_epoch')+25569  as 'MinTargetDate'\r\n;\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\n\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by ('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || ('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-SUB\");\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n\r\nresult2 = group Sub by ('Date__c_Year','Date__c_Month'\r\n,'Date__c_Day'\r\n,'SubscriptionActivation.Project__c'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Product_Name__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate \r\nSub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n,'Date__c_Year' as 'Year'\r\n,'Date__c_Month' as 'Month'\r\n,Sub.'Status__c' as 'Status'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name' as 'Name'\r\n,'SubscriptionActivation.Product_Name__c' as 'Product_Name'\r\n, min(Sub.'Date__c_day_epoch')+25569  as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by ('pse__Project__c'\r\n) , result2 by ('pse__Project__c'\r\n);\r\n\r\nFinal = foreach Final generate\r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,toString(toDate(min(result2.'Date')),\"yyyy\") as 'Live_Date'\r\n, first(result1.'Project_Name') as 'Project_Name'\r\n, first(result1.'Opportunity_Number') as 'Opportunity_Number'\r\n, min(result1.'MinTargetDate') as 'MilMedian_TargetDate'\r\n, min(result2.'MinSubDate') as 'SubMedian_SubDate'\r\n, min(result1.'MinTargetDate') - min(result2.'MinSubDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,median('TargetDate_to_SubscriptionDate') as 'TargetDate_to_SubscriptionDate'\r\n,(case 'MilMedian_TargetDate' when 46022 then 1 else 0 end) as 'No Training Cmpl'\r\n;\r\nFinal = filter Final  by 'No Training Cmpl' != 1;\r\nFinal = filter Final  by 'TargetDate_to_SubscriptionDate' != 0;\r\nFinal = filter Final by 'Live_Date' == \"2020\" ;\r\nFinal = group Final by 'Live_Date';\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n, median('TargetDate_to_SubscriptionDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\n\r\n\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"lens_6":{"broadcastFacet":true,"groups":[],"label":"lens_6","numbers":[],"query":"q = load \"Milestones_with_Activity_Line_Info\";\nq = filter q by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\"];\nq = filter q by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"2 fiscal_year ago\"..\"current day\"];\nq = filter q by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\nq = filter q by 'pse__Project__c.CreatedDate_sec_epoch' != 0;\nq = filter q by 'pse__Target_Date__c_sec_epoch' != 1767139200;\n--q = filter q by 'pse__Project__c' == \"a2T60000000IX5iEAG\" ;\n--q = filter q by 'Practice.Name' ==\t\"Data Services\";\n--q = filter q by 'pse__Target_Date__c_Year' == \"2018\";\n\nq = foreach q generate \n'pse__Target_Date__c_Year'\n--,'Practice.Name'\n,'pse__Project__c.Name'\n,'pse__Project__c'\n,((floor((daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate ('pse__Target_Date__c_sec_epoch')) / 7) * 5)) + ((case \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))) as 'Business_Days'\n, (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate ('pse__Target_Date__c_sec_epoch'))) as 'Calendar_Days' \n, (case when ((floor((daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate (min('pse__Target_Date__c_sec_epoch')))) / 7) * 5) + ((case \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('pse__Target_Date__c_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('pse__Project__c.CreatedDate_sec_epoch'), toDate('pse__Target_Date__c_sec_epoch'))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))) > 260 then 1 else 0 end) as 'Duration>260'\n;\n\nq =  group q by ('pse__Target_Date__c_Year'\n--, 'Practice.Name'\n,'pse__Project__c'\n,'pse__Project__c.Name');\nq = foreach q generate\n'pse__Target_Date__c_Year'\n--,'Practice.Name'\n,'pse__Project__c.Name'\n, min('Business_Days') as 'Business_Days'\n, min('Calendar_Days') as 'Calendar_Days'\n, min('Duration>260') as 'Duration>260'\n, unique('pse__Project__c') as 'pse__Project__c'\n;\nq = group q by ('pse__Target_Date__c_Year'\n--,'Practice.Name'\n);\nq = foreach q generate\n'pse__Target_Date__c_Year'\n--,'Practice.Name'\n,median('Business_Days') as 'Median_Business_Days'\n--,median('Calendar_Days') as 'Median_Calendar_Days'\n,sum('Duration>260') as '# of Projects w/ Duration > 260 Days'\n,sum('pse__Project__c') as '# of Unique Projects'\n,sum('Duration>260')/sum('pse__Project__c') as '% of Projects > 260 Days'\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"bottom-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"lens_12":{"broadcastFacet":true,"groups":[],"label":"lens_12","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\n--Mil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\"];\r\nMil = filter Mil by 'Practice.Name' matches \"Training\";\r\nMil = filter Mil by 'Name' matches \"Training\";\r\nMil = filter Mil by 'pse__Status__c' != \"Canceled\";\r\nMil = filter Mil by 'pse__Project__c.Name' matches \".fdc\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\n\r\nresult1 = group Mil by \r\n( 'pse__Target_Date__c_Year'\r\n,'pse__Target_Date__c_Month'\r\n,'pse__Target_Date__c_Day'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, 'pse__Project__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'pse__Status__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\n Mil.'pse__Status__c' as 'pse__Status__c' \r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name'as 'Region'\r\n, Mil.'pse__Project__c'as 'pse__Project__c'\r\n,'pse__Project__c.Name' as 'Project_Name'\r\n, 'pse__Target_Date__c_Year'as 'Year'\r\n, 'pse__Target_Date__c_Month' as 'Month'\r\n, min(Mil.'pse__Target_Date__c_day_epoch')+25569  as 'MinTargetDate'\r\n;\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\n\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by ('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || ('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-SUB\");\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n\r\nresult2 = group Sub by ('Date__c_Year','Date__c_Month'\r\n,'Date__c_Day'\r\n,'SubscriptionActivation.Project__c'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Product_Name__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate \r\nSub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n,'Date__c_Year' as 'Year'\r\n,'Date__c_Month' as 'Month'\r\n,Sub.'Status__c' as 'Status'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name' as 'Name'\r\n,'SubscriptionActivation.Product_Name__c' as 'Product_Name'\r\n, min(Sub.'Date__c_day_epoch')+25569  as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by ('pse__Project__c'\r\n) , result2 by ('pse__Project__c'\r\n);\r\n\r\nFinal = foreach Final generate\r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,toString(toDate(min(result2.'Date')),\"yyyy\") as 'Live_Date'\r\n, first(result1.'Project_Name') as 'Project_Name'\r\n, first(result1.'Opportunity_Number') as 'Opportunity_Number'\r\n, min(result1.'MinTargetDate') as 'MilMedian_TargetDate'\r\n, min(result2.'MinSubDate') as 'SubMedian_SubDate'\r\n, min(result1.'MinTargetDate') - min(result2.'MinSubDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,median('TargetDate_to_SubscriptionDate') as 'TargetDate_to_SubscriptionDate'\r\n,(case 'MilMedian_TargetDate' when 46022 then 1 else 0 end) as 'No Training Cmpl'\r\n, count() as 'Record Count1'\r\n;\r\n--Final = filter Final  by 'No Training Cmpl' == 1;\r\nFinal = filter Final  by 'TargetDate_to_SubscriptionDate' != 0;\r\nFinal = filter Final by 'Live_Date' == \"2020\" ;\r\nFinal = group Final by 'Live_Date';\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,sum('Record Count1') as 'Record Count'\r\n--, sum('No Training Cmpl') as 'No Training'\r\n--, round(sum('No Training Cmpl')/sum('Record Count1'),4) as '% Not Trained'\r\n;\r\n\r\n\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"lens_3":{"broadcastFacet":true,"groups":[],"label":"Overall Efficiency - Monthly View","numbers":[],"query":"q = load \"Project_History\";\r\nq = filter q by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq = filter q by 'Opportunity.CloseDate_day_epoch' != 0 ;\r\nq = filter q by 'Project.pse__End_Date__c_day_epoch' != 20453;\r\nq = filter q by 'Project.pse__End_Date__c_day_epoch' > 0 ;\r\nq = filter q by 'Field' == \"pse__Stage__c\";\r\nq = filter q by 'NewValue' in [\"Completed\", \"Project Closing\"];\r\nq = filter q by 'OldValue' == \"In Progress\";\r\n\r\n\r\nq = foreach q generate \r\n'CreatedDate_Year' + \"~~~\" + 'CreatedDate_Month' as 'CreatedDate_Year~~~CreatedDate_Month'\r\n,'Project.Opportunity_Number__c' \r\n,'Project.Name'\r\n, median(q.'CreatedDate_day_epoch') - median(q.'Opportunity.CloseDate_day_epoch') as 'OppCloseWon_to_ProjectCloseDate'\r\n,((floor((daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate ('CreatedDate_sec_epoch')) / 7) * 5)) + ((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days'\r\n, (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate ('CreatedDate_sec_epoch'))) as 'Calendar_Days' \r\n, (case when ((floor((daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate (min('CreatedDate_sec_epoch')))) / 7) * 5) + ((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) > 260 then 1 else 0 end) as 'Duration>260'\r\n;\r\n\r\n\r\n\r\nq = group q by ('CreatedDate_Year~~~CreatedDate_Month'\r\n,'Project.Opportunity_Number__c','Project.Name'\r\n);\r\nq = foreach q generate \r\n'CreatedDate_Year~~~CreatedDate_Month'\r\n--,'Project.Opportunity_Number__c'\r\n--,'Project.Name'\r\n, unique('Project.Name') as 'Project.Name1'\r\n, median('OppCloseWon_to_ProjectCloseDate') as 'OppCloseWon_to_ProjectCloseDate'\r\n, min('Business_Days') as 'Business_Days'\r\n, min('Calendar_Days') as 'Calendar_Days'\r\n, min('Duration>260') as 'Duration>260'\r\n;\r\n\r\nq = group q by ('CreatedDate_Year~~~CreatedDate_Month'\r\n);\r\nq = foreach q generate \r\n'CreatedDate_Year~~~CreatedDate_Month'\r\n, sum('Project.Name1') as '# of Unique Projects'\r\n, median('Business_Days') as 'OppCloseWon_to_ProjectCloseDate - Business_Days'\r\n--, median('Calendar_Days') as 'OppCloseWon_to_ProjectCloseDate - Calendar_Days'\r\n--, sum('Duration>260') as 'Duration>260'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Project Close","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"# of Unique Projects","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Project Close Date (Year/Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"lens_13":{"broadcastFacet":true,"groups":[],"label":"lens_13","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\n--Mil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\"];\r\nMil = filter Mil by 'Practice.Name' matches \"Training\";\r\nMil = filter Mil by 'Name' matches \"Training\";\r\nMil = filter Mil by 'pse__Status__c' != \"Canceled\";\r\nMil = filter Mil by 'pse__Project__c.Name' matches \".fdc\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\n\r\nresult1 = group Mil by \r\n( 'pse__Target_Date__c_Year'\r\n,'pse__Target_Date__c_Month'\r\n,'pse__Target_Date__c_Day'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, 'pse__Project__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'pse__Status__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\n Mil.'pse__Status__c' as 'pse__Status__c' \r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name'as 'Region'\r\n, Mil.'pse__Project__c'as 'pse__Project__c'\r\n,'pse__Project__c.Name' as 'Project_Name'\r\n, 'pse__Target_Date__c_Year'as 'Year'\r\n, 'pse__Target_Date__c_Month' as 'Month'\r\n, min(Mil.'pse__Target_Date__c_day_epoch')+25569  as 'MinTargetDate'\r\n;\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\n\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by ('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || ('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-SUB\");\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n\r\nresult2 = group Sub by ('Date__c_Year','Date__c_Month'\r\n,'Date__c_Day'\r\n,'SubscriptionActivation.Project__c'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Product_Name__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate \r\nSub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n,'Date__c_Year' as 'Year'\r\n,'Date__c_Month' as 'Month'\r\n,Sub.'Status__c' as 'Status'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name' as 'Name'\r\n,'SubscriptionActivation.Product_Name__c' as 'Product_Name'\r\n, min(Sub.'Date__c_day_epoch')+25569  as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by ('pse__Project__c'\r\n) , result2 by ('pse__Project__c'\r\n);\r\n\r\nFinal = foreach Final generate\r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,toString(toDate(min(result2.'Date')),\"yyyy\") as 'Live_Date'\r\n, first(result1.'Project_Name') as 'Project_Name'\r\n, first(result1.'Opportunity_Number') as 'Opportunity_Number'\r\n, min(result1.'MinTargetDate') as 'MilMedian_TargetDate'\r\n, min(result2.'MinSubDate') as 'SubMedian_SubDate'\r\n, min(result1.'MinTargetDate') - min(result2.'MinSubDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,median('TargetDate_to_SubscriptionDate') as 'TargetDate_to_SubscriptionDate'\r\n,(case 'MilMedian_TargetDate' when 46022 then 1 else 0 end) as 'No Training Cmpl'\r\n, count() as 'Record Count1'\r\n;\r\n--Final = filter Final  by 'No Training Cmpl' == 1;\r\nFinal = filter Final  by 'TargetDate_to_SubscriptionDate' != 0;\r\nFinal = filter Final by 'Live_Date' == \"2020\" ;\r\nFinal = group Final by 'Live_Date';\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n--,sum('Record Count1') as 'Record Count'\r\n, sum('No Training Cmpl') as 'No Training'\r\n--, round(sum('No Training Cmpl')/sum('Record Count1'),4) as '% Not Trained'\r\n;\r\n\r\n\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"lens_4":{"broadcastFacet":true,"groups":[],"label":"Service Efficiency - Monthly ASEM Only","numbers":[],"query":"q = load \"Subscription_Activations_and_Transactions\";\nq = filter q by 'Status__c' == \"Live\";\nq = filter q by date('Opp.CloseDate_Year', 'Opp.CloseDate_Month', 'Opp.CloseDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\nq = filter q by 'Opp.CloseDate_day_epoch' != 0 ;\nq = filter q by 'Live_Date_Project_Create__c' > 0;\nq = filter q by \n('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || \n('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||\n('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||\n('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||\n('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-SUB\")\n; -- ASEM Product Code Only\n\nq = foreach q generate \n'Opp.CloseDate_Year' + \"~~~\" + 'Opp.CloseDate_Month' as 'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n,'Product_Code__c'\n, 'SubscriptionActivation.Project__c'\n, median('Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n,median('Date__c_day_epoch') - median('Opp.CloseDate_day_epoch') as 'check'\n\n,(floor(daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch')) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 0 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 1 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 2 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 3 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 4 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 5 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 6 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) as 'Business_Days5'\n, (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch'))) as 'Calendar_Days5' \n;\n\nq = filter q by 'Opp.CloseDate_Year~~~Opp.CloseDate_Month' in all;\nq = group q by \n('Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n, 'Product_Code__c');\nq = foreach q generate\n'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n--,'SubscriptionActivation.Account_Name_Formula__c' as 'Account_Name'\n--, 'SubscriptionActivation.Opportunity_Name_Formula__c' as 'Opportunity_Name'\n--, 'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\n, unique('SubscriptionActivation.Project__c') as '# of Unique Projects'\n--, median('median_Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n--, median('check') as 'check'\n, median('Business_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Business_Days'\n--, median('Calendar_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Calendar_Days'\n;\nq = group q by 'Opp.CloseDate_Year~~~Opp.CloseDate_Month';\nq = foreach q generate\n'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n, sum('# of Unique Projects') as '# of Unique Projects'\n, median('Median_Live_Date_Closed_Won_Date__c - Business_Days') as 'Median_Live_Date_Closed_Won_Date__c - Business_Days'\n;\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"bottom-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Subscription","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"lens_10":{"broadcastFacet":true,"groups":[],"label":"lens_10","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\n--Mil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\"];\r\nMil = filter Mil by 'Practice.Name' matches \"Training\";\r\nMil = filter Mil by 'Name' matches \"Training\";\r\nMil = filter Mil by 'pse__Status__c' != \"Canceled\";\r\nMil = filter Mil by 'pse__Project__c.Name' matches \".fdc\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\n\r\nresult1 = group Mil by \r\n( 'pse__Target_Date__c_Year'\r\n,'pse__Target_Date__c_Month'\r\n,'pse__Target_Date__c_Day'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, 'pse__Project__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'pse__Status__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\n Mil.'pse__Status__c' as 'pse__Status__c' \r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name'as 'Region'\r\n, Mil.'pse__Project__c'as 'pse__Project__c'\r\n,'pse__Project__c.Name' as 'Project_Name'\r\n, 'pse__Target_Date__c_Year'as 'Year'\r\n, 'pse__Target_Date__c_Year' as 'Month'\r\n, min(Mil.'pse__Target_Date__c_day_epoch')+25569  as 'MinTargetDate'\r\n;\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\n\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\n Sub = filter Sub by ('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || ('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-SUB\");\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n\r\nresult2 = group Sub by ('Date__c_Year','Date__c_Month'\r\n,'Date__c_Day'\r\n,'SubscriptionActivation.Project__c'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Product_Name__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate \r\nSub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n,'Date__c_Year' as 'Year'\r\n,'Date__c_Month' as 'Month'\r\n,Sub.'Status__c' as 'Status'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name' as 'Name'\r\n,'SubscriptionActivation.Product_Name__c' as 'Product_Name'\r\n, min(Sub.'Date__c_day_epoch')+25569  as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by ('pse__Project__c'\r\n) , result2 by ('pse__Project__c'\r\n);\r\n\r\nFinal = foreach Final generate\r\n--result1.'pse__Project__c' as 'pse__Project__c'\r\ntoString(toDate(min(result2.'Date')),\"yyyy-MM\") as 'Live_Date'\r\n, first(result1.'Project_Name') as 'Project_Name'\r\n, first(result1.'Opportunity_Number') as 'Opportunity_Number'\r\n, min(result1.'MinTargetDate') as 'MilMedian_TargetDate'\r\n, min(result2.'MinSubDate') as 'SubMedian_SubDate'\r\n, min(result1.'MinTargetDate') - min(result2.'MinSubDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'Project_Name'\r\n,'SubMedian_SubDate'\r\n,'MilMedian_TargetDate'\r\n,'TargetDate_to_SubscriptionDate'\r\n,(case 'MilMedian_TargetDate' when 46022 then 1 else 0 end) as 'No Training Cmpl'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'Project_Name'\r\n,'TargetDate_to_SubscriptionDate'\r\n, 'No Training Cmpl'\r\n, (case 'MilMedian_TargetDate' when 46022 then (round(date_to_epoch(now())/86400 +25569) - 'SubMedian_SubDate') else 'TargetDate_to_SubscriptionDate' end) as 'Aging'\r\n;\r\n\r\nFinal = filter Final  by 'TargetDate_to_SubscriptionDate' != 0;\r\nFinal = filter Final by {{column(lens_11.selection, [\"Live_Date\"]).asEquality(\"Live_Date\")}};\r\n--Final = group Final by ('Live_Date','Project_Name','No Training Cmpl');\r\nFinal = foreach Final generate\r\n'Live_Date' \r\n,'Project_Name'\r\n,'No Training Cmpl'\r\n, (case  when 'Aging' < 30 then 'Aging' else 0 end) as '< 30 days'\r\n, (case when 'Aging' >= 30 and 'Aging' <60 then 'Aging' else 0 end) as '>= 30 < 60 days'\r\n, (case  when 'Aging'>= 60  and 'Aging' <90 then 'Aging' else 0 end) as '>= 60 < 90 days'\r\n, (case when 'Aging' >= 90 then 'Aging' else 0 end) as '>= 90 days'\r\n;\r\n\r\n\r\nFinal = order Final by ('Live_Date' asc,'>= 90 days' desc,'>= 60 < 90 days' desc,'>= 30 < 60 days' desc,'< 30 days' desc )\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"lens_1":{"broadcastFacet":true,"groups":[],"label":"Scheduling Efficiency - Yearly","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\",\"Forms Received\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = foreach q1 generate \r\nq1.'pse__Project__c' as 'pse__Project__c'\r\n, median(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'Project_Create_Date'\r\n, median(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opportunity_CloseWon'\r\n, median(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch') as 'Project_StartDate'\r\n, q1.'pse__Project__c.Name' as 'Project_Name'\r\n, q1.'Name' as 'Milestone_Name'\r\n, q1.'Practice.Name' as 'Practice_Name'\r\n, min(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opp_Date'\r\n;\r\n\r\nq2 = load \"MilestoneHistory\";\r\nq2 = filter q2 by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq2 = filter q2 by 'Field' == \"pse__Target_Date__c\";\r\nq2 = foreach q2 generate\r\nq2.'Project.pse__Project__c' as 'pse__Project__c'\r\n,max(q2.'CreatedDate_sec_epoch') as 'Milestone_CreateDate'\r\n, max(q2.'CreatedDate_sec_epoch') as 'Create_Date'\r\n;\r\n\r\nq = cogroup q1 by ('pse__Project__c'), q2 by ('pse__Project__c');\r\n\r\nq = foreach q generate\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy-MM\") as 'Mil_Create_Date',\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy\") as 'Mil_Create_Date-Y',\r\nfirst(q1.'pse__Project__c') as 'pse__Project__c',\r\nlast(q1.'Project_Name') as 'Project_Name',\r\nlast(q1.'Milestone_Name') as 'Milestone_Name',\r\nmedian(q1.'Opportunity_CloseWon') as 'Opportunity_CloseWon',\r\nmedian(q1.'Project_Create_Date') as 'Project_Create_Date',\r\nmedian(q1.'Project_StartDate') as 'Project_StartDate',\r\nmax(q2.'Milestone_CreateDate') as 'Milestone_Create_Date',\r\n(max(q2.'Milestone_CreateDate') - median(q1.'Project_Create_Date'))/86400 as 'Duration'\r\n,(floor(daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(max(q2.'Milestone_CreateDate'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Project_Create_Date')), toDate(max(q2.'Milestone_CreateDate')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Business_Days'\r\n;\r\n\r\nq = filter q by 'Mil_Create_Date-Y' in all;\r\nq = group q by ('Mil_Create_Date-Y'\r\n--'Project_Name',\r\n--'Milestone_Name'\r\n);\r\nq = foreach q generate \r\n'Mil_Create_Date-Y'\r\n--,unique('pse__Project__c') as '# of Unique Projects'\r\n--,last('Mil_Create_Date-Y') as 'Mil_Create_Date-Y'\r\n--,median('ProjectCreation_to_MilestoneCreation') as 'ProjectCreation_to_MilestoneCreation - Calendar Days'\r\n,median('Business_Days') as 'ProjectCreation_to_MilestoneCreation - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["ProjectCreation_to_MilestoneCreation - Business Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Mil_Create_Date-Y"]}}},"visualizationType":"pie","title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"none","valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}},"lens_11":{"broadcastFacet":true,"groups":[],"label":"lens_11","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\n--Mil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\"];\r\nMil = filter Mil by 'Practice.Name' matches \"Training\";\r\nMil = filter Mil by 'Name' matches \"Training\";\r\nMil = filter Mil by 'pse__Status__c' != \"Canceled\";\r\nMil = filter Mil by 'pse__Project__c.Name' matches \".fdc\";\r\nMil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\n\r\nresult1 = group Mil by \r\n( 'pse__Target_Date__c_Year'\r\n,'pse__Target_Date__c_Month'\r\n,'pse__Target_Date__c_Day'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, 'pse__Project__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'pse__Status__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\n Mil.'pse__Status__c' as 'pse__Status__c' \r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name'as 'Region'\r\n, Mil.'pse__Project__c'as 'pse__Project__c'\r\n,'pse__Project__c.Name' as 'Project_Name'\r\n, 'pse__Target_Date__c_Year'as 'Year'\r\n, 'pse__Target_Date__c_Year' as 'Month'\r\n, min(Mil.'pse__Target_Date__c_day_epoch')+25569  as 'MinTargetDate'\r\n;\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\n\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\n Sub = filter Sub by ('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || ('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-SUB\");\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n\r\nresult2 = group Sub by ('Date__c_Year','Date__c_Month'\r\n,'Date__c_Day'\r\n,'SubscriptionActivation.Project__c'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Product_Name__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate \r\nSub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n,'Date__c_Year' as 'Year'\r\n,'Date__c_Month' as 'Month'\r\n,Sub.'Status__c' as 'Status'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name' as 'Name'\r\n,'SubscriptionActivation.Product_Name__c' as 'Product_Name'\r\n, min(Sub.'Date__c_day_epoch')+25569  as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by ('pse__Project__c'\r\n) , result2 by ('pse__Project__c'\r\n);\r\n\r\nFinal = foreach Final generate\r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,toString(toDate(min(result2.'Date')),\"yyyy-MM\") as 'Live_Date'\r\n,toString(toDate(min(result2.'Date')),\"yyyy\") as 'Live_Date-Y'\r\n, first(result1.'Project_Name') as 'Project_Name'\r\n, first(result1.'Opportunity_Number') as 'Opportunity_Number'\r\n, min(result1.'MinTargetDate') as 'MilMedian_TargetDate'\r\n, min(result2.'MinSubDate') as 'SubMedian_SubDate'\r\n, min(result1.'MinTargetDate') - min(result2.'MinSubDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'Live_Date-Y'\r\n,median('TargetDate_to_SubscriptionDate') as 'TargetDate_to_SubscriptionDate'\r\n,(case 'MilMedian_TargetDate' when 46022 then 1 else 0 end) as 'No Training Cmpl'\r\n;\r\nFinal = filter Final by {{column(New_Project_Create_t_1.selection, [\"Live_Date-Y\"]).asEquality(\"Live_Date-Y\")}};\r\nFinal = filter Final  by 'No Training Cmpl' != 1;\r\nFinal = filter Final  by 'TargetDate_to_SubscriptionDate' != 0;\r\nFinal = group Final by 'Live_Date';\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,last('Live_Date-Y') as 'Live_Date-Y'\r\n, median('TargetDate_to_SubscriptionDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\n\r\n\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":false,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"vbar","title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration (excl Milestone Training that have not occurred) - Monthly _Calendare Days","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"referenceLines":[{"label":{"data":"Upper Limit (30)","type":"static"},"value":{"data":"30","type":"static"}}],"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"lens_2":{"broadcastFacet":true,"groups":[],"label":"Scheduling Efficiency - Monthly ","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = foreach q1 generate \r\nq1.'Id' as 'Id'\r\n, median(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'Project_Create_Date'\r\n, median(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opportunity_CloseWon'\r\n, median(q1.'pse__Project__c.pse__Start_Date__c_sec_epoch') as 'Project_StartDate'\r\n, q1.'pse__Project__c.Name' as 'Project_Name'\r\n, q1.'Name' as 'Milestone_Name'\r\n, q1.'Practice.Name' as 'Practice_Name'\r\n, min(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opp_Date'\r\n;\r\n\r\nq2 = load \"MilestoneHistory\";\r\nq2 = filter q2 by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq2 = filter q2 by 'Field' == \"pse__Target_Date__c\";\r\nq2 = foreach q2 generate\r\nq2.'ParentId' as 'Id'\r\n,max(q2.'CreatedDate_sec_epoch') as 'Milestone_CreateDate'\r\n, max(q2.'CreatedDate_sec_epoch') as 'Create_Date'\r\n;\r\n\r\nq = cogroup q1 by ('Id'), q2 by ('Id');\r\n\r\nq = foreach q generate\r\n--q1.'Id' as'Id',\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy-MM\") as 'Mil_Create_Date',\r\ntoString(toDate(max(q2.'Create_Date')),\"yyyy\") as 'Mil_Create_Date-Y',\r\nlast(q1.'Project_Name') as 'Project_Name',\r\nlast(q1.'Milestone_Name') as 'Milestone_Name',\r\nmedian(q1.'Opportunity_CloseWon') as 'Opportunity_CloseWon',\r\nmedian(q1.'Project_Create_Date') as 'Project_Create_Date',\r\nmedian(q1.'Project_StartDate') as 'Project_StartDate',\r\nmax(q2.'Milestone_CreateDate') as 'Milestone_Create_Date',\r\n(max(q2.'Milestone_CreateDate') - median(q1.'Project_Create_Date'))/86400 as 'Duration'\r\n;\r\n\r\n\r\nq = foreach q generate\r\n'Mil_Create_Date'\r\n,'Mil_Create_Date-Y'\r\n,median('Duration') as 'ProjectCreation_to_MilestoneCreation'\r\n,((floor((daysBetween(toDate('Project_Create_Date'), toDate ('Milestone_Create_Date')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('Milestone_Create_Date'))) % 7) == 0 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('Milestone_Create_Date'))) % 7) == 1 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('Milestone_Create_Date'))) % 7) == 2 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('Milestone_Create_Date'))) % 7) == 3 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('Milestone_Create_Date'))) % 7) == 4 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('Milestone_Create_Date'))) % 7) == 5 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('Milestone_Create_Date'))) % 7) == 6 then (case (daysBetween(toDate('Project_Create_Date'), toDate('Milestone_Create_Date'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days'\r\n;\r\nq = filter q by {{column(lens_1.selection, [\"Mil_Create_Date-Y\"]).asEquality(\"Mil_Create_Date-Y\")}};\r\nq = group q by ('Mil_Create_Date'\r\n--'Project_Name',\r\n--'Milestone_Name'\r\n);\r\nq = foreach q generate \r\n'Mil_Create_Date'\r\n,last('Mil_Create_Date-Y') as 'Mil_Create_Date-Y'\r\n--,median('ProjectCreation_to_MilestoneCreation') as 'ProjectCreation_to_MilestoneCreation - Calendar Days'\r\n,median('Business_Days') as 'ProjectCreation_to_MilestoneCreation - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showPoints":true,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"line","dashLine":{"measures":"","showDashLine":false},"title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Project Creation to Milestone Creation","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"fillArea":true,"showActionMenu":true,"showZero":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration Days","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Milestone Creation (Year/Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""}},"type":"chart"}},"Restart__Calendar_Da_1":{"broadcastFacet":true,"groups":[],"label":"Restart- Calendar Day","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' != 20453;\r\nq1 = filter q1 by 'Practice.Name' == \"Consulting\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\r\n,toString(toDate(min(q1.'A')),\"yyyy\") as 'Target_DateY'\r\n,toString(toDate(min(q1.'A')),\"yyyy\") as 'Target_Datex'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;\r\nq = filter q by {{column(Scheduling_Efficienc_1.selection, [\"Target_DateY\"]).asEquality(\"Target_DateY\")}};\r\nq = filter q by {{column(lens_17.selection, [\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq = filter q by 'Target_Datex' in all;\r\nq = group q by ('Target_Date');\r\nq = foreach q generate\r\n'Target_Date'\r\n, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calendar Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target'\r\n--, median('Test') as 'Test'\r\n--, median('Test2') as 'Test2'\r\n, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":14,"subtitleFontSize":11,"label":"Project \"Start\" to First Consulting Milestone","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"# of Unique Projects","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Restart__Calendar_Da_2":{"broadcastFacet":true,"groups":[],"label":"Restart- Calendar Days _Grid","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' != 20453;\r\nq1 = filter q1 by 'Practice.Name' == \"Consulting\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;\r\nq = filter q by {{column(Restart__Calendar_Da_1.selection, [\"Target_Date\"]).asEquality(\"Target_Date\")}};\r\nq = group q by ('Target_Date', 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name');\r\nq = foreach q generate\r\n'Target_Date'\r\n, 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity Number'\r\n, 'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calander Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target'\r\n--, median('Test') as 'Test'\r\n--, median('Test2') as 'Test2'\r\n, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"TC__Delivery_Efficie_1":{"broadcastFacet":true,"groups":[],"label":"TC- Delivery Efficiency - Graph ","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\n--Mil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\", \"12/31/2025\"];\r\nMil = filter Mil by date('pse__Actual_Date__c_Year', 'pse__Actual_Date__c_Month', 'pse__Actual_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'Milestone_Type__c' == \"Forms Received\";\r\nMil = filter Mil by 'pse__Actual_Date__c_day_epoch' is not null;\r\n--Mil = filter Mil by 'pse__Project__c' == \"a2T0d000003aj4KEAQ\";-- Sample Test- 3075622\r\n--Mil = filter Mil by 'Practice.Name' == \"Consulting\";\r\n--Mil = filter Mil by 'pse__Actual_Date__c_day_epoch' != 20453;\r\n\r\nresult1 = group Mil by \r\n('pse__Actual_Date__c_Year'\r\n, 'pse__Actual_Date__c_Month'\r\n, 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,'pse__Status__c'\r\n,'pse__Project__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\nMil.'pse__Actual_Date__c_Year' + \"~~~\" + Mil.'pse__Actual_Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n,Mil.'pse__Status__c' as 'Status'\r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number_Formula__c'\r\n, Mil.'pse__Project__c' as 'pse__Project__c'\r\n, min(Mil.'pse__Actual_Date__c_sec_epoch') as 'MinActualDate'\r\n;\r\n\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n--Sub = filter Sub by 'SubscriptionActivation.Project__c'  == \"a2T0d000003aj4KEAQ\";-- Sample Test \r\n\r\nresult2 = group Sub by (\r\n'Date__c_Year'\r\n ,'Date__c_Month'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Project__c'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate\r\nSub.'Date__c_Year' + \"~~~\" + Sub.'Date__c_Month'as 'Date__c_Year~~~Date__c_Month'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number_Formula__c'\r\n, Sub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n,Sub.'Status__c' as 'Status'\r\n, min(Sub.'Date__c_sec_epoch') as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by (\r\n'pse__Project__c'\r\n) , result2 by (\r\n'pse__Project__c'\r\n);\r\n\r\n\r\nFinal = foreach Final generate \r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,last(result1.'Opportunity_Number_Formula__c') as 'Opportunity_Number'\r\n,toString(toDate(min(result2.'Date')),\"yyyy-MM\") as 'Live_Date'\r\n,toString(toDate(min(result2.'Date')),\"yyyy\") as 'Live_Date-Y'\r\n , min(result2.'MinSubDate') as 'Median_Sub'\r\n , min(result1.'MinActualDate') as 'Median_Actual'\r\n ,(min(result2.'MinSubDate') - min(result1.'MinActualDate'))/86400  as 'Duration'\r\n ;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,'Live_Date-Y'\r\n,median('Duration') as 'Duration'\r\n,((floor((daysBetween(toDate('Median_Actual'), toDate ('Median_Sub')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 0 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 1 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 2 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 3 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 4 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 5 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 6 then (case (daysBetween(toDate('Median_Actual'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days1'\r\n;\r\n\r\nFinal = filter Final by 'Live_Date-Y' in all;\r\nFinal = filter Final by 'Live_Date' in all;\r\nFinal = group Final by ('Live_Date');\r\n\r\nFinal = foreach Final generate\r\n'Live_Date'\r\n,last('Live_Date-Y') as 'Live_Date-Y'\r\n--,median('Duration') as 'Milestone_to_Subscription'\r\n,median('Business_Days1') as 'Milestone_to_Subscription - Business Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showPoints":false,"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"line","dashLine":{"measures":"","showDashLine":false},"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnMap":{"split":[],"trellis":[],"dimensionAxis":["Live_Date"],"plots":["Milestone_to_Subscription - Business Days"]},"fillArea":true,"showActionMenu":true,"showZero":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""}},"type":"chart"}},"Project_Start_to_Sub_2":{"broadcastFacet":true,"groups":[],"label":"Project Start to Subscription - Grid","numbers":[],"query":"q1 = load \"Subscription_Activations_and_Transactions\";\r\nq1 = filter q1 by 'Status__c' == \"Live\";\r\nq1 = filter q1 by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'Opp.CloseDate_day_epoch' != 0 ;\r\nq1 = filter q1 by 'Live_Date_Project_Create__c' > 0;\r\n--q1 = filter q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c' == \"3092177\";\r\n\r\nq1 = foreach q1 generate \r\nq1.'Date__c_Year' + \"~~~\" + q1.'Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n, q1.'SubscriptionActivation.Account_Name_Formula__c' as 'SubscriptionActivation.Account_Name_Formula__c' \r\n, q1.'SubscriptionActivation.Opportunity_Name_Formula__c' as 'SubscriptionActivation.Opportunity_Name_Formula__c'\r\n, q1.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, q1.'SubscriptionActivation.Project__c' as 'SubscriptionActivation.Project__c'\r\n, q1.'Product_Code__c' as 'Product_Code__c' \r\n, q1.'Live_Date_Closed_Won_Date__c' as 'Live_Date_Closed_Won_Date__c'\r\n, q1.'Date__c_sec_epoch' as 'Date__c_sec_epoch'\r\n, q1.'Opp.CloseDate_sec_epoch' as 'Opp.CloseDate_sec_epoch'\r\n;\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2= filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c'\r\n,q2.'Project.Name' as 'Project.Name'\r\n,q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch';\r\n\r\nq = cogroup q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c' left, q2 by 'Project.Opportunity_Number__c';\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy-MM\") as 'Live_Date'\r\n,q1.'SubscriptionActivation.Opportunity_Number_Formula__c'as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, unique(q1.'SubscriptionActivation.Project__c') as 'SubscriptionActivation.Project__c'\r\n, median(q1.'Live_Date_Closed_Won_Date__c') as 'Live_Date_Closed_Won_Date__c'\r\n, min(q1.'Date__c_sec_epoch') as 'Date__c_sec_epoch'\r\n, median(q1.'Opp.CloseDate_sec_epoch') as 'Opp.CloseDate_sec_epoch'\r\n, max(q2.'CreatedDate_sec_epoch') as 'CreatedDate_sec_epoch'\r\n, case when (case when median(q1.'Opp.CloseDate_sec_epoch') <= max(q2.'CreatedDate_sec_epoch') then (min(q1.'Date__c_sec_epoch')/86400 - max(q2.'CreatedDate_sec_epoch')/86400) else (min(q1.'Date__c_sec_epoch')/86400 - median(q1.'Opp.CloseDate_sec_epoch')/86400) end) <= 0 then (min(q1.'Date__c_sec_epoch')/86400 - median(q1.'Opp.CloseDate_sec_epoch')/86400) else (case when median(q1.'Opp.CloseDate_sec_epoch') <= max(q2.'CreatedDate_sec_epoch') then (min(q1.'Date__c_sec_epoch')/86400 - max(q2.'CreatedDate_sec_epoch')/86400) else (min(q1.'Date__c_sec_epoch')/86400 - median(q1.'Opp.CloseDate_sec_epoch')/86400) end) end as 'OppCloseWon/Restart_to_SubLiveDate - Calendar Days'\r\n, (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'test2'\r\n,(floor(daysBetween(toDate (max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'test3'\r\n,\r\ncase when \r\n\r\n(case when median(q1.'Opp.CloseDate_sec_epoch') <= max(q2.'CreatedDate_sec_epoch') \r\nthen (floor(daysBetween(toDate (max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) \r\nelse (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) end)\r\n\r\n <= 0 \r\n \r\n then\r\n (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\n\r\nelse\r\n\r\n(case when median(q1.'Opp.CloseDate_sec_epoch') <= max(q2.'CreatedDate_sec_epoch') \r\nthen (floor(daysBetween(toDate (max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) \r\nelse (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) end)\r\nend as 'OppCloseWon/Restart_to_SubLiveDate - Business Days'\r\n;\r\nq = filter q by {{column(Filter_By_Month_1.selection, [\"Live_Date\"]).asEquality(\"Live_Date\")}};\r\nq = filter q by {{column(Project_Start_to_Sub_1.selection, [\"Live_Date\"]).asEquality(\"Live_Date\")}};\r\nq = group q by ('Live_Date','SubscriptionActivation.Opportunity_Number_Formula__c');\r\nq = foreach q generate\r\n'Live_Date'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity Number'\r\n,sum('SubscriptionActivation.Project__c') as '# of Unique Projects'\r\n,median('OppCloseWon/Restart_to_SubLiveDate - Business Days') as 'OppCloseWon/Restart_to_SubLiveDate - Business Days'\r\n,median('OppCloseWon/Restart_to_SubLiveDate - Calendar Days') as 'OppCloseWon/Restart_to_SubLiveDate - Calendar Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"Project_Start_to_Sub_1":{"broadcastFacet":true,"groups":[],"label":"Project Start to Subscription Live","numbers":[],"query":"q1 = load \"Subscription_Activations_and_Transactions\";\r\nq1 = filter q1 by 'Status__c' == \"Live\";\r\nq1 = filter q1 by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'Opp.CloseDate_day_epoch' != 0 ;\r\nq1 = filter q1 by 'Live_Date_Project_Create__c' > 0;\r\n--q1 = filter q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c' == \"3092177\";\r\n\r\nq1 = foreach q1 generate \r\nq1.'Date__c_Year' + \"~~~\" + q1.'Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n, q1.'SubscriptionActivation.Account_Name_Formula__c' as 'SubscriptionActivation.Account_Name_Formula__c' \r\n, q1.'SubscriptionActivation.Opportunity_Name_Formula__c' as 'SubscriptionActivation.Opportunity_Name_Formula__c'\r\n, q1.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, q1.'SubscriptionActivation.Project__c' as 'SubscriptionActivation.Project__c'\r\n, q1.'Product_Code__c' as 'Product_Code__c' \r\n, q1.'Live_Date_Closed_Won_Date__c' as 'Live_Date_Closed_Won_Date__c'\r\n, q1.'Date__c_sec_epoch' as 'Date__c_sec_epoch'\r\n, q1.'Opp.CloseDate_sec_epoch' as 'Opp.CloseDate_sec_epoch'\r\n;\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2= filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c'\r\n,q2.'Project.Name' as 'Project.Name'\r\n,q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch';\r\n\r\nq = cogroup q1 by 'SubscriptionActivation.Opportunity_Number_Formula__c' left, q2 by 'Project.Opportunity_Number__c';\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy-MM\") as 'Live_Date'\r\n,toString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy\") as 'Live_DateY'\r\n,q1.'SubscriptionActivation.Opportunity_Number_Formula__c'as 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, unique(q1.'SubscriptionActivation.Project__c') as 'SubscriptionActivation.Project__c'\r\n, median(q1.'Live_Date_Closed_Won_Date__c') as 'Live_Date_Closed_Won_Date__c'\r\n, min(q1.'Date__c_sec_epoch') as 'Date__c_sec_epoch'\r\n, median(q1.'Opp.CloseDate_sec_epoch') as 'Opp.CloseDate_sec_epoch'\r\n, max(q2.'CreatedDate_sec_epoch') as 'CreatedDate_sec_epoch'\r\n, case when (case when median(q1.'Opp.CloseDate_sec_epoch') <= max(q2.'CreatedDate_sec_epoch') then (min(q1.'Date__c_sec_epoch')/86400 - max(q2.'CreatedDate_sec_epoch')/86400) else (min(q1.'Date__c_sec_epoch')/86400 - median(q1.'Opp.CloseDate_sec_epoch')/86400) end) <= 0 then (min(q1.'Date__c_sec_epoch')/86400 - median(q1.'Opp.CloseDate_sec_epoch')/86400) else (case when median(q1.'Opp.CloseDate_sec_epoch') <= max(q2.'CreatedDate_sec_epoch') then (min(q1.'Date__c_sec_epoch')/86400 - max(q2.'CreatedDate_sec_epoch')/86400) else (min(q1.'Date__c_sec_epoch')/86400 - median(q1.'Opp.CloseDate_sec_epoch')/86400) end) end as 'OppCloseWon/Restart_to_SubLiveDate - Calendar Days'\r\n, (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'test2'\r\n,(floor(daysBetween(toDate (max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'test3'\r\n,\r\ncase when \r\n\r\n(case when median(q1.'Opp.CloseDate_sec_epoch') <= max(q2.'CreatedDate_sec_epoch') \r\nthen (floor(daysBetween(toDate (max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) \r\nelse (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) end)\r\n\r\n <= 0 \r\n \r\n then\r\n (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\n\r\nelse\r\n\r\n(case when median(q1.'Opp.CloseDate_sec_epoch') <= max(q2.'CreatedDate_sec_epoch') \r\nthen (floor(daysBetween(toDate (max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) \r\nelse (floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) end)\r\nend as 'OppCloseWon/Restart_to_SubLiveDate - Business Days'\r\n;\r\nq = filter q by {{column(Filter_By_Month_1.selection, [\"Live_Date\"]).asEquality(\"Live_Date\")}};\r\nq = group q by ('Live_Date');\r\nq = filter q by {{column(Services_Efficiency__1.selection, [\"Live_DateY\"]).asEquality(\"Live_DateY\")}};\r\nq = group q by ('Live_Date');\r\nq = foreach q generate\r\n'Live_Date'\r\n,sum('SubscriptionActivation.Project__c') as '# of Unique Projects'\r\n,median('OppCloseWon/Restart_to_SubLiveDate - Business Days') as 'OppCloseWon/Restart_to_SubLiveDate - Business Days'\r\n--,median('OppCloseWon/Restart_to_SubLiveDate - Calendar Days') as 'OppCloseWon/Restart_to_SubLiveDate - Calendar Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":16,"subtitleFontSize":11,"label":"Project \"Start\" to Subscription Live Date","align":"center","subtitleLabel":"Note: Hilton & IHG projects are not included in this data based on how duration is calculated."},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"referenceLines":[{"label":{"data":"Goal < 60","type":"static"},"value":{"data":"60","type":"static"}}],"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Subscription Live Date (Year-Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Clone_of_Capacity_Le_1":{"broadcastFacet":true,"groups":[],"label":"Clone of Capacity Lead Time - Monthly","numbers":[],"query":"q1 = load \"Milestones_with_Activity_Line_Info\";\r\nq1 = filter q1 by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nq1 = filter q1 by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq1 = filter q1 by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nq1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\r\nq1 = filter q1 by 'pse__Target_Date__c_day_epoch' != 20453;\r\n--q1 = filter q1 by 'Practice.Name' == \"Consulting\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' == \"3160496\";\r\n--q1 = filter q1 by 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\r\nq1 = foreach q1 generate q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,q1.'Practice.Name' as 'Practice.Name'\r\n, last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'pse__Target_Date__c_sec_epoch'\r\n, last(q1.'pse__Project__c.CreatedDate_sec_epoch')  as 'pse__Project__c.CreatedDate_sec_epoch'\r\n, min(q1.'pse__Target_Date__c_sec_epoch') as 'A', last(q1.'pse__Project__c.CreatedDate_sec_epoch') as 'B',last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'C';\r\n\r\nq2 = load \"Project_History\";\r\nq2 = filter q2 by 'Field' == \"pse__Stage__c\";\r\nq2 = filter q2 by 'OldValue' == \"On Hold\";\r\nq2 = filter q2 by 'NewValue' == \"In Progress\";\r\n--q2 = filter q2 by 'Project.Opportunity_Number__c' == \"3160496\";\r\nq2 = foreach q2 generate q2.'Project.Opportunity_Number__c' as 'Project.Opportunity_Number__c',q2.'Project.Name' as 'Project.Name',q2.'CreatedDate_sec_epoch' as 'CreatedDate_sec_epoch', max(q2.'CreatedDate_sec_epoch') as 'D';\r\n\r\nq = cogroup q1 by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, q2 by ('Project.Opportunity_Number__c','Project.Name');\r\nq = foreach q generate\r\ntoString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\r\n,q1.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,q1.'pse__Project__c.Name' as 'pse__Project__c.Name'\r\n,first(q1.'Practice.Name') as 'Practice.Name'\r\n,min(q1.'A') as 'A'\r\n,last(q1.'B') as 'B'\r\n,last(q1.'C') as 'C'\r\n,max(q2.'D') as 'D'\r\n,(case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end) as 'Project Begin'\r\n, (case when ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) <= 0 then (min(q1.'A')/86400-last(q1.'C')/86400) else ((min(q1.'A')/86400)+25569) - (((case when max(q2.'D') > last(q1.'C') then max(q2.'D') else last(q1.'C') end)/86400)+25569) end) as 'Opp Close Won/Project Restart_to_Milestone Target'\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test'\r\n\r\n, (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test2'\r\n\r\n,case when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) <0\r\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))\r\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\r\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n\r\n,(floor(daysBetween(toDate (last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Test1'\r\n;\r\nq  = filter q by 'Target_Date' in all;\r\nq  = filter q by 'Target_Date' in all;\r\nq = group q by ('Target_Date','pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name');\r\nq = foreach q generate\r\n'Target_Date'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, unique('pse__Project__c.Name') as '# of Unique Projects'\r\n, first('Practice.Name') as 'Practice.Name'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target') as 'Opp Close Won/Project Restart_to_Milestone Target - Calendar Days'\r\n--, (median('A')/86400) - (median('C')/86400) as 'Opp Close Won_to_Milestone Target - Calendar Days'\r\n, median('Test1') as 'Project Creation_to_Milestone Target - Business Days'\r\n, median('Test') as 'Opp Close Won_to_Milestone Target - Business Days'\r\n--, median('Test2') as 'Test2'\r\n--, median('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"verticalPadding":8},"type":"table"}},"Service___ASEM_Only_1":{"broadcastFacet":true,"groups":[],"label":"Service  Efficiency - Monthly ASEM Only","numbers":[],"query":"q = load \"Subscription_Activations_and_Transactions\";\nq = filter q by 'Status__c' == \"Live\";\nq = filter q by date('Opp.CloseDate_Year', 'Opp.CloseDate_Month', 'Opp.CloseDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\nq = filter q by 'Opp.CloseDate_day_epoch' != 0 ;\nq = filter q by 'Live_Date_Project_Create__c' > 0;\nq = filter q by \n('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || \n('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||\n('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||\n('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||\n('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-SUB\")\n; -- ASEM Product Code Only\n\nq = foreach q generate \n'Opp.CloseDate_Year' + \"~~~\" + 'Opp.CloseDate_Month' as 'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n,'Product_Code__c'\n, median('Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n,median('Date__c_day_epoch') - median('Opp.CloseDate_day_epoch') as 'check'\n\n,(floor(daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch')) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 0 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 1 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 2 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 3 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 4 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 5 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 6 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) as 'Business_Days5'\n, (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch'))) as 'Calendar_Days5' \n;\n\nq = filter q by 'Opp.CloseDate_Year~~~Opp.CloseDate_Month' in all;\nq = group q by \n('Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n, 'Product_Code__c');\nq = foreach q generate\n'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n--,'SubscriptionActivation.Account_Name_Formula__c' as 'Account_Name'\n--, 'SubscriptionActivation.Opportunity_Name_Formula__c' as 'Opportunity_Name'\n--, 'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\n--, 'Product_Code__c'\n--, median('median_Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n--, median('check') as 'check'\n, median('Business_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Business_Days'\n--, median('Calendar_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Calendar_Days'\n;\nq = group q by 'Opp.CloseDate_Year~~~Opp.CloseDate_Month';\nq = foreach q generate\n'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n, median('Median_Live_Date_Closed_Won_Date__c - Business_Days') as 'CloseWon_to_SubscriptionLive - Business_Days'\n;\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showPoints":true,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"line","dashLine":{"measures":"","showDashLine":false},"title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Subscription","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"fillArea":true,"showActionMenu":true,"showZero":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration Days","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Opportunity Close Won (Year/Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""}},"type":"chart"}},"Service_Efficiency___1":{"broadcastFacet":true,"groups":[],"label":"Service Efficiency - SO Project Only ","numbers":[],"query":"q = load \"Subscription_Activations_and_Transactions\";\nq = filter q by 'Status__c' == \"Live\";\nq = filter q by date('Opp.CloseDate_Year', 'Opp.CloseDate_Month', 'Opp.CloseDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\nq = filter q by 'Opp.CloseDate_day_epoch' != 0 ;\nq = filter q by 'Live_Date_Project_Create__c' > 0;\n\nq = foreach q generate \n'Opp.CloseDate_Year' + \"~~~\" + 'Opp.CloseDate_Month' as 'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n,'Product_Code__c'\n, median('Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n,median('Date__c_day_epoch') - median('Opp.CloseDate_day_epoch') as 'check'\n\n,(floor(daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch')) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 0 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 1 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 2 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 3 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 4 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 5 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 6 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) as 'Business_Days5'\n, (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch'))) as 'Calendar_Days5' \n;\n\nq = filter q by 'Opp.CloseDate_Year~~~Opp.CloseDate_Month' in all;\nq = group q by \n('Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n, 'Product_Code__c');\nq = foreach q generate\n'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n--,'SubscriptionActivation.Account_Name_Formula__c' as 'Account_Name'\n--, 'SubscriptionActivation.Opportunity_Name_Formula__c' as 'Opportunity_Name'\n--, 'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\n--, 'Product_Code__c'\n--, median('median_Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n--, median('check') as 'check'\n, median('Business_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Business_Days'\n--, median('Calendar_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Calendar_Days'\n;\nq = group q by 'Opp.CloseDate_Year~~~Opp.CloseDate_Month';\nq = foreach q generate\n'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n, median('Median_Live_Date_Closed_Won_Date__c - Business_Days') as 'CloseWon_to_SubscriptionLive - Business_Days'\n;\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showPoints":true,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"line","dashLine":{"measures":"","showDashLine":false},"title":{"fontSize":14,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Subscription","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"fillArea":true,"showActionMenu":true,"showZero":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration Days","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""}},"type":"chart"}},"Service_Efficiency___2":{"broadcastFacet":true,"groups":[],"label":"Service Efficiency - SO Product Only ","numbers":[],"query":"q = load \"Subscription_Activations_and_Transactions\";\nq = filter q by 'Status__c' == \"Live\";\nq = filter q by date('Opp.CloseDate_Year', 'Opp.CloseDate_Month', 'Opp.CloseDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\nq = filter q by 'Opp.CloseDate_day_epoch' != 0 ;\nq = filter q by 'Live_Date_Project_Create__c' > 0;\n\nq = foreach q generate \n'Opp.CloseDate_Year' + \"~~~\" + 'Opp.CloseDate_Month' as 'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n,'Product_Code__c'\n, median('Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n,median('Date__c_day_epoch') - median('Opp.CloseDate_day_epoch') as 'check'\n\n,(floor(daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch')) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 0 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 1 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 2 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 3 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 4 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 5 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 6 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) as 'Business_Days5'\n, (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch'))) as 'Calendar_Days5' \n;\n\nq = filter q by 'Opp.CloseDate_Year~~~Opp.CloseDate_Month' in all;\nq = group q by \n('Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n, 'Product_Code__c');\nq = foreach q generate\n'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' as 'Account_Name'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' as 'Opportunity_Name'\n, 'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\n, 'Product_Code__c'\n--, median('median_Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n--, median('check') as 'check'\n, median('Business_Days5') as 'OppClosWon_to_SubLiveDate - Business_Days'\n--, median('Calendar_Days5') as 'OppClosWon_to_SubLiveDate- Calendar_Days'\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"Service__Efficiency__1":{"broadcastFacet":true,"groups":[],"label":"Service  Efficiency -  Monthly ASEM Only","numbers":[],"query":"q = load \"Subscription_Activations_and_Transactions\";\nq = filter q by 'Status__c' == \"Live\";\nq = filter q by date('Opp.CloseDate_Year', 'Opp.CloseDate_Month', 'Opp.CloseDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\nq = filter q by 'Opp.CloseDate_day_epoch' != 0 ;\nq = filter q by 'Live_Date_Project_Create__c' > 0;\nq = filter q by \n('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || \n('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||\n('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||\n('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||\n('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||\n('Product_Code__c' matches \"LOD-HRM-ENT-SUB\")\n; -- ASEM Product Code Only\n\nq = foreach q generate \n'Opp.CloseDate_Year' + \"~~~\" + 'Opp.CloseDate_Month' as 'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n,'Product_Code__c'\n, median('Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n,median('Date__c_day_epoch') - median('Opp.CloseDate_day_epoch') as 'check'\n\n,(floor(daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch')) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 0 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 1 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 2 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 3 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 4 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 5 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 6 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) as 'Business_Days5'\n, (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch'))) as 'Calendar_Days5' \n;\n\nq = filter q by 'Opp.CloseDate_Year~~~Opp.CloseDate_Month' in all;\nq = group q by \n('Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\n, 'Product_Code__c');\nq = foreach q generate\n'Opp.CloseDate_Year~~~Opp.CloseDate_Month'\n,'SubscriptionActivation.Account_Name_Formula__c' as 'Account_Name'\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' as 'Opportunity_Name'\n, 'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\n, 'Product_Code__c'\n--, median('median_Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\n--, median('check') as 'check'\n, median('Business_Days5') as 'OppClosWon_to_SubLiveDate - Business_Days'\n--, median('Calendar_Days5') as 'OppClosWon_to_SubLiveDate- Calendar_Days'\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"Product_Code_SO_1":{"broadcastFacet":true,"columns":{"Product Code":{"type":"string"}},"label":"Static Product Code SO","selectMode":"multi","type":"staticflex","values":["{\"Product Code\":\"B-HSHILTON.ONQ\"}","{\"Product Code\":\"B-HSHILTON.OPE\"}","{\"Product Code\":\"B-HSHILTONHSREX.ONQ\"}","{\"Product Code\":\"B-HSHILTONHSREX.OPE\"}","{\"Product Code\":\"B-HSHILTONREX.ONQ\"}","{\"Product Code\":\"B-HSHILTONREX.OPE\"}","{\"Product Code\":\"SO-ADDHKPGPKG-SUB-01\"}","{\"Product Code\":\"SO-ADDHKPGPKG-SUB-02\"}","{\"Product Code\":\"SO-ADDHKPGPKG-SUB-03\"}","{\"Product Code\":\"SO-ADDHKPGPKG-SUB-04\"}","{\"Product Code\":\"SO-ADDHKPGPKG-SUB-05\"}","{\"Product Code\":\"SO-ESSENTIAL-SUB-01\"}","{\"Product Code\":\"SO-ESSENTIAL-SUB-02\"}","{\"Product Code\":\"SO-HOTSOSPKG-SUB-01\"}","{\"Product Code\":\"SO-HOTSOSPKG-SUB-02\"}","{\"Product Code\":\"SO-HOTSOSPKG-SUB-03\"}","{\"Product Code\":\"SO-HOTSOSPKG-SUB-04\"}","{\"Product Code\":\"SO-HOTSOSPKG-SUB-05\"}","{\"Product Code\":\"SO-HSHKPGPKG-SUB-01\"}","{\"Product Code\":\"SO-HSHKPGPKG-SUB-02\"}","{\"Product Code\":\"SO-HSHKPGPKG-SUB-03\"}","{\"Product Code\":\"SO-HSHKPGPKG-SUB-04\"}","{\"Product Code\":\"SO-HSHKPGPKG-SUB-05\"}","{\"Product Code\":\"SO-HSMILDPKG-SUB-01\"}","{\"Product Code\":\"SO-HSMILDPKG-SUB-02\"}","{\"Product Code\":\"SO-HSMILDPKG-SUB-03\"}","{\"Product Code\":\"SO-HSMILDPKG-SUB-04\"}","{\"Product Code\":\"SO-HSMILDPKG-SUB-05\"}","{\"Product Code\":\"SO-HYATT-HOTSOSPKG-SUB-01\"}","{\"Product Code\":\"SO-HYATT-HOTSOSPKG-SUB-02\"}","{\"Product Code\":\"SO-HYATT-HOTSOSPKG-SUB-03\"}","{\"Product Code\":\"SO-HYATT-HOTSOSPKG-SUB-04\"}","{\"Product Code\":\"SO-HYATT-HOTSOSPKG-SUB-05\"}","{\"Product Code\":\"SO-HYATT-HSHKPGPKG-SUB-01\"}","{\"Product Code\":\"SO-HYATT-HSHKPGPKG-SUB-02\"}","{\"Product Code\":\"O-HYATT-HSHKPGPKG-SUB-03\"}","{\"Product Code\":\"SO-HYATT-HSHKPGPKG-SUB-04\"}","{\"Product Code\":\"SO-HYATT-HSHKPGPKG-SUB-05\"}","{\"Product Code\":\"SO-HYATT-HSMILDPKG-SUB-01\"}","{\"Product Code\":\"SO-HYATT-HSMILDPKG-SUB-02\"}","{\"Product Code\":\"SO-HYATT-HSMILDPKG-SUB-03\"}","{\"Product Code\":\"SO-HYATT-HSMILDPKG-SUB-04\"}","{\"Product Code\":\"SO-HYATT-HSMILDPKG-SUB-05\"}","{\"Product Code\":\"SO-HYATT-HSMILDPMS-SUB-01\"}","{\"Product Code\":\"SO-HYATT-HSMILDPMS-SUB-02\"}","{\"Product Code\":\"SO-HYATT-HSMILDPMS-SUB-03\"}","{\"Product Code\":\"SO-HYATT-HSMILDPMS-SUB-04\"}","{\"Product Code\":\"SO-HYATT-HSMILDPMS-SUB-05\"}"]},"Filter_by_Date_XX_1":{"broadcastFacet":true,"groups":[],"label":"Filter by Date XX","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\", \"12/31/2025\"];\r\nMil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"1 month ago\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\n--Mil = filter Mil by 'pse__Project__c' == \"a2T0d000003aj4KEAQ\";-- Sample Test- 3075622\r\n--Mil = filter Mil by 'Practice.Name' == \"Consulting\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\nresult1 = group Mil by \r\n('pse__Target_Date__c_Year'\r\n, 'pse__Target_Date__c_Month'\r\n, 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,'pse__Status__c'\r\n,'pse__Project__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\nMil.'pse__Target_Date__c_Year' + \"~~~\" + Mil.'pse__Target_Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n,Mil.'pse__Status__c' as 'Status'\r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number_Formula__c'\r\n, Mil.'pse__Project__c' as 'pse__Project__c'\r\n, min(Mil.'pse__Target_Date__c_sec_epoch') as 'MinTargetDate'\r\n;\r\n\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n--Sub = filter Sub by 'SubscriptionActivation.Project__c'  == \"a2T0d000003aj4KEAQ\";-- Sample Test \r\n\r\nresult2 = group Sub by (\r\n'Date__c_Year'\r\n ,'Date__c_Month'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Project__c'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate\r\nSub.'Date__c_Year' + \"~~~\" + Sub.'Date__c_Month'as 'Date__c_Year~~~Date__c_Month'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number_Formula__c'\r\n, Sub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n,Sub.'Status__c' as 'Status'\r\n, min(Sub.'Date__c_sec_epoch') as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by (\r\n'pse__Project__c'\r\n) , result2 by (\r\n'pse__Project__c'\r\n);\r\n\r\n\r\nFinal = foreach Final generate \r\ntoString(toDate(min(result2.'Date')),\"yyyy-MM\") as 'Live_Date'\r\n;\r\nFinal = filter Final by 'Live_Date' in all;\r\nFinal = group Final by 'Live_Date';\r\nFinal = foreach Final generate\r\n'Live_Date';\r\nFinal = order Final by 'Live_Date' asc;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showPoints":false,"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"line","dashLine":{"measures":"","showDashLine":false},"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"fillArea":true,"showActionMenu":true,"showZero":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""}},"type":"chart"}},"Capacity_Lead_Time___2":{"broadcastFacet":true,"groups":[],"label":"Overall Efficiency - Year View","numbers":[],"query":"q = load \"Project_History\";\r\nq = filter q by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq = filter q by 'Opportunity.CloseDate_day_epoch' != 0 ;\r\nq = filter q by 'Project.pse__End_Date__c_day_epoch' != 20453;\r\nq = filter q by 'Project.pse__End_Date__c_day_epoch' > 0 ;\r\nq = filter q by 'Field' == \"pse__Stage__c\";\r\nq = filter q by 'NewValue' in [\"Completed\", \"Project Closing\"];\r\nq = filter q by 'OldValue' == \"In Progress\";\r\n\r\n\r\nq = foreach q generate \r\n'CreatedDate_Year' as 'CreatedDate_Year'\r\n,'Project.Opportunity_Number__c' \r\n,'Project.Name'\r\n, median(q.'CreatedDate_day_epoch') - median(q.'Opportunity.CloseDate_day_epoch') as 'OppCloseWon_to_ProjectCloseDate'\r\n,((floor((daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate ('CreatedDate_sec_epoch')) / 7) * 5)) + ((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days'\r\n, (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate ('CreatedDate_sec_epoch'))) as 'Calendar_Days' \r\n, (case when ((floor((daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate (min('CreatedDate_sec_epoch')))) / 7) * 5) + ((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 0 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 1 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 2 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 3 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 4 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 5 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min('CreatedDate_sec_epoch'))) % 7) == 6 then (case (daysBetween(toDate('Opportunity.CloseDate_sec_epoch'), toDate('CreatedDate_sec_epoch'))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) > 260 then 1 else 0 end) as 'Duration>260'\r\n;\r\n\r\n\r\n\r\nq = group q by ('CreatedDate_Year'\r\n,'Project.Opportunity_Number__c','Project.Name'\r\n);\r\nq = foreach q generate \r\n'CreatedDate_Year'\r\n--,'Project.Opportunity_Number__c'\r\n--,'Project.Name'\r\n, unique('Project.Name') as 'Project.Name1'\r\n, median('OppCloseWon_to_ProjectCloseDate') as 'OppCloseWon_to_ProjectCloseDate'\r\n, min('Business_Days') as 'Business_Days'\r\n, min('Calendar_Days') as 'Calendar_Days'\r\n, min('Duration>260') as 'Duration>260'\r\n;\r\n\r\nq = group q by ('CreatedDate_Year'\r\n);\r\nq = foreach q generate \r\n'CreatedDate_Year'\r\n--, sum('Project.Name1') as '# of Unique Projects'\r\n, median('Business_Days') as 'OppCloseWon_to_ProjectCloseDate - Business_Days'\r\n--, median('Calendar_Days') as 'OppCloseWon_to_ProjectCloseDate - Calendar_Days'\r\n--, sum('Duration>260') as 'Duration>260'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["OppCloseWon_to_ProjectCloseDate"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["CreatedDate_Year"]}}},"visualizationType":"pie","title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"none","valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}},"Capacity_Lead_Time___3":{"broadcastFacet":true,"groups":[],"label":"Services Efficiency(ASEM) - Year View","numbers":[],"query":"q = load \"Subscription_Activations_and_Transactions\";\r\nq = filter q by 'Status__c' == \"Live\";\r\nq = filter q by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\nq = filter q by 'Opp.CloseDate_day_epoch' != 0 ;\r\nq = filter q by 'Live_Date_Project_Create__c' > 0;\r\nq = filter q by \r\n('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || \r\n('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||\r\n('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||\r\n('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||\r\n('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||\r\n('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||\r\n('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||\r\n('Product_Code__c' matches \"LOD-HRM-ENT-SUB\")\r\n; -- ASEM Product Code Only\r\n\r\nq = foreach q generate \r\n'Date__c_Year' + \"~~~\" + 'Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n,'Date__c_Year' as 'Date__c_Year'\r\n,'SubscriptionActivation.Account_Name_Formula__c' \r\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \r\n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'Product_Code__c'\r\n, median('Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\r\n,median('Date__c_day_epoch') - median('Opp.CloseDate_day_epoch') as 'check'\r\n\r\n,(floor(daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch')) / 7) * 5) + ((case \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 0 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 1 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 2 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 3 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 4 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 5 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Date__c_sec_epoch')) % 7 == 6 then (case (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate('Date__c_sec_epoch'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end)) as 'Business_Days5'\r\n, (daysBetween(toDate('Opp.CloseDate_sec_epoch'), toDate ('Date__c_sec_epoch'))) as 'Calendar_Days5' \r\n;\r\n\r\nq = filter q by 'Date__c_Year~~~Date__c_Month' in all;\r\nq = group q by \r\n('Date__c_Year~~~Date__c_Month'\r\n,'Date__c_Year'\r\n,'SubscriptionActivation.Account_Name_Formula__c'\r\n, 'SubscriptionActivation.Opportunity_Name_Formula__c' \r\n, 'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n, 'Product_Code__c'\r\n);\r\nq = foreach q generate\r\n'Date__c_Year~~~Date__c_Month'\r\n,'Date__c_Year'\r\n--,'SubscriptionActivation.Account_Name_Formula__c' as 'Account_Name'\r\n--, 'SubscriptionActivation.Opportunity_Name_Formula__c' as 'Opportunity_Name'\r\n--, 'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n--, 'Product_Code__c'\r\n--, median('median_Live_Date_Closed_Won_Date__c') as 'median_Live_Date_Closed_Won_Date__c'\r\n--, median('check') as 'check'\r\n, median('Business_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Business_Days'\r\n--, median('Calendar_Days5') as 'Median_Live_Date_Closed_Won_Date__c - Calendar_Days'\r\n;\r\nq = group q by 'Date__c_Year';\r\nq = foreach q generate\r\n'Date__c_Year'\r\n,median('Median_Live_Date_Closed_Won_Date__c - Business_Days') as 'CloseWon_to_SubscriptionLive - Business_Days'\r\n;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["OppCloseWon_to_SubLiveDate - Business_Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Date__c_Year"]}}},"visualizationType":"pie","title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"none","valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}},"New_Project_Create_t_1":{"broadcastFacet":true,"groups":[],"label":"New Project Create to Milestone Target","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\n--Mil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\nMil = filter Mil by 'Practice.Name' matches \"Training\";\r\nMil = filter Mil by 'Name' matches \"Training\";\r\nMil = filter Mil by 'pse__Status__c' != \"Canceled\";\r\nMil = filter Mil by 'pse__Project__c.Name' matches \".fdc\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\n\r\nresult1 = group Mil by \r\n( 'pse__Target_Date__c_Year'\r\n,'pse__Target_Date__c_Month'\r\n,'pse__Target_Date__c_Day'\r\n,'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n, 'pse__Project__c.Name'\r\n, 'pse__Project__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'pse__Status__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\n Mil.'pse__Status__c' as 'pse__Status__c' \r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name'as 'Region'\r\n, Mil.'pse__Project__c'as 'pse__Project__c'\r\n,'pse__Project__c.Name' as 'Project_Name'\r\n, 'pse__Target_Date__c_Year'as 'Year'\r\n, 'pse__Target_Date__c_Month' as 'Month'\r\n, min(Mil.'pse__Target_Date__c_day_epoch')+25569  as 'MinTargetDate'\r\n;\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\n\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by ('Product_Code__c' matches \"LOD-HRM-EMB+20-LTD\") || ('Product_Code__c' matches \"LOD-HRM-EMB+20-SUB\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-BQT\") ||('Product_Code__c' matches \"LOD-HRM-EMB+-LTD\")||('Product_Code__c' matches \"LOD-HRM-EMB+-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-BQT\")||('Product_Code__c' matches \"LOD-HRM-ENT-LTD-SUB\")||('Product_Code__c' matches \"LOD-HRM-ENT-SUB\");\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n\r\nresult2 = group Sub by ('Date__c_Year','Date__c_Month'\r\n,'Date__c_Day'\r\n,'SubscriptionActivation.Project__c'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Product_Name__c'\r\n,'Group.Name'\r\n,'Region.Name'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate \r\nSub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number'\r\n,'Date__c_Year' as 'Year'\r\n,'Date__c_Month' as 'Month'\r\n,Sub.'Status__c' as 'Status'\r\n, 'Group.Name' as 'Group'\r\n, 'Region.Name' as 'Name'\r\n,'SubscriptionActivation.Product_Name__c' as 'Product_Name'\r\n, min(Sub.'Date__c_day_epoch')+25569  as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by ('pse__Project__c'\r\n) , result2 by ('pse__Project__c'\r\n);\r\n\r\nFinal = foreach Final generate\r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,toString(toDate(min(result2.'Date')),\"yyyy\") as 'Live_Date-Y'\r\n, first(result1.'Project_Name') as 'Project_Name'\r\n, first(result1.'Opportunity_Number') as 'Opportunity_Number'\r\n, min(result1.'MinTargetDate') as 'MilMedian_TargetDate'\r\n, min(result2.'MinSubDate') as 'SubMedian_SubDate'\r\n, min(result1.'MinTargetDate') - min(result2.'MinSubDate') as 'TargetDate_to_SubscriptionDate'\r\n;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date-Y'\r\n,median('TargetDate_to_SubscriptionDate') as 'TargetDate_to_SubscriptionDate'\r\n,(case 'MilMedian_TargetDate' when 46022 then 1 else 0 end) as 'No Training Cmpl'\r\n, count() as 'Record Count1'\r\n;\r\n--Final = filter Final  by 'No Training Cmpl' == 1;\r\nFinal = filter Final  by 'TargetDate_to_SubscriptionDate' != 0;\r\nFinal = group Final by 'Live_Date-Y';\r\nFinal = foreach Final generate\r\n'Live_Date-Y'\r\n--,sum('Record Count1') as 'Record Count'\r\n--, sum('No Training Cmpl') as 'No Training'\r\n, round(sum('No Training Cmpl')/sum('Record Count1'),4) as '% Not Trained'\r\n;\r\n\r\n\r\n\r\n\r\n\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["% Not Trained"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Live_Date"]}}},"visualizationType":"pie","title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"none","valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}},"Capacity_Lead_Time___1":{"broadcastFacet":true,"groups":[],"label":"Delivery Efficiency  - Year View","numbers":[],"query":"-- Milestones with Activity Line Data\r\n\r\nMil = load \"Milestones_with_Activity_Line_Info\";\r\nMil = filter Mil by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\",\"Forms Received\"];\r\nMil = filter Mil by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\", \"12/31/2025\"];\r\nMil = filter Mil by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\r\nMil = filter Mil by 'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\r\n--Mil = filter Mil by 'pse__Project__c' == \"a2T0d000003aj4KEAQ\";-- Sample Test- 3075622\r\n--Mil = filter Mil by 'Practice.Name' == \"Consulting\";\r\n--Mil = filter Mil by 'pse__Target_Date__c_day_epoch' != 20453;\r\n\r\nresult1 = group Mil by \r\n('pse__Target_Date__c_Year'\r\n, 'pse__Target_Date__c_Month'\r\n, 'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c'\r\n,'pse__Status__c'\r\n,'pse__Project__c'\r\n);\r\n\r\nresult1 = foreach result1 generate \r\nMil.'pse__Target_Date__c_Year' + \"~~~\" + Mil.'pse__Target_Date__c_Month' as 'Date__c_Year~~~Date__c_Month'\r\n,Mil.'pse__Status__c' as 'Status'\r\n, Mil.'pse__Project__c.pse__Opportunity__c.Opportunity_Number__c' as 'Opportunity_Number_Formula__c'\r\n, Mil.'pse__Project__c' as 'pse__Project__c'\r\n, min(Mil.'pse__Target_Date__c_sec_epoch') as 'MinTargetDate'\r\n;\r\n\r\n\r\n-- Subscription Activation Transaction Data\r\n\r\nSub = load \"Subscription_Activations_and_Transactions\";\r\nSub = filter Sub by 'Status__c' == \"Live\";\r\nSub = filter Sub by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\r\n--Sub = filter Sub by 'SubscriptionActivation.Project__c'  == \"a2T0d000003aj4KEAQ\";-- Sample Test \r\n\r\nresult2 = group Sub by (\r\n'Date__c_Year'\r\n ,'Date__c_Month'\r\n,'SubscriptionActivation.Opportunity_Number_Formula__c'\r\n,'SubscriptionActivation.Project__c'\r\n,'Status__c'\r\n);\r\n\r\nresult2 = foreach result2 generate\r\nSub.'Date__c_Year' + \"~~~\" + Sub.'Date__c_Month'as 'Date__c_Year~~~Date__c_Month'\r\n, Sub.'SubscriptionActivation.Opportunity_Number_Formula__c' as 'Opportunity_Number_Formula__c'\r\n, Sub.'SubscriptionActivation.Project__c' as 'pse__Project__c'\r\n,Sub.'Status__c' as 'Status'\r\n, min(Sub.'Date__c_sec_epoch') as 'MinSubDate'\r\n, min(Sub.'Date__c_sec_epoch') as 'Date'\r\n;\r\n\r\n\r\nFinal = cogroup result1 by (\r\n'pse__Project__c'\r\n) , result2 by (\r\n'pse__Project__c'\r\n);\r\n\r\n\r\nFinal = foreach Final generate \r\nresult1.'pse__Project__c' as 'pse__Project__c'\r\n,last(result1.'Opportunity_Number_Formula__c') as 'Opportunity_Number'\r\n,toString(toDate(min(result2.'Date')),\"yyyy\") as 'Live_Date-Y'\r\n , min(result2.'MinSubDate') as 'Median_Sub'\r\n , min(result1.'MinTargetDate') as 'Median_Target'\r\n ,(min(result2.'MinSubDate') - min(result1.'MinTargetDate'))/86400  as 'Duration'\r\n ;\r\n\r\nFinal = foreach Final generate\r\n'Live_Date-Y'\r\n,median('Duration') as 'Duration'\r\n,((floor((daysBetween(toDate('Median_Target'), toDate ('Median_Sub')) / 7) * 5))  +\r\n((case \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 0 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 1 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 2 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 3 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 4 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 5 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \r\nwhen (daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate('Median_Sub')) % 7) == 6 then (case (daysBetween(toDate('Median_Target'), toDate('Median_Sub'))% 7) when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \r\nelse 999 end))) as 'Business_Days1'\r\n;\r\n\r\nFinal = group Final by ('Live_Date-Y');\r\n\r\nFinal = foreach Final generate\r\n'Live_Date-Y'\r\n--,median('Duration') as 'Milestone_to_Subscription'\r\n,median('Business_Days1') as 'Milestone_to_Subscription - Business_Days'\r\n;\r\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["Milestone_to_Subscription - Business_Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Live_Date-Y"]}}},"visualizationType":"pie","title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"none","valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}}},"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1},"widgets":{"link_18":{"parameters":{"destinationLink":{"name":"d449fd06-e869-4358-9ea3-90ce0e2c074e"},"destinationType":"page","fontSize":24,"includeState":false,"text":"?","textAlignment":"center","textColor":"#95FFFF"},"type":"link"},"link_19":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":32,"includeState":false,"text":"X","textAlignment":"center","textColor":"#E84340"},"type":"link"},"link_16":{"parameters":{"destinationLink":{"name":"808632c6-150b-420f-93ff-5d68c0f916c9"},"destinationType":"page","fontSize":18,"includeState":false,"text":"Delivery Efficiency  (All Practices)","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"link_17":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Return to Main Page","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"link_14":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Return to Main Page","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"link_15":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Return to Main Page","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"link_12":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Return to Main Page","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"link_13":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Return to Main Page","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"link_10":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Return to Main Page","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"link_11":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Return to Main Page","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"chart_9":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["OppCloseWon_to_ProjectCloseDate - Business_Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["CreatedDate_Year"]}}},"visualizationType":"pie","exploreLink":true,"title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"none","valueType":"compactNumber","theme":"bluegrassDark","step":"Capacity_Lead_Time___2","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"},"chart_6":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["Opp Close Won/Project Restart_to_Milestone Target - Business Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Target_DateY"]}}},"visualizationType":"pie","exploreLink":true,"title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"none","valueType":"compactNumber","theme":"bluegrassDark","step":"Scheduling_Efficienc_1","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"},"text_3":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Filter by column(Services_Efficiency__1.selection, [\\\"Live_DateY\\\"]).asEquality(\\\"Live_DateY\\\")\n\nFilter by column(Filter_By_Month_1.selection, [\\\"Live_Date\\\"]).asEquality(\\\"Live_Date\\\")"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_2":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Time to Revenue - KPI Dashboard"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"chart_5":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["ProjectCreation_to_MilestoneCreation - Business Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Mil_Create_Date-Y"]}}},"visualizationType":"pie","exploreLink":true,"title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"none","valueType":"compactNumber","theme":"bluegrassDark","step":"lens_1","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"},"chart_8":{"parameters":{"autoFitMode":"keepLabels","centerText":"","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["Milestone_to_Subscription - Business_Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Live_Date-Y"]}}},"visualizationType":"pie","exploreLink":true,"title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"none","valueType":"compactNumber","theme":"bluegrassDark","step":"Capacity_Lead_Time___1","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"},"text_5":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Scheduling Efficiency"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_4":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Time to Revenue - KPI Dashboard"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"chart_7":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"Project \"Start\" to First Consulting Milestone","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"# of Unique Projects","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","step":"Restart__Calendar_Da_1","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Milestone Target (Year-Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"text_7":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Scheduling Efficiency"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"chart_2":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Subscription Live Date - ASEM Product Only","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnMap":{"trellis":[],"dimensionAxis":["Date__c_Year~~~Date__c_Month"],"plots":["SubscriptionActivation.Project__c","CloseWon_to_SubscriptionLive - Business_Days"]},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"referenceLines":[{"label":{"data":"Goal < 90","type":"static"},"value":{"data":"90","type":"static"}}],"title":"Median Duration Days","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"# of Unique Projects","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","step":"OppCloseDatetoSubLiv_1","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"text_6":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#091A3E"},"insert":"Project Duration"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"chart_1":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"vbar","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"OppCloseWon_to_MilestoneTarget - Business Days","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","step":"Capacity_Lead_Time___5","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"text_9":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Delivery Efficiency  (All Practices)"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"chart_4":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","exploreLink":true,"title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Opp Close Won to Milestone Target ","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","step":"Capacity_Lead_Time___7","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Milestone Target (Year-Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"text_8":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Customer Efficiency & Aggregated Readiness"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"chart_3":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Subscription Live Date","align":"center","subtitleLabel":"Note: Hilton & IHG projects are not included in this data based on how duration is calculated."},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"referenceLines":[{"label":{"data":"Goal < 60","type":"static"},"value":{"data":"60","type":"static"}}],"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"# of Unique Projects","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","step":"OppClosetoSubscripti_1","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Subscription Live Date (Year-Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"link_27":{"parameters":{"destinationLink":{"name":"6f0d6866-bb6f-43d0-b409-ab3d6f26de7e"},"destinationType":"page","fontSize":24,"includeState":false,"text":"?","textAlignment":"center","textColor":"#95FFFF"},"type":"link"},"link_28":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":32,"includeState":false,"text":"X","textAlignment":"center","textColor":"#E84340"},"type":"link"},"text_1":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"2020 Stats"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"link_25":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":32,"includeState":false,"text":"X","textAlignment":"center","textColor":"#E84340"},"type":"link"},"link_26":{"parameters":{"destinationLink":{"name":"dc5792bd-73b8-4e64-be61-3e53e04ca850"},"destinationType":"page","fontSize":18,"includeState":false,"text":"Customer Efficiency & Aggregated Readiness","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"link_23":{"parameters":{"destinationLink":{"name":"d460cf0d-f2f4-4f5f-af86-cf63d253a80f"},"destinationType":"page","fontSize":24,"includeState":false,"text":"?","textAlignment":"center","textColor":"#95FFFF"},"type":"link"},"link_24":{"parameters":{"destinationLink":{"name":"d449fd06-e869-4358-9ea3-90ce0e2c074e"},"destinationType":"page","fontSize":24,"includeState":false,"text":"?","textAlignment":"center","textColor":"#95FFFF"},"type":"link"},"link_21":{"parameters":{"destinationLink":{"name":"e3bcc2ce-3c64-45e5-acb6-87c41fbee1ad"},"destinationType":"page","fontSize":24,"includeState":false,"text":"?","textAlignment":"center","textColor":"#95FFFF"},"type":"link"},"link_22":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":32,"includeState":false,"text":"X","textAlignment":"center","textColor":"#E84340"},"type":"link"},"link_20":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":32,"includeState":false,"text":"X","textAlignment":"center","textColor":"#E84340"},"type":"link"},"text_65":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"toString(toDate(min(q1.'Date__c_sec_epoch')),\"yyyy-MM\") as 'Live_Date'\nunique(q1.'SubscriptionActivation.Project__c') as 'SubscriptionActivation.Project__c'\n(floor(daysBetween(toDate (median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch'))) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(median(q1.'Opp.CloseDate_sec_epoch')), toDate(min(q1.'Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) as 'OppCloseWon_to_SubLiveDate - Business Days'\nsum('SubscriptionActivation.Project__c') as '# of Unique Projects'\nmedian('OppCloseWon_to_SubLiveDate - Business Days') as 'OppCloseWon_to_SubLiveDate - Business Days'\nmedian('Live_Date_Closed_Won_Date__c') as 'OppCloseWon_to_SubLiveDate - Calendar Days'\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_64":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Calculation(s) Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_66":{"parameters":{"content":{"richTextContent":[{"attributes":{"color":"#091a3e","size":"24px"},"insert":"TESTING"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_61":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Data Set(s) Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_60":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Subscription_Activations_and_Transactions\nProject_History"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_63":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Filtering & Grouping Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_62":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Filter(s):\n'Status__c' == \"Live\";\ndate('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\n'Opp.CloseDate_day_epoch' != 0 ;\n'Live_Date_Project_Create__c' > 0;\n'Live_DateY' in all;\n'Live_Date' in all ;\nGrouping(s):\n'SubscriptionActivation.Opportunity_Number_Formula__c'\n'Live_Date'\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"filterpanel_27":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Group.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_20":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"pse__Project__c.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_21":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Region.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_22":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Group.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_23":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Practice.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_24":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"pse__Project__c.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_25":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Subscription_Activations_and_Transactions"},"field":"Product_Code__c"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_26":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Region.Name"}],"showAllFilters":false},"type":"filterpanel"},"table_10":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"step":"lens_16","totals":true,"verticalPadding":8},"type":"table"},"table_11":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"TC___Opp_to_Forms_Re_1","totals":true,"verticalPadding":8},"type":"table"},"table_12":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{"pse__Project__c.Name":{"parameters":{"alignment":"left","styles":{"linkColor":"#006dcc"}},"type":"text"}},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"TC___Delivery_Effici_1","verticalPadding":8},"type":"table"},"table_15":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":true,"step":"lens_7","totals":true,"verticalPadding":8},"type":"table"},"table_17":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"lens_9","totals":true,"verticalPadding":8},"type":"table"},"table_18":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"lens_10","totals":true,"verticalPadding":8},"type":"table"},"filterpanel_38":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Region.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_39":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Group.Name"}],"showAllFilters":false},"type":"filterpanel"},"container_49":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_48":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_47":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_46":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"filterpanel_30":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Project_History"},"field":"Account.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_31":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Region.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_32":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Group.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_35":{"parameters":{"filterItemOptions":{"backgroundColor":"rgb(9, 26, 62)","borderColor":"rgb(9, 26, 62)","borderRadius":8,"borderWidth":1,"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Region.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_36":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Group.Name"}],"showAllFilters":false},"type":"filterpanel"},"container_52":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_51":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_50":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"filterpanel_17":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Region.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_18":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Group.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_19":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Practice.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_10":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Practice.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_11":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Subscription_Activations_and_Transactions"},"field":"SubscriptionActivation.Opportunity_Name_Formula__c"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_12":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"pse__Project__c.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_13":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Subscription_Activations_and_Transactions"},"field":"Product_Code__c"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_14":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Project_History"},"field":"Project.Name"}],"showAllFilters":false},"type":"filterpanel"},"image_32":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"betapng5png","namespace":""}},"type":"image"},"container_19":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_31":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"fitwidth","image":{"name":"amadeus_whitepng10","namespace":""}},"type":"image"},"container_18":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_30":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"logowhiteJPG10","namespace":""}},"type":"image"},"container_17":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_16":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_36":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"logowhiteJPG10","namespace":""}},"type":"image"},"text_18":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"10px","color":"#FFFFFF"},"insert":"* Median Duration (excl Milestone Training that have not occurred) "},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"container_15":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_35":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"betapng5png","namespace":""}},"type":"image"},"text_17":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"10px","color":"#FFFFFF"},"insert":"(ASEM Specific Products)"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"image_34":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"fitwidth","image":{"name":"amadeus_whitepng10","namespace":""}},"type":"image"},"container_14":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_13":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_33":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"logowhiteJPG10","namespace":""}},"type":"image"},"text_19":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Filter by column(Scheduling_Efficienc_1.selection, [\\\"Target_DateY\\\"]).asEquality(\\\"Target_DateY\\\")\nFilter by column(lens_17.selection, [\\\"Target_Date\\\"]).asEquality(\\\"Target_Date\\\")"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_14":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Project Create to First Milestone Target Date"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_13":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Time to Revenue (All)"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_16":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Training Milestone to Subscriptions"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_15":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Advanced Interaction(s) Used:\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_10":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Project Duration"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_12":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Services Efficiency (SO Product Only)"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_11":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#FFFFFF"},"insert":"Services Efficiency (ASEM Product Only)"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"container_23":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_22":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_21":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_20":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"chart_43":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":false,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"vbar","exploreLink":true,"title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration (excl Milestone Training that have not occurred) - Monthly _Calendar Days","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"referenceLines":[{"label":{"data":"Upper Limit (30)","type":"static"},"value":{"data":"30","type":"static"}}],"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","step":"lens_11","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"number_3":{"parameters":{"compact":false,"exploreLink":true,"measureField":"% Not Trained","numberColor":"#091A3E","numberSize":16,"showActionMenu":true,"step":"lens_14","textAlignment":"left","title":"% Not Trained","titleColor":"#091A3E","titleSize":16,"tooltip":{"customizeTooltip":false}},"type":"number"},"number_2":{"parameters":{"compact":false,"exploreLink":true,"measureField":"No Training","numberColor":"#091A3E","numberSize":16,"showActionMenu":true,"step":"lens_13","textAlignment":"left","title":"No Training","titleColor":"#091A3E","titleSize":16,"tooltip":{"customizeTooltip":false}},"type":"number"},"number_1":{"parameters":{"compact":false,"exploreLink":true,"measureField":"Record Count","numberColor":"#091A3E","numberSize":16,"showActionMenu":true,"step":"lens_12","textAlignment":"left","title":"Record Count","titleColor":"#091A3E","titleSize":16,"tooltip":{"customizeTooltip":false}},"type":"number"},"container_12":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_11":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_10":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"chart_57":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"Median Duration - Project Creation to Milestone Creation","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","step":"Scheduling_Efficienc_4","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"image_10":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"fitwidth","image":{"name":"amadeus_whitepng10","namespace":""}},"type":"image"},"container_39":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_38":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_37":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_12":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"logowhiteJPG10","namespace":""}},"type":"image"},"container_36":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_11":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"betapng5png","namespace":""}},"type":"image"},"container_35":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_18":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"logowhiteJPG10","namespace":""}},"type":"image"},"filterpanel_41":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"pse__Project__c.Name"}],"showAllFilters":false},"type":"filterpanel"},"image_17":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"betapng5png","namespace":""}},"type":"image"},"filterpanel_42":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Region.Name"}],"showAllFilters":false},"type":"filterpanel"},"image_16":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"fitwidth","image":{"name":"amadeus_whitepng10","namespace":""}},"type":"image"},"filterpanel_43":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Group.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_45":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"pse__Project__c.Name"}],"showAllFilters":false},"type":"filterpanel"},"image_19":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"fitwidth","image":{"name":"amadeus_whitepng10","namespace":""}},"type":"image"},"filterpanel_40":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Practice.Name"}],"showAllFilters":false},"type":"filterpanel"},"container_45":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_44":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_43":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_42":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_41":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_40":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"link_122":{"parameters":{"destinationLink":{"tooltip":"Customer Efficiency & Aggregated Readiness - Data Services _ Bill S","url":"https://amadeus-hospitality.lightning.force.com/analytics/dashboard/0FK3g0000004N23GAE"},"destinationType":"url","fontSize":14,"includeState":false,"text":"Link: Customer Efficiency & Aggregated Readiness - Data Services _ Bill S","textAlignment":"center","textColor":"#95FFFF"},"type":"link"},"image_21":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"logowhiteJPG10","namespace":""}},"type":"image"},"image_20":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"betapng5png","namespace":""}},"type":"image"},"container_29":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_25":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"fitwidth","image":{"name":"amadeus_whitepng10","namespace":""}},"type":"image"},"container_27":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_24":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"logowhiteJPG10","namespace":""}},"type":"image"},"container_26":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_23":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"betapng5png","namespace":""}},"type":"image"},"container_25":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_22":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"fitwidth","image":{"name":"amadeus_whitepng10","namespace":""}},"type":"image"},"container_24":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"link_3":{"parameters":{"destinationLink":{"name":"808632c6-150b-420f-93ff-5d68c0f916c9"},"destinationType":"page","fontSize":18,"includeState":false,"text":"Delivery Efficiency  (All Practices)","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"image_29":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"betapng5png","namespace":""}},"type":"image"},"link_4":{"parameters":{"destinationLink":{"name":"cd0a1d31-f71c-4662-8a5f-6fc08132de80"},"destinationType":"page","fontSize":18,"includeState":false,"text":"Project Duration","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"image_28":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"fitwidth","image":{"name":"amadeus_whitepng10","namespace":""}},"type":"image"},"link_1":{"parameters":{"destinationLink":{"name":"b44836c9-562b-4d6c-99b3-e4eb606c4228"},"destinationType":"page","fontSize":18,"includeState":false,"text":"Scheduling Efficiency","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"image_27":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"logowhiteJPG10","namespace":""}},"type":"image"},"link_2":{"parameters":{"destinationLink":{"name":"dc5792bd-73b8-4e64-be61-3e53e04ca850"},"destinationType":"page","fontSize":18,"includeState":false,"text":"Customer Efficiency & Aggregated Readiness","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"image_26":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"betapng5png","namespace":""}},"type":"image"},"table_1":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"Scheduling_Efficienc_3","totals":true,"verticalPadding":8},"type":"table"},"table_2":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"Capacity_Lead_Time___6","totals":true,"verticalPadding":8},"type":"table"},"table_3":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"lens_15","totals":true,"verticalPadding":8},"type":"table"},"link_9":{"parameters":{"destinationLink":{"name":"f41eb801-4595-4918-86d4-d7b82dc1fd21"},"destinationType":"page","fontSize":24,"includeState":false,"text":"?","textAlignment":"center","textColor":"#95FFFF"},"type":"link"},"table_4":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"Delivery_Efficiency__2","totals":true,"verticalPadding":8},"type":"table"},"table_5":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"Project_Start_to_Sub_2","totals":true,"verticalPadding":8},"type":"table"},"link_7":{"parameters":{"destinationLink":{"name":"b44836c9-562b-4d6c-99b3-e4eb606c4228"},"destinationType":"page","fontSize":18,"includeState":false,"text":"Scheduling Efficiency by Milestone Type","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"link_8":{"parameters":{"destinationLink":{"name":"7d5e72da-c1cb-483d-967a-8d8c1c223a66"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Return to Main Page","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"table_6":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":true,"step":"OppClosetoLiveDate_L_1","totals":true,"verticalPadding":8},"type":"table"},"table_7":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"Overall_Efficiency___1","totals":true,"verticalPadding":8},"type":"table"},"link_5":{"parameters":{"destinationLink":{"url":"https://amadeus-hospitality.quip.com/f7piA6DQLvIM/Time-to-Revenue"},"destinationType":"url","fontSize":10,"includeState":false,"text":"Quip - TTR Documentation","textAlignment":"center","textColor":"#38E6E7"},"type":"link"},"link_6":{"parameters":{"destinationLink":{"name":"ecf0796d-fd03-4cab-b9a7-8804cff614b0"},"destinationType":"page","fontSize":18,"includeState":false,"text":"Time to Revenue (All)","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"table_8":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"Restart__Calendar_Da_2","totals":true,"verticalPadding":8},"type":"table"},"table_9":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":false},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12,"textWrap":false},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"Service__Efficiency__1","totals":true,"verticalPadding":8},"type":"table"},"container_34":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_33":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_32":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_30":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"text_58":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Definition:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_57":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#091A3E"},"insert":"Time to Revenue (All)"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_59":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Median # of days contract received to completion (all domains)\nA Measurement of efficiency from Opportunity Close Won_Open to Subscription Activation."},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_54":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Filtering & Grouping Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_53":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Milestones_with_Activity_Line_Info:\nfilter by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\nfilter by 'pse__Status__c' in [\"Approved\", \"Canceled\", \"Draft/Tentative\", \"Escalate to Sales\", \"Open\", \"Submitted\"];\nfilter by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"];\nfilter by 'pse__Target_Date__c_day_epoch' != 20453;\n\nSubscription_Activations_and_Transactions:\nfilter by 'Status__c' == \"Live\";\nfilter by date('Date__c_Year', 'Date__c_Month', 'Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\n\nCogrouped by  Milestones_with_Activity_Line_Info\nby ('pse__Project__c') , Subscription_Activations_and_Transactions by ('pse__Project__c');\n\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_56":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"min(Mil.'pse__Target_Date__c_day_epoch') as 'MinTargetDate'\nmin(Sub.'Date__c_day_epoch') as 'MinSubDate'\nmin(Sub.'Date__c_sec_epoch') as 'Date'\ntoString(toDate(min(result2.'Date')),\"yyyy-MM\") as 'Live_Date'\n min('MinSubDate') as 'Median_Sub'\n min('MinTargetDate') as 'Median_Target'\n min('MinTargetDate') - min('MinSubDate') as 'Duration'\nmedian('Duration') as 'Milestone_to_Subscription'\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_55":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Calculation(s):"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_50":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"S&C – A Measurement of efficiency from the first Consulting milestone to the first Subscription Activation Transaction.\nSO - A Measurement of efficiency from the first Database Set-up to the first Subscription Activation Transaction\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_52":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Data Set(s) Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"container_1":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"text_51":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Milestone_with_Activity_Line_Info\nSubscription_Activations_and_Transactions"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"container_2":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_3":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_4":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_5":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_6":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_7":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_8":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_9":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_9":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"logowhiteJPG10","namespace":""}},"type":"image"},"chart_20":{"parameters":{"autoFitMode":"keepLabels","showPoints":true,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"line","dashLine":{"measures":"","showDashLine":false},"exploreLink":true,"title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Milestone to Subscription","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"fillArea":true,"showActionMenu":true,"showZero":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration Days","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","step":"Delivery_Efficiency__1","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Subscription Live Date (Year/Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""}},"type":"chart"},"image_8":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"stretch","image":{"name":"betapng5png","namespace":""}},"type":"image"},"filterpanel_2":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Region.Name"}],"showAllFilters":false},"type":"filterpanel"},"text_47":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"toString(toDate(min(q1.'A')),\"yyyy-MM\") as 'Target_Date'\ntoString(toDate(min(q1.'A')),\"yyyy\") as 'Target_DateY'\ntoString(toDate(min(q1.'A')),\"yyyy\") as 'Target_Datex'\ncase when (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))end) <0\nthen (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))\nelse (case when max(q2.'CreatedDate_sec_epoch') > last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')\n then (floor(daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(max(q2.'CreatedDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end)) else (floor(daysBetween(toDate (last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) / 7) * 5) + ((case \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 0 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 5 when 5 then 5 when 6 then 5 else 1 end)\nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 1 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 4 when 4 then 4 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 2 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 3 when 3 then 3 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 3 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 2 when 2 then 2 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 4 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 1 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 5 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 0 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 else 0 end) \nwhen daysBetween(toDate(\"1900-01-08\", \"yyyy-MM-dd\"), toDate(min(q1.'pse__Target_Date__c_sec_epoch'))) % 7 == 6 then (case (daysBetween(toDate(last(q1.'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch')), toDate(min(q1.'pse__Target_Date__c_sec_epoch')))% 7)when 1 then 1 when 2 then 2 when 3 then 3 when 4 then 4 when 5 then 5 when 6 then 5 else 0 end) \nelse 999 end))end) end as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\nunique('pse__Project__c.Name') as '# of Unique Projects'\nmedian('Opp Close Won/Project Restart_to_Milestone Target - Business Days') as 'Opp Close Won/Project Restart_to_Milestone Target - Business Days'\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_46":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Calculation(s) Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_49":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Definition:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_48":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#091A3E"},"insert":"Delivery Efficiency"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_43":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Data Set(s) Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_42":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Milestone_with_Activity_Line_Info\nProject_History\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_45":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Filtering & Grouping Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_44":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Filter(s):\n'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\"];\ndate('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day') in [\"1 fiscal_year ago\"..\"current day\"];\n'pse__Project__c.pse__Project_Type__c' == \"Customer Project\";\n'pse__Project__c.pse__Opportunity__c.StageName' == \"Closed Won\";\n'pse__Target_Date__c_day_epoch' != 20453;\n'Practice.Name' == \"Consulting\";\n'pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch' != 0;\n'Field' == \"pse__Stage__c\";\n'OldValue' == \"On Hold\";\n'NewValue' == \"In Progress\";\n'Target_DateY' in all;\n'Target_Date' in all;\n'Target_Datex' in all;\nGrouping(s):\ncogroup Milestones_with_Activity_Line_Info by ('pse__Project__c.pse__Opportunity__c.Opportunity_Number__c','pse__Project__c.Name') left, Project_History by ('Project.Opportunity_Number__c','Project.Name');\n'Target_Date';\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_41":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Contract received to forms received (GMS, RES, BI, PMS)\nContract received to configuration (SO)\nContract received to beginning of Consultation (S&E)\nA Measurement of the effectiveness of project scheduling from Project Creation to Leading Milestone Service."},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_40":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#091A3E"},"insert":"Customer Efficiency & Aggregate Readiness"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"image_1":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"fitwidth","image":{"name":"amadeus_whitepng10","namespace":""}},"type":"image"},"chart_17":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["Opp Close Won/Project Restart_to_Milestone Target - Business Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["MilestoneType"]}}},"visualizationType":"vbar","exploreLink":true,"title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"binValues":false,"showActionMenu":false,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"bluegrassDark","step":"Capacity_Lead_Time___8","compactDecimalDigits":-1,"applyConditionalFormatting":true,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"},"chart_16":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","exploreLink":true,"title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Project Creation to Milestone Target ","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"# of Unique Projects","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","step":"Capacity_Lead_Time___4","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Milestone Target (Year/Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"image_3":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"fitheight","image":{"name":"computerlabsignunder_construction_s","namespace":""}},"type":"image"},"chart_15":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["Milestone_to_Subscription - Business_Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Milestone_Type__c"]}}},"visualizationType":"vbar","exploreLink":true,"title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"binValues":false,"columnMap":{"trellis":[],"dimensionAxis":["Milestone_Type__c"],"plots":["Milestone_to_Subscription - Business_Days","count"]},"showActionMenu":false,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"bluegrassDark","step":"Delivery_Efficiency__3","compactDecimalDigits":-1,"applyConditionalFormatting":true,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"},"chart_14":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["ProjectCreation_to_MilestoneCreation - Business Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Milestone_Type__c"]}}},"visualizationType":"vbar","exploreLink":true,"title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"binValues":false,"showActionMenu":false,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"bluegrassDark","step":"Scheduling_Efficienc_5","compactDecimalDigits":-1,"applyConditionalFormatting":true,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"},"chart_13":{"parameters":{"showPoints":true,"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"line","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"TC- Median Duration - Milestone to Subscription","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showZero":true,"valueType":"compactNumber","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Subscription Live Date (Year-Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""},"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"dashLine":{"measures":"","showDashLine":false},"fillArea":true,"columnMap":{"split":[],"trellis":[],"dimensionAxis":["Live_Date"],"plots":["Milestone_to_Subscription - Business Days"]},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"step":"TC__Delivery_Efficie_1","compactDecimalDigits":-1},"type":"chart"},"chart_12":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"Project \"Start\" to Forms Received Milestone","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","valueTypeOnLine":"compactNumber","theme":"wave","step":"TC___Opp_close_to_Fo_1","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Actual Date (Year-Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"chart_11":{"parameters":{"autoFitMode":"keepLabels","centerText":"Goal < 60","legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":true},"showMeasureTitle":true,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["OppCloseWon_to_SubLiveDate - Business Days"],"showNullValues":true,"customizeLegend":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":["Live_DateY"]}}},"visualizationType":"pie","exploreLink":true,"title":{"fontSize":18,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"inner":50,"showActionMenu":false,"centerValueType":"text","valueType":"compactNumber","theme":"bluegrassDark","step":"Services_Efficiency__1","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"},"chart_10":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","exploreLink":true,"title":{"fontSize":16,"subtitleFontSize":11,"label":"Project \"Start\" to Subscription Live Date","align":"center","subtitleLabel":"Note: Hilton & IHG projects are not included in this data based on how duration is calculated."},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"referenceLines":[{"label":{"data":"Goal < 60","type":"static"},"value":{"data":"60","type":"static"}}],"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","step":"Project_Start_to_Sub_1","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Subscription Live Date (Year-Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"chart_30":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"bottom-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","exploreLink":true,"title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Subscription","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","step":"lens_4","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"text_39":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#091A3E"},"insert":"Scheduling Efficiency"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_36":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"unique('Project.Name') as 'Project.Name'\n\nmedian(q.'CreatedDate_day_epoch') - median(q.'Opportunity.CloseDate_day_epoch') as 'OppCloseWon_to_ProjectCloseDate'\n\nsum('Project.Name') as '# of Projects'\n\nmedian('OppCloseWon_to_ProjectCloseDate') as 'OppCloseWon_to_ProjectCloseDate'\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_35":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Filtering & Grouping Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_38":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"min('pse__Project__c.pse__Opportunity__c.CloseDate_sec_epoch') as 'Opp_Date'\nmax('CreatedDate_day_epoch') as 'Milestone_CreateDate'\nmax('CreatedDate_sec_epoch') as 'Create_Date'\nmedian('Project_Create_Date') - median('Opportunity_CloseWon') as 'OppCloseWon_to_ProjectCreate',\nmedian('Project_StartDate')  - median('Project_Create_Date') as 'ProjectCreate_to_ProjectStartDate',\nmax('Milestone_CreateDate') - median('Project_StartDate') as 'ProjectStartDate_to_MilestoneCreation',\nmax('Milestone_CreateDate') - median('Project_Create_Date') as 'ProjectCreation_to_MilestoneCreation',\nmax('Milestone_CreateDate') - median('Opportunity_CloseWon') as 'OppCloseWon_to_MilestoneCreation'\nmedian('OppCloseWon_to_ProjectCreate') as 'OppCloseWon_to_ProjectCreate' ,\nmedian('ProjectCreate_to_ProjectStartDate') as 'ProjectCreate_to_ProjectStartDate',\nmedian('ProjectStartDate_to_MilestoneCreation') as 'ProjectStartDate_to_MilestoneCreation',\nmedian('ProjectCreation_to_MilestoneCreation') as 'ProjectCreation_to_MilestoneCreation',\nmedian('OppCloseWon_to_MilestoneCreation') as 'OppCloseWon_to_MilestoneCreation'\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_37":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Calculation(s):"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_32":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Milestone_with_Activity_Line_Info\nMilestoneHistory"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_31":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Definition:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_34":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Milestone_with_Activity_Line_Info:\nfilter by 'Milestone_Type__c' in [\"Billable Milestone\", \"Hourly Milestone\", \"Stale\"];\nfilter by date('pse__Target_Date__c_Year', 'pse__Target_Date__c_Month', 'pse__Target_Date__c_Day')in [\"1 fiscal_year ago\"..\"current day\"]\n\nMilestoneHistory:\nfilter by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"1 fiscal_year ago\"..\"current day\"];\nfilter by 'Field' == \"pse__Target_Date__c\";\n\nCogroup Milestone_with_Activity_Line_Info by ('Record.Id'), MilestoneHistory by ('Parent.Id')"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_33":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Data Set(s) Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"filterpanel_9":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Subscription_Activations_and_Transactions"},"field":"SubscriptionActivation.Opportunity_Name_Formula__c"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_8":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Group.Name"}],"showAllFilters":false},"type":"filterpanel"},"text_30":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"A Measurement of the efficiency from Project Creation to Milestone Creation "},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"filterpanel_7":{"parameters":{"filterItemOptions":{"propertyColor":"#091A3E","valueColor":"#091A3E"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Region.Name"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_5":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Subscription_Activations_and_Transactions"},"field":"SubscriptionActivation.Product_Line__c"}],"showAllFilters":false},"type":"filterpanel"},"filterpanel_3":{"parameters":{"filterItemOptions":{"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[{"dataset":{"name":"Milestones_with_Activity_Line_Info"},"field":"Group.Name"}],"showAllFilters":false},"type":"filterpanel"},"chart_27":{"parameters":{"autoFitMode":"keepLabels","showPoints":true,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"line","dashLine":{"measures":"","showDashLine":false},"exploreLink":true,"title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Subscription","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"fillArea":true,"showActionMenu":true,"showZero":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration Days","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","step":"Service___ASEM_Only_1","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Opportunity Close Won (Year/Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""}},"type":"chart"},"chart_24":{"parameters":{"autoFitMode":"keepLabels","stack":false,"showPoints":true,"compactDecimalDigitsOnLine":-1,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"combo","missingValue":"connect","exploreLink":true,"title":{"fontSize":16,"subtitleFontSize":11,"label":"Median Duration - Opportunity Close Won to Project Close","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"Median Duration (days)","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"# of Unique Projects","customDomain":{"showDomain":false}},"valueType":"none","valueTypeOnLine":"compactNumber","theme":"wave","step":"lens_3","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"Project Close Date (Year/Month)","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"text_29":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"24px","color":"#091A3E"},"insert":"Scheduling Efficiency"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"listselector_3":{"parameters":{"compact":false,"displayMode":"filter","displayTemplate":"[]","exploreLink":false,"filterStyle":{"titleColor":"#091A3E","valueColor":"#091A3E"},"instant":true,"showActionMenu":false,"step":"static_2","title":"Product Codes"},"type":"listselector"},"text_28":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Calculation(s):"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"listselector_2":{"parameters":{"compact":false,"displayMode":"filter","displayTemplate":"[]","exploreLink":false,"filterStyle":{"titleColor":"#54698D","valueColor":"#16325C"},"instant":true,"measureField":"none","showActionMenu":false,"step":"Filter_By_Month_1","title":"Time Period"},"type":"listselector"},"listselector_5":{"parameters":{"compact":false,"displayMode":"filter","exploreLink":false,"filterStyle":{"titleColor":"#54698D","valueColor":"#16325C"},"instant":true,"measureField":"none","showActionMenu":false,"step":"lens_17","title":"Time Period"},"type":"listselector"},"text_25":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Filtering & Grouping Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_24":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Dates - The charts/tables are filtered by Project Close Year/Month across the x- axis. In addition, the bin (or grouping) values are based on Project Close Year/Month.\n\nProject_History.Project_End_Date – filtered to not include (‘!=’) epoch date 20453 (12/31/2025) to exclude data not started or in backlog.\n\nProject_History.Project_End_Date - filtered to by greater than > 0 (zero) ensure the project is active.\n\nProject_History.Field - filtered to equal (==) to \"pse__Stage__c\".\n\nProject_History.NewValue - filtered to in [\"Completed\", \"Project Closing\"].\n\nProject_History.OldValue equal (==) to “In Progress\".\n\nGouped by ('CreatedDate_Year', 'CreatedDate_Month','Project.Opportunity_Number__c','Project.Name')\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_27":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"unique('Project.Name') as 'Project.Name'\n\nmedian('CreatedDate_day_epoch') - median('Opportunity.CloseDate_day_epoch') as 'OppCloseWon_to_ProjectCloseDate'\n\nsum('Project.Name') as '# of Projects'\n\nmedian('OppCloseWon_to_ProjectCloseDate') as 'OppCloseWon_to_ProjectCloseDate'\n"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_26":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Advanced Interaction(s) Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_21":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Definition:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_20":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"A Measurement of the efficiency from Opportunity Close Won _ Open to Project Closing date(Status changed from In Progress to Complete/Project Closing). "},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_23":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Data Set(s) Used:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":false},"type":"text"},"text_22":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Project_History"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"chart_39":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnMap":{"trellis":[],"dimensionAxis":["pse__Target_Date__c_Year","Practice.Name"],"plots":["Median_Business_Days","Median_Calendar_Days","# of Projects w/ Duration > 260 Days","# of Unique Projects","% of Projects > 260 Days"]},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","step":"lens_8","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"chart_38":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"bottom-center","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","step":"lens_6","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"},"listselector_1":{"parameters":{"compact":false,"displayMode":"filter","exploreLink":false,"filterStyle":{"titleColor":"#54698D","valueColor":"#16325C"},"instant":true,"showActionMenu":false,"step":"Filter_by_Date_XX_1","title":"Date"},"type":"listselector"}}}