{"dataSourceLinksInfo":{"enableAutomaticLinking":false,"excludeRelationships":[],"links":[]},"filters":[],"gridLayouts":[{"maxWidth":1450,"name":"Default","numColumns":44,"pages":[{"label":"S2S Trial Balance","name":"p_trial_balance","navigationHidden":false,"widgets":[{"colspan":6,"column":35,"name":"ls_company","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":44,"column":0,"name":"c_info","row":10,"rowspan":4,"widgetStyle":{"backgroundColor":"#001668","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":8,"name":"ls_year","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":13,"name":"ls_period","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":42,"column":1,"name":"tb_trial_balance","row":19,"rowspan":156,"widgetStyle":{"borderEdges":[]}},{"colspan":44,"column":0,"name":"c_header","row":0,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(215, 224, 233)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":42,"name":"ln_help","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(51, 87, 121)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":4,"borderWidth":1}},{"colspan":7,"column":0,"name":"t_title","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"rgb(158, 169, 179)","borderEdges":["right"],"borderRadius":0,"borderWidth":1}},{"colspan":42,"column":1,"name":"i_financialforce_logo","row":176,"rowspan":4,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom","top"],"borderRadius":0,"borderWidth":1}},{"colspan":44,"column":0,"name":"t_header_page_1","row":10,"rowspan":4,"widgetStyle":{"backgroundColor":"#001668","borderColor":"rgb(158, 169, 179)","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":22,"column":0,"name":"ln_summary_page_1","row":6,"rowspan":4,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":22,"column":22,"name":"ln_details_page_1","row":6,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(237, 241, 245)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":42,"column":1,"name":"c_drill","row":16,"rowspan":3,"widgetStyle":{"backgroundColor":"#E6ECF2","borderColor":"#C6D3E1","borderEdges":["left","top","right"],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":41,"name":"i_drill_page_1","row":16,"rowspan":3,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":6,"column":19,"name":"t_pilot","row":180,"rowspan":4,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"rgb(158, 169, 179)","borderEdges":[],"borderRadius":0,"borderWidth":1}}]},{"label":"S2S Transaction List","name":"p_transaction_list","navigationHidden":false,"widgets":[{"colspan":44,"column":0,"name":"t_header_page_2","row":10,"rowspan":4,"widgetStyle":{"backgroundColor":"#001668","borderColor":"rgb(158, 169, 179)","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":42,"column":1,"name":"c_drill","row":16,"rowspan":3,"widgetStyle":{"backgroundColor":"#E6ECF2","borderColor":"#C6D3E1","borderEdges":["left","top","right"],"borderRadius":0,"borderWidth":1}},{"colspan":12,"column":16,"name":"t_transaction_details","row":16,"rowspan":3,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":41,"name":"i_drill_page_2","row":16,"rowspan":3,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":42,"column":1,"name":"i_financialforce_logo","row":176,"rowspan":4,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom","top"],"borderRadius":0,"borderWidth":1}},{"colspan":44,"column":0,"name":"c_info","row":10,"rowspan":4,"widgetStyle":{"backgroundColor":"#001668","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":22,"column":22,"name":"ln_details_page_2","row":6,"rowspan":4,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":22,"column":0,"name":"ln_summary_page_2","row":6,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(237, 241, 245)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":44,"column":0,"name":"c_header","row":0,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(215, 224, 233)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":6,"column":35,"name":"ls_company","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":8,"name":"ls_year","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":13,"name":"ls_period","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":2,"column":42,"name":"ln_help","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgb(51, 87, 121)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":4,"borderWidth":1}},{"colspan":7,"column":0,"name":"t_title","row":1,"rowspan":4,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"rgb(158, 169, 179)","borderEdges":["right"],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":8,"name":"t_year_value","row":2,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(237, 239, 241)","borderColor":"rgb(215, 224, 233)","borderEdges":["top"],"borderRadius":0,"borderWidth":8}},{"colspan":4,"column":13,"name":"t_period_value","row":2,"rowspan":3,"widgetStyle":{"backgroundColor":"rgb(237, 239, 241)","borderColor":"rgb(215, 224, 233)","borderEdges":["top"],"borderRadius":0,"borderWidth":8}},{"colspan":6,"column":35,"name":"t_company_value","row":3,"rowspan":2,"widgetStyle":{"backgroundColor":"rgb(237, 239, 241)","borderColor":"rgba(237, 239, 241, 0)","borderEdges":[],"borderRadius":0,"borderWidth":8}},{"colspan":4,"column":8,"name":"t_year_layer","row":1,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":4,"column":13,"name":"t_period_layer","row":1,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":6,"column":35,"name":"t_company_layer","row":1,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"rgb(237, 239, 241)","borderEdges":["bottom"],"borderRadius":0,"borderWidth":4}},{"colspan":42,"column":1,"name":"tb_transaction_list","row":19,"rowspan":156,"widgetStyle":{"borderEdges":[]}},{"colspan":6,"column":19,"name":"t_pilot","row":180,"rowspan":4,"widgetStyle":{"backgroundColor":"rgba(255, 255, 255, 0)","borderColor":"rgb(158, 169, 179)","borderEdges":[],"borderRadius":0,"borderWidth":1}}]}],"rowHeight":"fine","selectors":[],"style":{"alignmentX":"left","alignmentY":"top","backgroundColor":"#FFFFFF","cellSpacingX":0,"cellSpacingY":0,"fit":"original","gutterColor":"rgb(215, 224, 233)"},"version":1.0}],"layouts":[],"steps":{"s_year_with_period":{"broadcastFacet":false,"datasets":[{"name":"FinancialTransactions1"}],"isGlobal":false,"query":{"query":"{\"measures\":[[\"count\",\"*\"]],\"groups\":[\"PeriodYearPeriod\"],\"filters\":[[\"PeriodYearName\",\"{{ cell(s_year.selection, 0, \\\"PeriodYearName\\\").asString() }}\",\"in\"],[\"PeriodNumber\",\"{{ cell(s_period.selection, 0, \\\"PeriodNumber\\\").asString() }}\",\"in\"]]}","version":-1.0},"receiveFacetSource":{"mode":"none","steps":[]},"selectMode":"none","type":"aggregateflex","useGlobal":false,"visualizationParameters":{}},"s_company":{"broadcastFacet":true,"datasets":[{"name":"FinancialTransactions1"}],"isGlobal":false,"query":{"query":"{\"measures\":[],\"groups\":[\"CompanyName\"]}","version":-1.0},"receiveFacetSource":{"mode":"none","steps":[]},"selectMode":"singlerequired","start":"Newmarket US","type":"aggregateflex","useGlobal":false,"visualizationParameters":{}},"s_trial_balance":{"broadcastFacet":false,"groups":[],"numbers":[],"query":"q = load \"FinancialTransactions1\";\ng = filter q by ('GeneralLedgerAccountType' in [\"Profit and Loss\"] && 'PeriodYearPeriodNumber' >= {{ column(s_period_001.result, [\"PeriodYearPeriodNumber\"]).asObject() }}) || 'GeneralLedgerAccountType' in [\"Balance Sheet\"];\ng_A = filter g by 'PeriodYearPeriodNumber' < {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }};\ng_B = filter g by 'ValueHome' >= 0 && 'PeriodYearPeriodNumber' == {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }};\ng_C = filter g by 'ValueHome' <= 0 && 'PeriodYearPeriodNumber' == {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }};\ng_D = filter g by 'PeriodYearPeriodNumber' == {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }};\ng_E = filter g by 'PeriodYearPeriodNumber' <= {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }};\nglas_grouping = group g_A by ('GeneralLedgerAccountName', 'ReportingCode') full, g_B by ('GeneralLedgerAccountName', 'ReportingCode') full, g_C by ('GeneralLedgerAccountName', 'ReportingCode') full, g_D by ('GeneralLedgerAccountName', 'ReportingCode') full, g_E by ('GeneralLedgerAccountName', 'ReportingCode');\nglas = foreach glas_grouping generate coalesce(g_A.'GeneralLedgerAccountName', g_B.'GeneralLedgerAccountName', g_C.'GeneralLedgerAccountName', g_D.'GeneralLedgerAccountName', g_E.'GeneralLedgerAccountName') as 'GeneralLedgerAccountName', coalesce(g_A.'ReportingCode', g_B.'ReportingCode', g_C.'ReportingCode', g_D.'ReportingCode', g_E.'ReportingCode') as 'ReportingCode', coalesce(round(sum(g_A.'ValueHome'), 0), 0) as 'Period Open (f)', coalesce(round(sum(g_B.'ValueHome'), 0), 0) as 'Period Debits (f)', coalesce(round(sum(g_C.'ValueHomeReversed'), 0), 0) as 'Period Credits (f)', coalesce(round(sum(g_D.'ValueHome'), 0), 0) as 'Period Net (f)', coalesce(round(sum(g_E.'ValueHome'), 0), 0) as 'Period Close (f)';\nglas_data = foreach glas_grouping generate coalesce(g_A.'GeneralLedgerAccountName', g_B.'GeneralLedgerAccountName', g_C.'GeneralLedgerAccountName', g_D.'GeneralLedgerAccountName', g_E.'GeneralLedgerAccountName') as 'GeneralLedgerAccountName', coalesce(g_A.'ReportingCode', g_B.'ReportingCode', g_C.'ReportingCode', g_D.'ReportingCode', g_E.'ReportingCode') as 'ReportingCode', coalesce(sum(g_A.'ValueHome'), 0) as 'Period Open (f)', coalesce(sum(g_B.'ValueHome'), 0) as 'Period Debits (f)', coalesce(sum(g_C.'ValueHomeReversed'), 0) as 'Period Credits (f)', coalesce(sum(g_D.'ValueHome'), 0) as 'Period Net (f)', coalesce(sum(g_E.'ValueHome'), 0) as 'Period Close (f)', 0 as 'SummaryType';\nsummary = group glas_data by 'GeneralLedgerAccountName';\nsummary = foreach summary generate \"All GLAs\" as 'GeneralLedgerAccountName', coalesce(round(sum(sum('Period Open (f)')) over([..] partition by 'all'), 0), 0) as 'Period Open (f)', coalesce(round(sum(sum('Period Debits (f)')) over([..] partition by 'all'), 0), 0) as 'Period Debits (f)', coalesce(round(sum(sum('Period Credits (f)')) over([..] partition by 'all'), 0), 0) as 'Period Credits (f)', coalesce(round(sum(sum('Period Net (f)')) over([..] partition by 'all'), 0), 0) as 'Period Net (f)', coalesce(round(sum(sum('Period Close (f)')) over([..] partition by 'all'), 0), 0) as 'Period Close (f)', 1 as 'SummaryType';\nsummary = limit summary 1;\nglas = union glas, summary;\nequity_no_values = group glas by 'GeneralLedgerAccountName';\nequity_no_values = foreach g generate \"Equity\" as 'GeneralLedgerAccountName', 0 as 'Period Open (f)', 0 as 'Period Debits (f)', 0 as 'Period Credits (f)', 0 as 'Period Net (f)', 0 as 'Period Close (f)', 1 as 'SummaryType', 0 as 'Period Open (f) abs', 0 as 'Period Debits (f) abs', 0 as 'Period Credits (f) abs', 0 as 'Period Net (f) abs', 0 as 'Period Close (f) abs';\nequity_no_values = limit equity_no_values 1;\ne = filter q by ('GeneralLedgerAccountType' in [\"Profit and Loss\"] && 'PeriodYearPeriodNumber' < {{ column(s_period_000.result, [\"PeriodYearPeriodNumber\"]).asObject() }}) || ('GeneralLedgerAccountType' in [\"Retained Earnings\"] && 'PeriodYearPeriodNumber' <= {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }});\ne_A = filter e by 'PeriodYearPeriodNumber' < {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }};e_B = filter e by 'ValueHome' >= 0 && 'PeriodYearPeriodNumber' == {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }};\ne_C = filter e by 'ValueHome' <= 0 && 'PeriodYearPeriodNumber' == {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }};\ne_D = filter e by 'PeriodYearPeriodNumber' == {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }};\ne_E = filter e by 'PeriodYearPeriodNumber' <= {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }};\nequity = group e_A by all full, e_B by all full, e_C by all full, e_D by all full, e_E by all;equity = foreach equity generate \"Equity\" as 'GeneralLedgerAccountName', coalesce(sum(e_A.'ValueHomeReversed'), 0) as 'Period Open (f)', coalesce(sum(e_B.'ValueHomeReversed'), 0) as 'Period Debits (f)', coalesce(sum(e_C.'ValueHomeReversed'), 0) as 'Period Credits (f)', coalesce(sum(e_D.'ValueHomeReversed'), 0) as 'Period Net (f)', coalesce(sum(e_E.'ValueHomeReversed'), 0) as 'Period Close (f)', 1 as 'SummaryType', abs(coalesce(sum(e_A.'ValueHomeReversed'), 0)) as 'Period Open (f) abs', abs(coalesce(sum(e_B.'ValueHomeReversed'), 0)) as 'Period Debits (f) abs', abs(coalesce(sum(e_C.'ValueHomeReversed'), 0)) as 'Period Credits (f) abs', abs(coalesce(sum(e_D.'ValueHomeReversed'), 0)) as 'Period Net (f) abs', abs(coalesce(sum(e_E.'ValueHomeReversed'), 0)) as 'Period Close (f) abs';\nequity = union equity, equity_no_values;\nequity = order equity by ('Period Open (f) abs' desc, 'Period Debits (f) abs' desc, 'Period Credits (f) abs' desc, 'Period Net (f) abs' desc, 'Period Close (f) abs' desc);\nequity = limit equity 1;;\nresult = union glas, equity;\ntotal = group summary by 'all', equity by 'all';\ntotal = foreach total generate \"Report Total\" as 'GeneralLedgerAccountName', round(coalesce(sum(summary.'Period Open (f)'), 0) - coalesce(sum(equity.'Period Open (f)'), 0), 0) as 'Period Open (f)', round(coalesce(sum(summary.'Period Debits (f)'), 0) - coalesce(sum(equity.'Period Debits (f)'), 0), 0) as 'Period Debits (f)', round(coalesce(sum(summary.'Period Credits (f)'), 0) - coalesce(sum(equity.'Period Credits (f)'), 0), 0) as 'Period Credits (f)', round(coalesce(sum(summary.'Period Net (f)'), 0) - coalesce(sum(equity.'Period Net (f)'), 0), 0) as 'Period Net (f)', round(coalesce(sum(summary.'Period Close (f)'), 0) - coalesce(sum(equity.'Period Close (f)'), 0), 0) as 'Period Close (f)', 2 as 'SummaryType';\nresult = union result, total;result = foreach result generate 'GeneralLedgerAccountName' as 'GeneralLedgerAccountName', 'ReportingCode' as 'ReportingCode', 'Period Open (f)' as 'Period Open (f)', 'Period Debits (f)' as 'Period Debits (f)', 'Period Credits (f)' as 'Period Credits (f)', 'Period Net (f)' as 'Period Net (f)', 'Period Close (f)' as 'Period Close (f)', 'SummaryType' as 'SummaryType';","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":false,"visualizationParameters":{}},"s_period_000":{"broadcastFacet":false,"groups":[],"label":"","numbers":[],"query":"q = load \"FinancialTransactions1\";\nq = filter q by 'PeriodYearNumber' == {{ cell(s_year.selection, 0, \"PeriodYearName\").asString() }};\nq = foreach q generate q.PeriodYearName + \"000\" as 'PeriodYearPeriodNumber';\nq = order q by 'PeriodYearPeriodNumber' desc;\nq = limit q 1;","receiveFacetSource":{"mode":"none","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":false,"visualizationParameters":{}},"s_period_001":{"broadcastFacet":false,"groups":[],"label":"","numbers":[],"query":"q = load \"FinancialTransactions1\";\nq = filter q by 'PeriodYearNumber' == {{ cell(s_year.selection, 0, \"PeriodYearName\").asString() }};\nq = foreach q generate q.PeriodYearName + \"001\" as 'PeriodYearPeriodNumber';\nq = order q by 'PeriodYearPeriodNumber' desc;\nq = limit q 1;","receiveFacetSource":{"mode":"none","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":false,"visualizationParameters":{}},"s_period":{"broadcastFacet":false,"datasets":[{"name":"FinancialTransactions1"}],"isGlobal":false,"query":{"query":"{\"measures\":[],\"groups\":[\"PeriodNumber\"],\"filters\":[[\"PeriodYearName\",\"{{ coalesce(column(s_year.selection, [\\\"PeriodYearName\\\"]), cell(s_year.result, 0, \\\"PeriodYearName\\\")).asObject() }}\",\"in\"]]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"singlerequired","type":"aggregateflex","useGlobal":false,"visualizationParameters":{}},"s_gla_drill":{"broadcastFacet":false,"groups":[],"label":"s_gla_drill","numbers":[],"query":"q = load \"FinancialTransactions1\";q = group q by 'GeneralLedgerAccountName';q = foreach q generate (case when \"{{ coalesce(cell(s_trial_balance.selection, 0, \"GeneralLedgerAccountName\"), \"\").asString() }}\" != \"\" && \"{{ coalesce(cell(s_trial_balance.selection, 0, \"GeneralLedgerAccountName\"), \"\").asString() }}\" != \"All GLAs\" then \"{{ cell(s_trial_balance.selection, 0, \"GeneralLedgerAccountName\").asString() }}\" else 'GeneralLedgerAccountName' end) as 'GeneralLedgerAccountName';q = filter q by {{ column(s_trial_balance.result, [\"GeneralLedgerAccountName\"]).asEquality(\"GeneralLedgerAccountName\") }};q = group q by 'GeneralLedgerAccountName';q = foreach q generate 'GeneralLedgerAccountName' as 'GeneralLedgerAccountName';","receiveFacetSource":{"mode":"none","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":false,"visualizationParameters":{}},"s_year":{"broadcastFacet":false,"groups":[],"label":"s_year","numbers":[],"query":"q = load \"FinancialTransactions1\";q = group q by 'PeriodYearName';q = foreach q generate 'PeriodYearName' as 'PeriodYearName';\nq = order q by 'PeriodYearName' desc;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"singlerequired","strings":[],"type":"saql","useGlobal":false,"visualizationParameters":{}},"s_reporting_code_drill":{"broadcastFacet":false,"groups":[],"label":"s_reporting_code_drill","numbers":[],"query":"q = load \"FinancialTransactions1\";q = group q by 'ReportingCode';q = foreach q generate (case when \"{{ coalesce(cell(s_trial_balance.selection, 0, \"ReportingCode\"), \"\").asString() }}\" != \"\" && \"{{ coalesce(cell(s_trial_balance.selection, 0, \"ReportingCode\"), \"\").asString() }}\" != \"All GLAs\" then \"{{ cell(s_trial_balance.selection, 0, \"ReportingCode\").asString() }}\" else 'ReportingCode' end) as 'ReportingCode';q = filter q by {{ column(s_trial_balance.result, [\"ReportingCode\"]).asEquality(\"ReportingCode\") }};q = group q by 'ReportingCode';q = foreach q generate 'ReportingCode' as 'ReportingCode';","receiveFacetSource":{"mode":"none","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":false,"visualizationParameters":{}},"s_transaction_list":{"broadcastFacet":false,"groups":[],"label":"s_transaction_list","numbers":[],"query":"q = load \"FinancialTransactions1\";\nq = filter q by 'CompanyName' == \"{{ coalesce(cell(s_company.selection, 0, \"CompanyName\"), 0).asString() }}\" && 'PeriodYearPeriodNumber' == {{ coalesce(column(s_year_with_period.result, [\"PeriodYearPeriod\"]), 0).asObject() }} && {{ column(s_gla_drill.result, [\"GeneralLedgerAccountName\"]).asEquality(\"GeneralLedgerAccountName\") }} && {{ column(s_reporting_code_drill.result, [\"ReportingCode\"]).asEquality(\"ReportingCode\") }};\nq = foreach q generate 'GeneralLedgerAccountName' as 'GeneralLedgerAccountName', 'PeriodYearPeriod' as 'PeriodYearPeriod', 'TransactionDate' as 'Transaction Date', 'TransactionLineDescription' as 'TransactionLineDescription', 'CurrencyDocument' as 'CurrencyDocument', 'TransactionDocumentNumber' as 'TransactionDocumentNumber', (case when 'ValueDocument' >= 0 then number_to_string('ValueDocument', \"#,###.00\") else \"0.00\" end) as 'Document Value Debit (f)', (case when 'ValueDocument' <= 0 then number_to_string(abs('ValueDocument'), \"#,###.00\") else \"0.00\" end) as 'Document Value Credit (f)', 'ValueHome' as 'ValueHome (f)', 'ValueDual' as 'ValueDual (f)';\n\nsubtotal_gla = group q by 'GeneralLedgerAccountName';\n\ntotal = group q by all;\ntotal = foreach total generate \"Report Total\" as 'GeneralLedgerAccountName', \"\" as 'PeriodYearPeriod', \"\" as 'Transaction Date', \"\" as 'TransactionLineDescription', \"\" as 'CurrencyDocument', \"\" as 'TransactionDocumentNumber', \"(Mixed Currency)\" as 'Document Value Debit (f)', \"(Mixed Currency)\" as 'Document Value Credit (f)', sum('ValueHome (f)') as 'ValueHome (f)', sum('ValueDual (f)') as 'ValueDual (f)', 1 as 'SummaryType';\n\nq = order q by ('GeneralLedgerAccountName' asc, 'PeriodYearPeriod' asc);\n\nq = union q, total;","receiveFacetSource":{"mode":"none","steps":[]},"selectMode":"none","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{}}},"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1},"widgets":{"ln_details_page_1":{"parameters":{"destinationLink":{"name":"p_transaction_list"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Details","textAlignment":"center","textColor":"#091A3E"},"type":"link"},"ln_summary_page_2":{"parameters":{"destinationLink":{"name":"p_trial_balance"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Summary","textAlignment":"center","textColor":"#091A3E"},"type":"link"},"ln_details_page_2":{"parameters":{"destinationType":"url","fontSize":16,"includeState":false,"text":"Details","textAlignment":"center","textColor":"#091A3E"},"type":"link"},"ln_summary_page_1":{"parameters":{"destinationType":"url","fontSize":16,"includeState":false,"text":"Summary","textAlignment":"center","textColor":"#091A3E"},"type":"link"},"t_title":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Trial Balance"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"c_header":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"c_info":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"i_financialforce_logo":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"fitheight","image":{"name":"ff_logo_color2","namespace":""}},"type":"image"},"t_year_layer":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"20px","color":"#091A3E"},"insert":""},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"tb_trial_balance":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#FFFFFF","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":["GeneralLedgerAccountName","ReportingCode","Period Open (f)","Period Debits (f)","Period Credits (f)","Period Net (f)","Period Close (f)"],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"s_trial_balance","totals":true,"verticalPadding":8},"type":"table"},"t_header_page_1":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"20px","color":"#FFFFFF"},"insert":"Trial Balance: FY {{ column(s_year.selection, [\"PeriodYearName\"]).asObject() }} Period {{ column(s_period.selection, [\"PeriodNumber\"]).asObject() }}"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"t_header_page_2":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#FFFFFF"},"insert":"{{ coalesce(cell(s_trial_balance.selection, 0, \"GeneralLedgerAccountName\"), \"All GLAs\").asString() }}"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"i_drill_page_2":{"parameters":{"alignmentX":"center","alignmentY":"top","fit":"fitheight","image":{"name":"resolvedependency3xpng2","namespace":""},"tooltip":"Hover over a Transaction Document Number to drill down into the source document."},"type":"image"},"t_period_layer":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"20px","color":"#091A3E"},"insert":""},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"t_transaction_details":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"18px","color":"#091A3E"},"insert":"Transaction Details"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"t_company_value":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"12px","color":"#7D98B3"},"insert":"{{ column(s_company.selection, [\"CompanyName\"]).asObject() }}"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"i_drill_page_1":{"parameters":{"alignmentX":"center","alignmentY":"top","fit":"fitheight","image":{"name":"resolvedependency3xpng2","namespace":""},"tooltip":"Drill down into a GLA by selecting a row, then click Details."},"type":"image"},"ln_help":{"parameters":{"destinationLink":{"tooltip":"Help for this page","url":"http://help.financialforce.com/business_analytics/2018.2/Default.htm#cshid=1004"},"destinationType":"url","fontSize":14,"includeState":false,"text":"Help","textAlignment":"center","textColor":"#FFFFFF"},"type":"link"},"ls_period":{"parameters":{"compact":false,"displayMode":"combo","exploreLink":false,"filterStyle":{"titleColor":"#091A3E","valueColor":"#17324D"},"instant":true,"measureField":"none","showActionMenu":false,"step":"s_period","title":"Period"},"type":"listselector"},"ls_year":{"parameters":{"compact":false,"displayMode":"combo","exploreLink":false,"filterStyle":{"titleColor":"#091A3E","valueColor":"#17324D"},"instant":true,"measureField":"none","showActionMenu":false,"step":"s_year","title":"Year"},"type":"listselector"},"c_drill":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"t_pilot":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"14px","color":"#091A3E"},"insert":"Pilot"},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"t_period_value":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"12px","color":"#7D98B3"},"insert":"{{ column(s_period.selection, [\"PeriodNumber\"]).asObject() }}"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"t_year_value":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"12px","color":"#7D98B3"},"insert":"{{ column(s_year.selection, [\"PeriodYearName\"]).asObject() }}"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true,"tooltip":"Test"},"type":"text"},"t_company_layer":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"20px","color":"#091A3E"},"insert":""},{"attributes":{"align":"center"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"ls_company":{"parameters":{"compact":false,"displayMode":"combo","exploreLink":false,"filterStyle":{"titleColor":"#091A3E","valueColor":"#17324D"},"instant":true,"measureField":"none","showActionMenu":false,"step":"s_company","title":"Company"},"type":"listselector"},"tb_transaction_list":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{"Document Value Debit (f)":{"parameters":{"alignment":"right"},"type":"text"},"Document Value Credit (f)":{"parameters":{"alignment":"right"},"type":"text"},"TransactionDocumentNumber":{"parameters":{"alignment":"left","styles":{"bold":true}},"type":"text"}},"columns":["GeneralLedgerAccountName","Transaction Date","TransactionLineDescription","CurrencyDocument","TransactionDocumentNumber","Document Value Debit (f)","Document Value Credit (f)","ValueHome (f)","ValueDual (f)"],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"mode":"fittocontainer","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"step":"s_transaction_list","totals":true,"verticalPadding":8},"type":"table"}}}