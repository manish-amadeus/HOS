<apex:page sidebar="false" standardController="NI_Cancellation__c" Extensions="NI_CancellationChildAccountsController" Showheader="false" tabStyle="NI_Cancellation__c">
  <apex:sectionHeader title="Child Accounts for" subtitle="{!NI_Cancellation__c.Account__r.Name}"/>
  <div style="text-align:center">
      <h5> Select the Accounts you want to create an NI Cancellation record for</h5>
  </div> 
  <apex:pageMessages />
    <script type="text/javascript">
        function selectAllCheckboxes(obj,receivedInputID){
            var inputCheckBox = document.getElementsByTagName("input");
            for(var i=0; i<inputCheckBox.length; i++){
                if(inputCheckBox[i].id.indexOf(receivedInputID)!=-1){
                    inputCheckBox[i].checked = obj.checked;
                }
            }
        }
    </script> 
       <apex:form >
           <apex:pageBlock >      
               <apex:pageBlockButtons location="Top">
                   <apex:commandButton value="Create Cancellation Records " rendered="{!bShowCreate}" action="{!saveSelected}"/>
                   <apex:commandButton value="Cancel" rendered="{!bShowCancel}" onclick="window.close()"/>
                   <apex:commandButton value="Close" rendered="{!bShowClose}" onclick="window.close()"/>               
               </apex:pageBlockButtons>                              
               <apex:pageBlockTable value="{!lstChildAccounts}" var="a" rendered="{!NOT(ISNULL(lstChildAccounts))}">
                   <apex:column >
                       <apex:facet name="header">
                           <apex:outputText value="Select"/> 
                       </apex:facet>
                       <apex:facet name="header">
                            <apex:inputCheckbox onclick="selectAllCheckboxes(this,'inputId')" rendered="{!bShowCreate}"/>
                        </apex:facet>
                       <apex:inputCheckbox value="{!a.isSelected}" id="inputId"/>
                   </apex:column>
                   <apex:column > 
                       <apex:facet name="header">Account Name</apex:facet>
                       <apex:outputLink value="/{!a.di.AccountId}" target="_blank">{!a.di.Account.Name}
                       </apex:outputLink>
                   </apex:column>
                   <apex:column >
                       <apex:facet name="header">Account Number</apex:facet>
                           <apex:outputText value="{!a.di.Account.AccountNumber}"/>
                   </apex:column>
                   <apex:column >
                       <apex:facet name="header">Deployment Instance</apex:facet>
                           <apex:outputText value="{!a.di.Name}"/>
                   </apex:column>
                    <apex:column >
                       <apex:facet name="header">Product Code</apex:facet>
                           <apex:outputText value="{!a.di.Product2.ProductCode}"/>
                   </apex:column>
                    <apex:column >
                       <apex:facet name="header">Product Family</apex:facet>
                           <apex:outputText value="{!a.di.Product2.Family}"/>
                   </apex:column>
                   <apex:column >
                       <apex:facet name="header">Quantity</apex:facet>
                           <apex:outputText value="{!a.di.Quantity}"/>
                   </apex:column>
                   <apex:column >
                     <apex:facet name="header">DI Status</apex:facet>
                         <apex:outputText value="{!a.di.Status}"/>
                   </apex:column>
                                  
          </apex:pageblockTable>
           <!--</apex:pageBlockSection> -->
        </apex:pageblock>  
      </apex:form>        
          
</apex:page>