<apex:page showHeader="false" controller="NI_ICEController" action="{!uploaddocs}" cache="false">

    <apex:composition template="NIVFTemplate">
        
        <apex:define name="body">
        
            <script type="text/javascript">  
                function confirmDelete()
                {
                    alert('callComfirmDelete');
                    callComfirmDelete();
                }
            </script>
            
            <div class="bPageTitle" style="padding-top: 0; text-align: left;">
                <div class="ptBreadcrumb">&nbsp;«&nbsp;<a href="NI_ICE_Home?authkey={!authkey}">Back to Checklist</a></div>
            </div>
            <apex:outputPanel rendered="{!authenticated}" style="text-align: left;">
            
                <h1>Upload Merge Document Templates And Logos</h1>
                <apex:outputPanel rendered="{! !fileuploadlocked}" style="text-align: left;">
                    
                    Here you can upload your contracts BEO and Banquet Check document templates to be upgraded to Delphi.fdc. 
                    <br/>
                    Each of the files must be uploaded separately. After a successful upload you will see each appear in the list below. 
                    <br/>
                    <br/>
                    Please upload only the documents you will be using in Delphi.fdc. 
                    <br/>
                    The maximum file size that can be uploaded is 10 MB. 

                    <br/>
                    <apex:form enctype="multipart/form-data">
                        
                        <div style="margin: 0 600px 0 0px; background: #FFFFFF;">
                            
                            <table>
                                <tr style="background: #DCDCDC;">
                                    <td>
                                        <b>&nbsp;&nbsp;Step 1.</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <b>Property: </b>
                                        <apex:selectList value="{!strProp}" multiselect="false" size="1">
                                            <apex:selectOptions value="{!Items}"/>
                                        </apex:selectList>
                                    </td>
                                </tr>
                                
                                <tr style="background: #DCDCDC;">
                                    <td>
                                        <b>&nbsp;&nbsp;Step 2.</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <b>Document Type: </b>
                                        <apex:selectList value="{!strType}" multiselect="false" size="1">
                                            <apex:selectOptions value="{!Types}"/>
                                        </apex:selectList>                                    
                                    </td>
                                </tr>
                                
                                <tr style="background: #DCDCDC;">
                                    <td>
                                        <b>&nbsp;&nbsp;Step 3.</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <apex:inputFile value="{!uploadeddocbody}" filename="{!uploadeddocname}" id="file" style="width: 500px;" />
                                    </td>
                                </tr>
                                
                                <tr style="background: #DCDCDC;">
                                    <td>
                                        <b>&nbsp;&nbsp;Step 4.</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <apex:commandButton action="{!uploaddocs}" value="Upload File" />
                                        <apex:inputHidden value="{!authkey}"/>
                                    </td>
                                </tr>
                            </table>

                        </div>                        
                        <br/>
                    </apex:form>
                
                </apex:outputPanel>
                
                <apex:outputPanel rendered="{! fileuploadlocked}">
                    Documents, templates and logos upload has been locked on&nbsp;
                    <apex:outputText value="{0, date, MM'/'dd'/'yyyy}">
                        <apex:param value="{!iceSub.ScheduledMigrationDate__c-10}" /> 
                    </apex:outputText>. You can contact us contact us directly at <a href="mailto:Delphi.fdc@Newmarketinc.com">Delphi.fdc@Newmarketinc.com</a> if you need to add some more files.
                </apex:outputPanel>

                <apex:outputPanel rendered="{! uploadeddocssize>0}">
                
                    <div style="border: 0; border-top: #737373 2px dotted; width: 100%; padding: 15px 0; margin: 15px 0 0 30px;">
                    
                        <strong>Documents already uploaded</strong>
                        <br/>
                        <br/>
                
                        <apex:form >
                        
                            <apex:pageBlock >    
                                <apex:pageBlockSection title="Uploaded Files" id="pbS" columns="1" collapsible="false" showHeader="false">
                                    <apex:pageBlockTable value="{!lstAttachments}" var="d" id="pbT" >
                                        
                                        <apex:column headerValue="Action" headerClass="headerStyle" style="text-align: center; width: 100px;">
                                            <apex:commandLink action="{!deletedoc}" value="Delete">
                                                <apex:param name="nickName" value="{!d.Id}" assignTo="{!filetodelete}"/>
                                            </apex:commandLink>
                                        </apex:column>    
                                        
                                        <apex:column headerValue="Document Name">
                                            <apex:outputfield value="{!d.Name}" />
                                        </apex:column>                    
                                        
                                    </apex:pageBlockTable>
                                </apex:pageBlockSection> 
                            </apex:pageBlock>                            
                            
                            
                            <div style="margin: 0 0 0 30px; text-align: left;">
                                <table style="width: 600px; border: 0; margin: 15px 0; border-collapse: collapse; text-align: left;">
                                    <tr>
                                        <td style="text-align: left; vertical-align: middle; width: 100px; padding: 0;">
                                            
                                        </td>
                                        <td style="text-align: left; vertical-align: middle; width: 130px; padding: 0;">
                                            <apex:commandButton action="{!completeuploaddocsstep}" value="Complete This Step" styleClass="formsubmit" />
                                        </td>
                                        <td style="text-align: left; vertical-align: middle; width: 470px; padding: 0 20px;">
                                            When you click Complete This Step this step will be marked as completed. However, if you change your mind, you will be able to add more files until&nbsp;
                                            <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                                <apex:param value="{!iceSub.ScheduledMigrationDate__c-10}" /> 
                                            </apex:outputText> when file upload will be locked.
                                        </td>
                                    </tr>
                                </table>
                            </div>                                
                        </apex:form>
                
                    </div>
                    
                </apex:outputPanel>
                
            </apex:outputPanel>
            <div class="bPageTitle" style="padding-top: 0; text-align: left;">
                <div class="ptBreadcrumb">&nbsp;«&nbsp;<a href="NI_ICE_Home?authkey={!authkey}">Back to Checklist</a></div>
            </div>
            <apex:outputPanel rendered="{! !authenticated}" style="text-align: left;">
                You are not authenticated to view this page. Please contact <a href="mailto:support@newmarketinc.com">support@newmarketinc.com</a> if you are a Newmarket International Inc. customer.
            </apex:outputPanel>
        </apex:define>
        
    </apex:composition>
    
</apex:page>