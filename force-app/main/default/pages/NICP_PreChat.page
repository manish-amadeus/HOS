<apex:page showHeader="false" standardController="User" extensions="NICP_Functions">

    <!-- This script takes the endpoint URL parameter passed from the deployment page and makes it the action for the form -->
    <script type="text/javascript">
        (function() 
        { 
            function handlePageLoad() 
            {
                var endpointMatcher = new RegExp("[\\?\\&]endpoint=([^&#]*)");
                document.getElementById('prechatForm').setAttribute('action', decodeURIComponent(endpointMatcher.exec(document.location.search)[1]));
            } 
            if (window.addEventListener) 
            {
                window.addEventListener('load', handlePageLoad, false);
            } 
            else 
            { 
                window.attachEvent('onload', handlePageLoad, false);
            }
        })();
    </script>
    
    <header>
        <div id="Container">
            <div id="Header">
                <apex:image url="{!$Resource.NILogo2013}" alt="Newmarket Support Live Chat" title="Newmarket Support Live Chat"/>
                <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<h1>Support Live Chat Form</h1>
            </div>
        </div>
    </header>
    <br/>
    <form method='post' id='prechatForm'>

        <!-- Creates an auto-query for a matching Contact recordâ€™s Email field based on the value of the liveagent.prechat:Email field -->    
        <table border="0" width="450px">
            <tr>
                <td width="150px">
                    <b>Your Name: </b>
                </td>
                <td width="300px">
                    <input type='text' size="40" name='liveagent.prechat:Name' id='prechat_field' value='{!$User.FirstName} {!$User.LastName}' />          
                </td>
            </tr>
            <tr>
                <td>
                    <b>Email Address: </b>
                </td>
                <td>
                    <input type='text' size="40" name='liveagent.prechat:Email' width="500" value='{!$User.Email}' />
                </td>
            </tr>
            <tr>
                <td>
                    <b>Property Name: </b>
                </td>
                <td>
                    <input type='text' size="40" name='liveagent.prechat:Account' value='{!getAccountName}' />
                </td>
            </tr>
            <tr>
                <td>
                    
                </td>
                <td align="left">
                    <br/>
                    <input type='submit' value='Request Chat' id='prechat_submit' class="btnClass" />
                </td>
            </tr>
        </table>

        <input type="hidden" name="liveagent.prechat.query:Email" value="Contact,Contact.Email" />         

    </form>

    <style type="text/css">
        .custPopup
        {
            background-color: #EFF5F9;
            border-width: 1px;
            border-style: solid;
            z-index: 9999;
            left: 50%;
            padding:10px;
            position: absolute;
            /* These are the 3 css properties you will need to change so the popup 
            displays in the center of the screen. First set the width. Then set 
            margin-left to negative half of what the width is. You can add 
            the height property for a fixed size pop up if you want.*/
            width: 500px;
            height: 400px;
            margin-left: -250px;
            top:100px;
        }
        .popupBackground
        {
            background-color:black;
            opacity: 0.0;
            filter: alpha(opacity = 0);
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 9998;
        }
        .mpStyle
        {
            width: 100%;
        }
        .mpTrStyle
        {
            background:#DBE7F2;
            height: 50px;
        }
        .mpMsgStyle
        {
            height: 98%;
            word-wrap: break-word;
        }
        .mpBtnStyle
        {
            text-align: center;
        }
        .headerclass
        {
            text-align: center;
            background-color:#DDDDDD;
        }
        #Footer
        {
            font-family:Arial,Helvetica,sans-serif;
            color:#484848;
            border-top-width:1px;
            border-top-style:solid;
            border-top-color:#484848;
            background-image:url({!$Resource.FooterBar});
            background-repeat:repeat-x;
            height:114px;
        }
        #Foot_Container
        {
            width:970px;
            margin-top:0px;
            margin-right:auto;
            margin-bottom:0px;
            margin-left:auto;
            padding-top:22px;
        }
        #FooterLinks
        {
            font-size:12px;
            float:left;
            padding-top:38px;
        }        
        body
        {
            margin:0;
            font-size:1em;
            background-image:url({!$Resource.ColorBar});
            background-repeat:no-repeat;
            background-position:center top;
            background-color:#DDDDDD;
        }
        
        
        
        
    
    .tinynav { display: none }
    
    img
    {
        outline:none;
        border:none;
        -ms-interpolation-mode:bicubic;
        vertical-align:middle;
    }
    #Container
    {
        margin-top:0px;
        margin-right:auto;
        margin-bottom:0px;
        margin-left:auto;
    }
    #Header
    {
        height:63px;
        margin-top:17px;
    }
    #HRM
    {
        height:175px;
        width:225px;
        background-color:#F0F1F2;
        border:1px solid #AAAAAB;
        -moz-border-radius:10px;
        border-radius:10px;
        text-align:center;
        float:left;
        margin-top:16px;
        margin-right:6px;
        margin-bottom:16px;
        margin-left:6px;
    }
    #HRM_body
    {
        font-family:Arial,Helvetica,sans-serif;
        font-size:12px;
        line-height:18px;
        color:#484848;
        margin-top:10px;
        margin-bottom:5px;
        min-height:75px;
        position:relative;
        padding:5px;
    }
    #btn_learn
    {
        width:200px;
        height:38px;
        z-index:5;
        padding-left:15px;
        display:block;
        position:absolute;
    }
    #slideshow
    {
        height:349px;
        position:relative;
        width:970px;
        margin-top:0px;
        margin-right:auto;
        margin-bottom:0;
        margin-left:auto;
        background-image:url(../images/Slideshow_BG.jpg);
        background-repeat:repeat-x;
    }
    #slideshow ul
    {
        height:349px;
        list-style:none outside none;
        overflow:hidden;
        position:absolute;
        width:970px;
    }
    #slideshow .arrow
    {
        height:86px;
        width:60px;
        position:absolute;
        top:50%;
        margin-top:-43px;
        cursor:pointer;
        z-index:5000;
        background-image:url(../images/arrows.png);
        background-repeat:no-repeat;
    }
    #MainNav
    {
        float:left;
    }
    #Logo
    {
        float:left;
        width:300px;
    }
    #NewsArea
    {
        background-image:url(../images/news_bg.jpg);
        background-repeat:repeat-x;
        height:37px;
        padding-top:18px;
    }
    #MainArea
    {
        background-image:url(../images/MainArea_bg.jpg);
        background-repeat:repeat-y;
        border-right-width:1px;
        border-left-width:1px;
        border-right-style:solid;
        border-left-style:solid;
        border-right-color:#787878;
        border-left-color:#787878;
    }
    #MainAreaTwoColumn {
        margin-top: 10px;
    }
    #MainAreaTwoColumnWhite {
        background-color: #fff;
    }
    #MainLft
    {
        float:left;
        width:680px;
        color:#484848;
        padding-left:22px;
        font-size:14px;
        line-height:22px;
        padding-top:22px;
        position:relative;
        text-shadow: 1px 1px 1px #FFF;
        -webkit-transform: translateZ(0);
    }
    #MainLftTwoColumnWhite
    {
        float:left;
        width:680px;
        color:#484848;
        padding: 22px;
        font-size:14px;
        line-height:22px;
        position:relative;
        text-shadow: 1px 1px 1px #FFF;
        -webkit-transform: translateZ(0);
    }
    #MainRgt
    {
        float:right;
        width:240px;
        background-color:#C8C8C8;
        padding-top:22px;
        margin-left:12px;
        position:relative;
        text-align:center;
    }
    #MainRgtTwoColumn
    {
        float:right;
        width:236px;
        background-color:#C8C8C8;
        padding: 22px 5px 0 5px;
        margin: 0;
        position:relative;
        text-align:center;
    }
    #MainRgtTwoColumn .content-area {
        padding: 10px;
    }
    #Breadcrumbs
    {
        font-size:11px;
        color:#484848;
        text-align:right;
        padding-top:5px;
    }
    #SecHeader_Img
    {
        height:280px;
        background-image:url(../images/SecHeader_BG.jpg);
        background-repeat:repeat-x;
    }
    #Success_Lft
    {
        text-align:center;
        float:left;
        width:420px;
        color:#FFFFFF;
        padding-right:15px;
        padding-left:15px;
        padding-top:20px;
        margin-right:12px;
    }
    #Success_Rgt
    {
        float:left;
        padding-top:40px;
    }
    #StudyOne
    {
        height:190px;
        width:237px;
        border:1px solid #C1C1C3;
        float:left;
        margin-left:1px;
        margin-right:2px;
        margin-bottom:4px;
    }
    #Success_Rgt img
    {
        border:3px solid #FFFFFF;
        -moz-box-shadow:5px 5px 5px #333333;
        -webkit-box-shadow:5px 5px 5px #333333;
        box-shadow:5px 5px 5px #333333;
    }
    #navlist
    {
        padding-left:0;
        margin-left:0;
        width:200px;
        background-color:#F7F7F7;
        -moz-border-radius:5px;
        border-radius:5px;
        border:1px solid gray;
    }
    #Newslist
    {
        padding-left:0;
        margin-left:0;
        width:200px;
        background-color:#F7F7F7;
        -moz-border-radius:5px;
        border-radius:5px;
        border:1px solid gray;
    }
    #Newslist li a
    {
        text-decoration:none;
        font-size:12px;
        font-weight:normal;
        color:#005C6F;
        text-align:left;
        width:100px;
        padding-right:23px;
    }
    #Search
    {
        float:left;
        width:140px;
        height:19px;
        margin-top:8px;
    }        
    #Social
    {
        float:right;
        font-size:14px;
        padding-top:36px;
    }
    #Phone
    {
        font-size:12px;
        float:left;
        width:345px;
        padding-top:8px;
    }
    #Address
    {
        float:left;
        font-size:12px;
        padding-top:8px;
    }
    #Foot_Logo
    {
        float:left;
    }
    #Case_Img
    {
        height:130px;
        width:237px;
    }
    #Address
    {
        float:right;
    }
    #case_Text
    {
        height:60px;
        width:237px;
        background-image:url(../images/Case_Grad_BG.jpg);
        background-repeat:no-repeat;
        color:#FFFFFF;
        text-align:center;
    }
    #case_Text p
    {
        margin-bottom:5px;
        line-height:24px;
    }
    #case_Text h3
    {
        font-size:18px;
        padding-top:7px;
        text-shadow:2px 2px 2px #484848;
    }
    #case_Text a
    {
        color:#FFFFFF;
        text-decoration:none;
    }
    #ConnectForm form.FormWidgettheme
    {
        margin:20px 0 0 0;
        padding:0 0 20px 0;
        position:relative;
    }
    .contactButton input
    {
        width:105px;
        height:37px;
        background:transparent url(/images/btn_submit.png) no-repeat;
        border:none;
        margin-left: 25px;
    }
    #Search .gsc-input-box
    {
        border-radius:15px;
        border:1px solid #D0D0D1;
        background-color:#DEDEDE;
        padding-left:20px;
    }
    #Search input.gsc-search-button-v2
    {
        width:11px;
        height:11px;
        min-width:11px;
        padding:5px;
    }
    #Search .gsc-search-button
    {
        margin-left:-138px;
    }
    .topBlockContent
    {
        margin-top:20px;
    }
    #___gcse_1 .gs-result img.gs-image, #___gcse_1 .gs-result img.gs-promotion-image
    {
        padding-left:8px;
    }
    #___gcse_1 .gsc-table-cell-snippet-close, #___gcse_1 .gsc-table-cell-snippet-open
    {
        padding-left:8px;
    }
    #___gcse_1 a.gs-title
    {
        color:#005C6F;
        text-decoration:none;
        font-family:clean,sans-serif;
        font-size:14px;
    }
    #___gcse_1 a.gs-title b
    {
        color:#00333D;
        font-size:14px;
    }
    #___gcse_1 .gs-webResult div.gs-visibleUrl, #___gcse_1 .gs-imageResult div.gs-visibleUrl
    {
        color:#000000;
        font-family:clean,sans-serif;
    }
    #___gcse_1 .gsc-cursor-page
    {
        color:#005C6F;
        background-color:#DDDDDD;
    }
    #___gcse_1 .gsc-cursor-current-page
    {
        color:#005C6F;
        background-color:#DDDDDD;
    }
    #___gcse_1 .gcs-above-wrapper-area
    {
        border-bottom:none;
    }
    
    .flex-container a:active, .flexslider a:active
    {
        outline:none;
    }
    .slides, .flex-control-nav, .flex-direction-nav
    {
        margin:0;
        padding:0;
        list-style:none;
    }
    .flexslider
    {
        width:100%;
        margin:0;
        padding:0;
    }
    .flexslider .slides > li
    {
        display:none;
    }
    .flexslider .slides img
    {
        max-width:100%;
        display:block;
    }
    .flex-pauseplay span
    {
        text-transform:capitalize;
    }
    .slides:after
    {
        display:block;
        clear:both;
        visibility:hidden;
        line-height:0;
        height:0;
    }
    html[xmlns].slides
    {
        display:block;
    }
    * html .slides
    {
        height:1%;
    }
    .no-js .slides > li:first-child
    {
        display:block;
    }
    .flexslider
    {
        position:relative;
        zoom:1;
    }
    .flexslider .slides
    {
        zoom:1;
        margin-left: 10px;
    }
    .flexslider .slides > li
    {
        position:relative;
    }
    .flex-container
    {
        zoom:1;
        position:relative;
        width:940px;
        margin-right:auto;
        margin-left:auto;
    }
    .flex-direction-nav li a
    {
        width:20px;
        height:30px;
        margin:0px 0 0;
        display:block;
        position:absolute;
        top:0;
        cursor:pointer;
        text-indent:-9999px;
    }
    .flex-direction-nav li .flex-next
    {
        right:-18px;
        background:url(../images/news_arrow_rgt.png) no-repeat 0 0;
    }
    .flex-direction-nav li .flex-prev
    {
        left: -10px;
        background:url(../images/news_arrow_lft.png) no-repeat 0 0;
    }
    .flex-direction-nav li .flex-disabled
    {
        opacity:0.3;
        cursor:default;
    }
    .flex-control-nav
    {
        display:none;
    }        
        
        
        
    </style>
    
</apex:page>