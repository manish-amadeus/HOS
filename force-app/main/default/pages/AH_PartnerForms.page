<apex:page controller="AH_PartnerForms" showHeader="false" sidebar="false" standardStylesheets="true">
	
    <script language="JavaScript" type="text/javascript">
    
        function isAuthorized(chk) 
        {
            spn = document.getElementById('spanAcceptBtn');
            spn.style.display = 'none';
            if (chk.checked)
            {
                spn.style.display = 'inline';
            }
    
        }

    </script>

    <apex:slds rendered="true"/>
    
    <div class="slds-scope">
        
        <apex:form >
            
            <apex:pageBlock mode="maindetail">               

                <apex:pageBlockTable value="{!lstForms}" var="f" styleClass="slds-table slds-table_bordered slds-table_cell-buffer">
                    
                    <apex:column headerValue="Form Subject" >
                        <apex:outputText value="{!f.Form_Subject__c}" />     
                    </apex:column>      
                    
                    <apex:column headerValue="Terms Accepted" style="text-align: center;" headerClass="pbColHeadr">
                        <apex:inputCheckbox value="{!f.Accepted_Terms__c}" disabled="true" styleClass="slds-checkbox" />
                    </apex:column> 
                    
                    <apex:column headerValue="Accepted Date">
                        <apex:outputText value="{0, date, MM'/'dd'/'yyyy}">
                            <apex:param value="{!f.Date_Accepted__c}" />
                        </apex:outputText>   
                    </apex:column> 
                    
                    <apex:column headerValue="Accepted By">
                        <apex:outputText value="{!f.Accepted_By__r.Name}" />
                    </apex:column> 
                    
                    <apex:column width="50px" headerValue="Action" headerClass="pbColHeadr">
                        <apex:commandLink value="View Form" action="{!openForm}">
                            <apex:param name="a" assignTo="{!formId}" value="{!f.Partners_Form_Template__c}" />
                            <apex:param name="b" assignTo="{!isAccepted}" value="{!f.Accepted_Terms__c}" />
                        </apex:commandLink>
                        <!-- &nbsp;|&nbsp;<apex:commandLink value="Print Form" action="/apex/AH_PartnerFormsPrint?frm={!f.Partners_Form_Template__c}" /> -->
                    </apex:column> 
                    
                </apex:pageBlockTable>

                <div style="text-align:center; padding-top: 10px; padding-bottom: 10px;" >
                    <apex:outputPanel id="opButtons" rendered="{!showActivationButton}">
                        <a href="http://amadeus-community.force.com/partnercentral/s/" target="_parent">Click to access Amadeus Hospitality PartnerCentral</a>
                    </apex:outputPanel>                    
                </div>
                
                <apex:outputPanel id="opPopup">
                    <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopUp}"/>
                    <apex:outputPanel styleClass="formPopup" layout="block" rendered="{!displayPopUp}">
                        <apex:image alt="Amadeus Hospitality" value="{!$Resource.AmadeusMBFormLogo}" />
                        <hr/>
                        <table>
                            <tr>
                                <td style="font-weight: bold; width: 100px;">
                                    <apex:outputText value="Subject:" />
                                </td>
                                <td>
                                    <apex:outputText value="{!frm.Subject__c}" />
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold; width: 100px;">
                                    <apex:outputText value="Start Date:" />
                                </td>
                                <td>
                                    <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                        <apex:param value="{!frm.Start_Date__c}" />
                                    </apex:outputText>                                        
                                </td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold; width: 100px;">
                                    <apex:outputText value="End Date:" />
                                </td>
                                <td>
                                    <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                        <apex:param value="{!frm.End_Date__c}" />
                                    </apex:outputText>   
                                </td>
                            </tr>
                        </table>
                        <br/>
                        <table>
                            <tr>
                                <td style="font-weight: bold;">
                                    <apex:outputText value="Terms:" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <apex:outputText value="{!frm.Terms__c}" escape="false" />
                                </td>
                            </tr>
                        </table>
                        <br/>
                        <hr/>
                        <div style="text-align: center;">
                            <span id="spanAmAuthed" style="{!IF(isAccepted, 'display:none', 'display:inline')}">
                                <input type="checkbox" name="chkAuthed" value="" onClick="isAuthorized(this);" /> I am authorized to accept these terms and conditions
                                <br />
                            </span>    
                            <apex:commandButton value="Cancel" action="{!closePopup}" rerender="opPopup" />
                            &nbsp;
                            <span id="spanAcceptBtn" style="display: none">
                                <apex:actionStatus id="mySaveStatus1">
                                    <apex:facet name="stop">
                                        <apex:commandButton id="cmdAccept" value=" I Accept These Terms " action="{!acceptTerms}" rerender="dummy" status="mySaveStatus1" rendered="{!IF(isAccepted, false, true)}" />
                                    </apex:facet>
                                    <apex:facet name="start">
                                        <apex:commandButton value="Processing..." status="mySaveStatus1" disabled="true" rendered="{!IF(isAccepted, false, true)}"/>
                                    </apex:facet>
                                    <br/>                                    
                                </apex:actionStatus>
                                <br/>
                                <apex:outputLabel style="font-weight:bold;font-size:110%;" value="{!$Label.PartnerCentral_IAcceptTheseTerms}" rendered="{!IF(isAccepted, false, true)}" />
                                <br/>
                            </span>
                        </div>                        
                        <br/>
                        <br/>
                        <br/>
                    </apex:outputPanel>
                </apex:outputPanel>
                
            </apex:pageBlock>
            
        </apex:form>
        
    </div>
    
    <style type="text/css">

        .formPopup 
        {
            background-color: white;
            border-width: 2px;
            border-style: solid;
            border-color: gray;
            z-index: 9999;
            left: 50%;
            padding: 10px;
            position: absolute;
            width: 600px;
            margin-left: -250px;
            top: 100px;
        }
        .popupBackground 
        {
            background-color: black;
            opacity: 0.20;
            filter: alpha(opacity = 20);
            position: absolute;
            width: 100%;
            height: 600%;
            top: 0;
            left: 0;
            z-index: 9998;
        }
        .pbColHeadr
        {
        	text-align: center !important;
        }
    </style>
    
</apex:page>