<apex:page standardController="AH_Opportunity_Related_Account__c" extensions="AH_NewOpportunityRelAccount_Ext">
    <script type="text/javascript">
    function selectAllCheckboxes(obj,receivedInputID){
        var inputCheckBox = document.getElementsByTagName("input");                  
        for(var i=0; i<inputCheckBox.length; i++){          
            if(inputCheckBox[i].id.indexOf(receivedInputID)!=-1){                                     
                inputCheckBox[i].checked = obj.checked;
            }
        }
    }
    </script>
    <apex:form >
        <apex:sectionHeader subtitle="New AH Opportunity Related Account" title="AH Opportunity Related Account Edit"/>
        
        <apex:pageBlock title="AH Opportunity Related Account Edit" mode="edit">
            
            <apex:pageMessages />
            
            <apex:pageBlockSection title="Information" collapsible="false" columns="2">
                <apex:inputField rendered="{! !fromOpportunity}" value="{!oppAccObj.Opportunity__c}"/>
                <apex:inputField value="{!oppAccObj.Account__c}"/>
                <apex:commandButton value="Add Account" action="{!addAccount}" rendered="{!fromOpportunity}"/>
            </apex:pageBlockSection>
            
            <br/>
            <apex:outputPanel style="float:right;">
                <apex:CommandButton action="{!previous}" value="Previous" rendered="{!hasPrevious}" id="topPrevButton"/> 
                <apex:CommandButton action="{!next}" value="Next" rendered="{!hasNext}" id="topNextButton"/>
                Showing page-{!listNumber+1} of {!totalPages}
            </apex:outputPanel>
            <br/>
            
            <apex:pageBlockButtons location="bottom" >
                <!--<apex:commandButton value="Add Account" action="{!addAccount}" rendered="{!fromOpportunity}"/>-->
                <apex:commandButton value="Relate to Opportunity" action="{!relateToOpportunity}" rendered="{!fromOpportunity}"/>
                <apex:commandButton value="Return" action="{!returnBack}" rendered="{!fromOpportunity}"/>
                <apex:commandButton value="Save" action="{!doSave}" rendered="{! !fromOpportunity}"/>
                <!--
				<apex:commandButton value="Add Account" action="{!addAccount}" rendered="{!relatedAccList != NULL}"/>
				<apex:commandButton value="Relate to Opportunity" action="{!relateToOpportunity}" rendered="{!relatedAccList != NULL}"/>
                <apex:commandButton value="Return" action="{!returnBack}" rendered="{!relatedAccList != NULL}"/>
                <apex:commandButton value="Save" action="{!doSave}" rendered="{!relatedAccList == NULL}"/>
				-->
            </apex:pageBlockButtons>
            
            <!--<apex:pageBlockSection title="Related Accounts of Opportunity" rendered="{!relatedAccList != NULL}" collapsible="false" columns="1">-->
            
            <apex:pageBlockSection title="Related Accounts of Opportunity" rendered="{!fromOpportunity}" collapsible="false" columns="1">
                <apex:pageBlockTable var="acc" value="{!relatedAccWrapperList}" id="tb">
                    <apex:column >
                        <apex:facet name="header">
                            <apex:inputCheckbox onclick="selectAllCheckboxes(this,'inputId')"/>
                        </apex:facet>                      
                        <apex:inputCheckbox value="{!acc.isSelected}" id="inputId" />
                    </apex:column>
                    <apex:column headerValue="Account" value="{!acc.accName}"/>
                    <apex:column headerValue="Billing Street" value="{!acc.accountObj.BillingStreet}"/>
                    <apex:column headerValue="Billing City" value="{!acc.accountObj.BillingCity}"/>
                    <apex:column headerValue="Billing State" value="{!acc.accountObj.BillingState}"/>
                    <apex:column headerValue="Billing Country" value="{!acc.accountObj.BillingCountry}"/>
                    <apex:column headerValue="Phone" value="{!acc.accountObj.Phone}"/>
                </apex:pageBlockTable>
            </apex:pageBlockSection>
            
            <br/>
            <apex:outputPanel style="float:right;">
                <apex:CommandButton action="{!previous}" value="Previous" rendered="{!hasPrevious}" id="prevButton"/> 
                <apex:CommandButton action="{!next}" value="Next" rendered="{!hasNext}" id="nextButton"/>
                Showing page-{!listNumber+1} of {!totalPages}
            </apex:outputPanel>
            <br/><br/>
            
        </apex:pageBlock>
    </apex:form>
</apex:page>